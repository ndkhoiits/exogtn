<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">GateIn Reference Guide</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/></head><body><div class="book" lang="en-US"><div class="titlepage"><div><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d0e1"/>GateIn Reference Guide</h1></div><div><h2 class="subtitle">

			<div class="mediaobject" align="center"><img src="images/Common/gatein_logo.png" align="middle"/></div>

               </h2></div><div><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors">by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">the GateIn community</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname"/>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">JBoss by Red Hat</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname"/>, and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">eXo Platform</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname"/></div><div class="editors">edited by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Scott</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Mumford</span> (Red Hat), <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Thomas</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Heute</span> (Red Hat), <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Luc</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Texier</span> (Red Hat), and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Christophe</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Laprun</span> (Red Hat)</div><div class="others"/></div></div></div><hr/></div><div class="toc"><dl><dt><span class="chapter"><a href="#chap-Reference_Guide-Introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Install_Guide-Introduction-Related_Links">1.1. Related Links</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Reference_Guide-Configuration">2. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Database_Configuration">2.1. Database Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Database_Configuration-Overview">2.1.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Database_Configuration-JCR_database_configuration">2.1.2. Configuring the database for JCR</a></span></dt><dt><span class="section"><a href="#d0e167">2.1.3. Configuring the database for the default identity store</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-EMail_Service_Configuration">2.2. E-Mail Service Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-EMail_Service_Configuration-Overview">2.2.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-EMail_Service_Configuration-Parameters">2.2.2. Configuring the outgoing e-mail account</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration">2.3. HTTPS Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Overview">2.3.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Generate_Key">2.3.2. Generate your key</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Use_In_Jboss">2.3.3. Setup Jboss configuration to use your key</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Use_In_Tomcat">2.3.4. Setup Tomcat configuration to use your key</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Reference_Guide-Development">3. Portal Development</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Skinning_Portal">3.1. Skinning the portal</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Overview">3.1.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Types_of_Styles">3.1.2. Skin Components</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Skin_Switching">3.1.3. Skin Selection</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Skins_in_Page_Markups">3.1.4. Skins in Page Markups</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guid-Skin_Configuration-Skin_Service">3.1.5. The Skin Service</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Default_Skin">3.1.6. The Default Skin</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-How_to_create_a_new_skin">3.1.7. Creating New Skins</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Tips_and_Tricks">3.1.8. Tips and Tricks</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle">3.2. Portal Lifecycle</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle-Overview">3.2.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle-Application_Server_start_and_stop">3.2.2. Application Server start and stop</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle-The_Command_Servlet">3.2.3. The Command Servlet</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Default_Portal_Configuration">3.3. Default Portal Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Default_Portal_Configuration-Overview">3.3.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Default_Portal_Configuration-Configuration">3.3.2. Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Default_Permission_Configuration">3.4. Portal Default Permission Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Default_Permission_Configuration-Overview">3.4.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Default_Permission_Configuration-Overwrite_Portal_Default_Permissions">3.4.2. Overwrite Portal Default Permissions</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration">3.5. Portal Navigation Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-Overview">3.5.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-Portal_Navigation">3.5.2. Portal Navigation</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-Group_Navigation">3.5.3. Group Navigation</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-User_Navigation">3.5.4. User Navigation</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration">3.6. Internationalization Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-Overview">3.6.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-Locales_configuration">3.6.2. Locales configuration</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-ResourceBundleService">3.6.3. ResourceBundleService</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-Navigation_Resource_Bundles">3.6.4. Navigation Resource Bundles</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-_Portlets_">3.6.5.  Portlets </a></span></dt><dt><span class="section"><a href="#d0e1478">3.6.6. Translating the language selection form</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy">3.7. Pluggable Locale Policy</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Locale_Policy_API">3.7.1. LocalePolicy API</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Default_LocalePolicy">3.7.2. Default LocalePolicy</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Custom_LocalePolicy">3.7.3. Custom LocalePolicy</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Configuration">3.7.4. LocalePolicy Configuration</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Non_bridged">3.7.5. Keeping non-bridged resources in sync with current Locale</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework">3.8. RTL (Right To Left) Framework</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Groovy_templates">3.8.1. Groovy templates</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Stylesheet">3.8.2. Stylesheet</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Images">3.8.3. Images</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Client_side_JavaScript">3.8.4. Client side JavaScript</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles">3.9. XML Resources Bundles</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles-Motivation">3.9.1. Motivation</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles-XML_format">3.9.2. XML format</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles-Portal_support">3.9.3. Portal support</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication">3.10. JavaScript Inter Application Communication</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Overview">3.10.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Library">3.10.2. Library</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Syntax">3.10.3. Syntax</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Example_of_what">3.10.4. Example of Javascript events usage</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Upload_Component">3.11. Upload Component</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Upload_Component-Upload_Service">3.11.1. Upload Service</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_">3.12. Deactivation of the Ajax Loading Mask Layer </a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_-Purpose">3.12.1. Purpose</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_-Synchronous_issue">3.12.2. Synchronous issue</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Javascript_Configuration">3.13. Javascript Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Reference_Guide-Portlet_development">4. Portlet development</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portlet_Primer">4.1. Portlet Primer</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portlet_Primer-JSR_168_and_JSR_286_overview">4.1.1. JSR-168 and JSR-286 overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portlet_Primer-Tutorials">4.1.2. Tutorials</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Global_Portlet">4.2. Global portlet.xml file</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Global_Portlet-Global_usecase">4.2.1. Global portlet.xml usecase</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Global_Portlet-Global_metadata">4.2.2. Global metadata</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Reference_Guide-Gadget_development">5. Gadget development</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets">5.1. Gadgets</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Existing_Gadgets">5.1.1. Existing Gadgets</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Create_a_new_Gadget">5.1.2. Create a new Gadget</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Remote_Gadget">5.1.3. Remote Gadget</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Gadget_Importing">5.1.4. Gadget Importing</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Gadget_Web_Editing">5.1.5. Gadget Web Editing</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Gadget_IDE_Editing">5.1.6. Gadget IDE Editing</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Dashboard_Viewing">5.1.7. Dashboard Viewing</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Setup_a_Gadget_Server">5.2. Setup a Gadget Server</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Setup_a_Gadget_Server-Virtual_servers_for_gadget_rendering">5.2.1. Virtual servers for gadget rendering</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Setup_a_Gadget_Server-Configuration">5.2.2. Configuration</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Reference_Guide-Authentication_And_Identity">6. Authentication and Identity</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration">6.1. Predefined User Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Overview">6.1.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_adding_users_groups_and_membership_types">6.1.2. Plugin for adding users, groups and membership types</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Membership_types">6.1.3. Membership types</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Groups">6.1.4. Groups</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Users">6.1.5. Users</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_monitoring_user_creation">6.1.6. Plugin for monitoring user creation</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration">6.2. Authentication Token Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration-What_is_token_service">6.2.1. What is Token Service?</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration-Implement_token_services_API">6.2.2. Implementing the Token Service API</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration-Configure_token_services">6.2.3. Configuring token services</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-PicketLink_IDM_integration">6.3. PicketLink IDM integration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-PicketLink_IDM_integration-Configuration_files">6.3.1. Configuration files</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-APIs-Organization_API">6.4. Organization API</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Accessing_User_Profile">6.5. Accessing User Profile</a></span></dt><dt><span class="section"><a href="#chap-Reference_Guide-SSO_Single_Sign_On">6.6. Single-Sign-On (SSO)</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-Overview">6.6.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-CAS_Central_Authentication_Service">6.6.2. Central Authentication Service (CAS)</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-JOSSO">6.6.3. JOSSO</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-OpenSSO_The_Open_Web_SSO_project">6.6.4. OpenSSO - The Open Web SSO project</a></span></dt><dt><span class="section"><a href="#Single_Sign_On-SPNEGO">6.6.5. SPNEGO</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#wsrp">7. Web Services for Remote Portlets (WSRP)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e4855">7.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#wsrp_support">7.2. Level of support in GateIn 3.2</a></span></dt><dt><span class="sect1"><a href="#d0e4902">7.3. Deploying GateIn's WSRP services</a></span></dt><dd><dl><dt><span class="sect2"><a href="#wsrp-ports">7.3.1. Considerations to use WSRP when running GateIn on a non-default port or hostname</a></span></dt><dt><span class="sect2"><a href="#d0e4985">7.3.2. Considerations to use WSRP with SSL</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e4996">7.4. Making a portlet remotable</a></span></dt><dt><span class="sect1"><a href="#d0e5076">7.5. Consuming GateIn's WSRP portlets from a remote Consumer</a></span></dt><dt><span class="sect1"><a href="#consumer_configuration">7.6. Consuming remote WSRP portlets in GateIn</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5097">7.6.1. Overview</a></span></dt><dt><span class="sect2"><a href="#d0e5104">7.6.2. Configuring a remote producer walk-through</a></span></dt><dt><span class="sect2"><a href="#d0e5228">7.6.3. Configuring access to remote producers via XML</a></span></dt><dt><span class="sect2"><a href="#d0e5325">7.6.4. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e5353">7.7. Consumers maintenance</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5356">7.7.1. Modifying a currently held registration</a></span></dt><dt><span class="sect2"><a href="#d0e5443">7.7.2. Consumer operations</a></span></dt><dt><span class="sect2"><a href="#d0e5480">7.7.3. Importing and exporting portlets</a></span></dt><dt><span class="sect2"><a href="#d0e5573">7.7.4. Erasing local registration data</a></span></dt></dl></dd><dt><span class="sect1"><a href="#producer_config">7.8. Configuring GateIn's WSRP Producer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5592">7.8.1. Overview</a></span></dt><dt><span class="sect2"><a href="#d0e5603">7.8.2. Default configuration</a></span></dt><dt><span class="sect2"><a href="#registration-configuration">7.8.3. Registration configuration</a></span></dt><dt><span class="sect2"><a href="#strict-mode">7.8.4. WSRP validation mode</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Reference_Guide-Advanced">8. Advanced Development</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Foundations">8.1. Foundations</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Kernel">8.1.1. GateIn Kernel</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Configuring_services">8.1.2. Configuring services</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Configuration_syntax">8.1.3. Configuration syntax</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Init_params">8.1.4. InitParams configuration object</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Configuring_portal">8.1.5. Configuring a portal container</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Extension_mechanism">8.1.6. GateIn Extension Mechanism, and Portal Extensions</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Multiple_portals">8.1.7. Running Multiple Portals</a></span></dt></dl></dd></dl></dd></dl></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Introduction"/>Chapter 1. Introduction</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-Install_Guide-Introduction-Related_Links">1.1. Related Links</a></span></dt></dl></div><p>
		GateIn 3.2 is the merge of two mature Java projects; JBoss Portal and eXo Portal. This new community project takes the best of both offerings and incorporates them into a single portal framework. The aim is to provide an intuitive user-friendly portal, and a framework to address the needs of today's Web 2.0 applications.
	</p><div class="mediaobject" align="center"><img src="images/Common/Frontpage.png" align="middle"/></div><p>
		This book provides a deep-dive information about installation and configuration of the services provided by GateIn.
	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Install_Guide-Introduction-Related_Links"/>1.1. Related Links</h2></div></div></div><div class="itemizedlist"><ul><li><p>
					GateIn homepage:
					<a class="ulink" href="http://www.gatein.org">www.gatein.org</a>
				</p></li><li><p>
					GateIn videos:
					<a class="ulink" href="http://vimeo.com/channels/gatein">vimeo.com/channels/gatein</a>
				</p></li><li><p>
					GateIn documentation:
					<a class="ulink" href="http://www.jboss.org/gatein/documentation.html">www.jboss.org/gatein/documentation.html</a>
				</p></li><li><p>
					GateIn downloads:
					<a class="ulink" href="http://www.jboss.org/gatein/downloads.html">www.jboss.org/gatein/downloads.html</a>
				</p></li></ul></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Configuration"/>Chapter 2. Configuration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-Reference_Guide-Database_Configuration">2.1. Database Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Database_Configuration-Overview">2.1.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Database_Configuration-JCR_database_configuration">2.1.2. Configuring the database for JCR</a></span></dt><dt><span class="section"><a href="#d0e167">2.1.3. Configuring the database for the default identity store</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-EMail_Service_Configuration">2.2. E-Mail Service Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-EMail_Service_Configuration-Overview">2.2.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-EMail_Service_Configuration-Parameters">2.2.2. Configuring the outgoing e-mail account</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration">2.3. HTTPS Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Overview">2.3.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Generate_Key">2.3.2. Generate your key</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Use_In_Jboss">2.3.3. Setup Jboss configuration to use your key</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-HTTPS_Configuration-Use_In_Tomcat">2.3.4. Setup Tomcat configuration to use your key</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Database_Configuration"/>2.1. Database Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Database_Configuration-Overview"/>2.1.1. Overview</h3></div></div></div><p>GateIn 3.2 has two different database dependencies. One is the
    identity service configuration, which depends on Hibernate. The other is Java content repository (JCR) service, which
    depends on JDBC API, and can integrate with any existing datasource implementation.</p><p>When you change the database configuration for the first time,
    GateIn will automatically generate the proper schema (assuming that the
    database user has the appropriate permissions).</p><p>GateIn 3.2 assumes the default encoding for your database is
    <code class="literal">latin1</code>. You may need to change this parameter for
    your database in order for GateIn 3.2 to work properly.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Database_Configuration-JCR_database_configuration"/>2.1.2. Configuring the database for JCR</h3></div></div></div><p>To configure the database used by JCR you will need to edit the
    file:</p><pre class="programlisting">$JBOSS_HOME/server/default/conf/gatein/configuration.properties</pre><p>For Tomcat, the file is located at </p><pre class="programlisting">$TOMCAT_HOME/gatein/conf/configuration.properties</pre><p>And edit the values of driver, url, username and password with the
    values for your JDBC connection (please, refer to your database JDBC driver
    documentation).</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">gatein.jcr.datasource.driver=org.hsqldb.jdbcDriver</span><br />
<span class="xml_plain">gatein.jcr.datasource.url=jdbc:hsqldb:file:${gatein.db.data.dir}/data/jdbcjcr_${name}</span><br />
<span class="xml_plain">gatein.jcr.datasource.username=sa</span><br />
<span class="xml_plain">gatein.jcr.datasource.password=</span><br />
</pre><p>By default, the name of the database is "jdbcjcr_${name}" - ${name}
    should be a part of the database name, as it is dynamically replaced by the
    name of the portal container extension (for instance,
    gatein-sample-portal.ear defines "sample-portal" as container name and the
    default portal defines "portal" as container name).</p><p>In the case of HSQL the databases are created automatically. For any
    other database you will need to create a database named jdbcjcr_portal
    (and "jdbcjcr_sample-portal" if you have gatein-sample-portal.ear in
    $JBOSS_HOME/server/default/deploy - note that some databases don't accept '-'
    in the database name, so you may have to remove
    $JBOSS_HOME/server/default/deploy/gatein-sample-portal.ear)</p><p>Make sure the user has rights to create tables on jdbcjcr_portal, and
    to update them as they will be automatically created during the first startup .</p><p>Also add your database's JDBC driver into the classpath - you can put it in
    $JBOSS_HOME/server/default/lib (or $TOMCAT_HOME/lib, if you are running on
    Tomcat)</p><p>MySQL example:</p><p>Let's configure our JCR to store data in MySQL. Let's pretend we
    have a user named "gateinuser" with a password "gateinpassword". We would
    create a database "mygateindb_portal" (remember that _portal is required),
    and assign our user the rights to create tables.</p><p>Then we need to add MySQL's JDBC driver to the classpath, and
    finally edit gatein.ear/02portal.war/WEB-INF/conf/jcr/jcr-configuration
    to contain the following:</p><pre class="programlisting">gatein.jcr.datasource.driver=com.mysql.jdbc.Driver
gatein.jcr.datasource.url=jdbc:mysql://localhost:3306/mygateindb${container.name.suffix}
gatein.jcr.datasource.username=gateinuser
gatein.jcr.datasource.password=gateinpassword
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e167"/>2.1.3. Configuring the database for the default identity store</h3></div></div></div><p>By default, users are stored in a database. To change the database in which to
    store users, you will need to edit the file:</p><pre class="programlisting">$JBOSS_HOME/server/default/conf/gatein/configuration.properties</pre><p>For
    Tomcat, the file is located at </p><pre class="programlisting">$TOMCAT_HOME/gatein/conf/configuration.properties</pre><p>You will find the same kind of configuration as in
    jcr-configuration.xml:</p><pre class="programlisting">gatein.idm.datasource.driver=org.hsqldb.jdbcDriver
gatein.idm.datasource.url=jdbc:hsqldb:file:${gatein.db.data.dir}/data/jdbcidm_${name}
gatein.idm.datasource.username=sa
gatein.idm.datasource.password</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-EMail_Service_Configuration"/>2.2. E-Mail Service Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-EMail_Service_Configuration-Overview"/>2.2.1. Overview</h3></div></div></div><p>GateIn 3.2 includes an e-mail sending service that needs to be configured
    before it can function properly. This service, for instance, is used to send e-mails to users who forgot
    their password or username.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-EMail_Service_Configuration-Parameters"/>2.2.2. Configuring the outgoing e-mail account</h3></div></div></div><p>The e-mail service can use any SMTP account configured in
    $JBOSS_HOME/server/default/conf/gatein/configuration.properties
    (or $TOMCAT_HOME/gatein/conf/configuration.properties if you are using Tomcat).</p><p>The relevant section looks like:</p><pre class="programlisting"># EMail
gatein.email.smtp.username=
gatein.email.smtp.password=
gatein.email.smtp.host=smtp.gmail.com
gatein.email.smtp.port=465
gatein.email.smtp.starttls.enable=true
gatein.email.smtp.auth=true
gatein.email.smtp.socketFactory.port=465
gatein.email.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory</pre><p>It is preconfigured for GMail, so that any GMail account can easily be used (simply use the full GMail address
    as username, and fill-in the password.</p><p>In corporate environments you will want to use your corporate SMTP gateway. When using it over SSL,
       like in default configuration, you may need to configure a certificate truststore, containing your SMTP server's
       public certificate. Depending on the key sizes, you may then also need to install Java Cryptography Extension (JCE) 
       Unlimited Strength Jurisdiction Policy Files for your Java Runtime Environment.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-HTTPS_Configuration"/>2.3. HTTPS Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-HTTPS_Configuration-Overview"/>2.3.1. Overview</h3></div></div></div><p>GateIn 3.2 default run on HTTP mode. However, for security purpose, you can config GateIn to run on HTTPS mode. This section show you how to config GateIn with HTTPS mode.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-HTTPS_Configuration-Generate_Key"/>2.3.2. Generate your key</h3></div></div></div><p>If you haven't your own X.509 certificate, you can make a simple certificate using keytool command:
    </p><pre class="programlisting">keytool -genkey -alias serverkeys -keyalg RSA -keystore server.keystore -storepass 123456 -keypass 123456 -dname "CN=localhost, 		OU=MYOU, O=MYORG, L=MYCITY, ST=MYSTATE, C=MY"</pre><p>Now, your key is stored in server.keystore</p><p>You need to import your key into the Sun JDK keystore (This is required to help running gadget features)
    </p><pre class="programlisting">keytool -importkeystore -srckeystore server.keystore -destkeystore $JAVA_HOME/jre/lib/security/cacerts</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-HTTPS_Configuration-Use_In_Jboss"/>2.3.3. Setup Jboss configuration to use your key</h3></div></div></div><p>Edit server.xml from jboss/server/&lt;NAME&gt;/deploy/jbossweb.sar folder.
    	Comment lines:
	</p><pre class="programlisting">&lt;Connector protocol="HTTP/1.1" port="8080" address="${jboss.bind.address}" 
		       connectionTimeout="20000" redirectPort="8443" /&gt;</pre><p>
	Uncomment lines and change keystoreFile and keystorePass to values of your key:
	</p><pre class="programlisting">&lt;Connector protocol="HTTP/1.1" SSLEnabled="true" 
		   port="8443" address="${jboss.bind.address}"
		   scheme="https" secure="true" clientAuth="false" 
		   keystoreFile="$JAVA_HOME/jre/lib/security/cacerts"
		   keystorePass="123456" sslProtocol = "TLS" /&gt;</pre><p>
     </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-HTTPS_Configuration-Use_In_Tomcat"/>2.3.4. Setup Tomcat configuration to use your key</h3></div></div></div><p>Edit server.xml from tomcat/conf folder. Comment lines:
	</p><pre class="programlisting">&lt;Connector port="8080" protocol="HTTP/1.1" 
		maxThreads="150" connectionTimeout="20000" 
		redirectPort="8443" URIEncoding="UTF-8"
		emptySessionPath="true"/&gt;</pre><p>
	Uncomment lines and add keystoreFile and keystorePass values:
    	</p><pre class="programlisting">&lt;Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
		maxThreads="150" scheme="https" secure="true"
		clientAuth="false" sslProtocol="TLS" 
		keystoreFile="$JAVA_HOME/jre/lib/security/cacerts"
		keystorePass="123456" /&gt;</pre><p>
   </p><p>Restart GateIn. If your configuration is correct, you can access to GateIn via address: <code class="literal">https://&lt;ServerAddress&gt;:8443/portal</code></p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Development"/>Chapter 3. Portal Development</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-Reference_Guide-Skinning_Portal">3.1. Skinning the portal</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Overview">3.1.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Types_of_Styles">3.1.2. Skin Components</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Skin_Switching">3.1.3. Skin Selection</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Skins_in_Page_Markups">3.1.4. Skins in Page Markups</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guid-Skin_Configuration-Skin_Service">3.1.5. The Skin Service</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Default_Skin">3.1.6. The Default Skin</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-How_to_create_a_new_skin">3.1.7. Creating New Skins</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Skin_Configuration-Tips_and_Tricks">3.1.8. Tips and Tricks</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle">3.2. Portal Lifecycle</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle-Overview">3.2.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle-Application_Server_start_and_stop">3.2.2. Application Server start and stop</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Lifecycle-The_Command_Servlet">3.2.3. The Command Servlet</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Default_Portal_Configuration">3.3. Default Portal Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Default_Portal_Configuration-Overview">3.3.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Default_Portal_Configuration-Configuration">3.3.2. Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Default_Permission_Configuration">3.4. Portal Default Permission Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Default_Permission_Configuration-Overview">3.4.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Default_Permission_Configuration-Overwrite_Portal_Default_Permissions">3.4.2. Overwrite Portal Default Permissions</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration">3.5. Portal Navigation Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-Overview">3.5.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-Portal_Navigation">3.5.2. Portal Navigation</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-Group_Navigation">3.5.3. Group Navigation</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portal_Navigation_Configuration-User_Navigation">3.5.4. User Navigation</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration">3.6. Internationalization Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-Overview">3.6.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-Locales_configuration">3.6.2. Locales configuration</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-ResourceBundleService">3.6.3. ResourceBundleService</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-Navigation_Resource_Bundles">3.6.4. Navigation Resource Bundles</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Internationalization_Configuration-_Portlets_">3.6.5.  Portlets </a></span></dt><dt><span class="section"><a href="#d0e1478">3.6.6. Translating the language selection form</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy">3.7. Pluggable Locale Policy</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Locale_Policy_API">3.7.1. LocalePolicy API</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Default_LocalePolicy">3.7.2. Default LocalePolicy</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Custom_LocalePolicy">3.7.3. Custom LocalePolicy</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Configuration">3.7.4. LocalePolicy Configuration</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Non_bridged">3.7.5. Keeping non-bridged resources in sync with current Locale</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework">3.8. RTL (Right To Left) Framework</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Groovy_templates">3.8.1. Groovy templates</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Stylesheet">3.8.2. Stylesheet</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Images">3.8.3. Images</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-RTL_Right_To_Left_Framework-Client_side_JavaScript">3.8.4. Client side JavaScript</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles">3.9. XML Resources Bundles</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles-Motivation">3.9.1. Motivation</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles-XML_format">3.9.2. XML format</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-XML_Resources_Bundles-Portal_support">3.9.3. Portal support</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication">3.10. JavaScript Inter Application Communication</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Overview">3.10.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Library">3.10.2. Library</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Syntax">3.10.3. Syntax</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-JavaScript_Inter_Application_Communication-Example_of_what">3.10.4. Example of Javascript events usage</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Upload_Component">3.11. Upload Component</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Upload_Component-Upload_Service">3.11.1. Upload Service</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_">3.12. Deactivation of the Ajax Loading Mask Layer </a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_-Purpose">3.12.1. Purpose</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_-Synchronous_issue">3.12.2. Synchronous issue</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Javascript_Configuration">3.13. Javascript Configuration</a></span></dt></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Skinning_Portal"/>3.1. Skinning the portal</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Overview"/>3.1.1. Overview</h3></div></div></div><p>GateIn 3.2
      provides robust skinning support for the entire portal User
      Interface (UI). This includes support for skinning all of the
      common portal elements as well as being able to provide custom
      skins and window decoration for individual portlets. All of this
      designed with common graphic resource reuse and ease of development
      in mind.
    </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Types_of_Styles"/>3.1.2. Skin Components</h3></div></div></div><p>
      The complete skinning of a page can be decomposed into three main
      parts:
    </p><div class="variablelist"><dl><dt><span class="term">Portal Skin</span></dt><dd><p>
            The portal skin contains the css styles for the portal and its various UI
            components. This should include all the UI components except for the window
            decorators and portlet specific styles.
          </p></dd><dt><span class="term">Window Styles</span></dt><dd><p>
            The CSS styles associated with the porlet window decorators. The window
            decorators contain the control buttons and boarders surrounding each portlet.
            Individual portlets can have their own window decorator selected, or be 
            rendered without one.
          </p></dd><dt><span class="term">Portlet Skins</span></dt><dd><p>
            The portlet skins effect how portlets are rendered on the page. There are two
            main ways this can be affected:
          </p><div class="variablelist"><dl><dt><span class="term">Portlet Specification CSS Classes</span></dt><dd><p>The
                  portlet specification defines a set of css classes that should
                  be available to portlets. GateIn 3.2 provides
                  these classes as part of the portal skin. This allows each portal skin to
                  define its own look and feel for these default values.
                </p></dd><dt><span class="term">Portlet Skins</span></dt><dd><p>GateIn 3.2
                  provides a means for portlet css files to be loaded based on
                  the current portal skin. This allows a portlet to provide different 
                  css styles to better match the current portal look and feel. Portlet skins
                  provide a much more customizable css experience than just using the portlet
                  specification css classes.
                </p></dd></dl></div></dd></dl></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
        The window decorators and the default portlet specification css classes should
        be considered separate types of skinning components, but they need to be included
        as part of the overall portal skin. The portal skin must include these component´s 
        css classes or they will not be displayed correctly.</p><p>
        A portlet skin doesn't need to be included as part of the portal skin and can
        be included within the portlets web application.
    </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Skin_Switching"/>3.1.3. Skin Selection</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Skin_Switching-UI"/>3.1.3.1. Skin Selection Through the User Interface</h4></div></div></div><p>
        There are a few means in which a skin can be selected to be displayed
        to the user. The easiest way to change the skin is select it through
        the user interface. An admin can change the default skin for the portal, or
        a logged in user can select which skin they would prefer to be displayed.
	</p><p>
        Please see the User Guide for information on how to change the skin using the user
        interface.
	</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Skin_Switching-config"/>3.1.3.2. Setting the Default Skin within the Configuration Files</h4></div></div></div><p>
        The default skin can also be configured through the portal
        configuration files if using the admin user interface is not desired.
        This will allow for the portal to have the new default skin ready when GateIn 3.2
        is first started.
      </p><p>
        The default skin of the portal is called
        <code class="literal">Default</code>. To change this value add a
        <code class="literal">skin</code> tag in the
        <code class="literal">02portal.war/WEB-INF/conf/portal/portal/classic/portal.xml</code>
        configuration file.
      </p><p>
        To change the skin to
        <code class="literal">MySkin</code>
        you would make the following changes:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portal-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portal-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">classic</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portal-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">en</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">skin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MySkin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">skin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Skins_in_Page_Markups"/>3.1.4. Skins in Page Markups</h3></div></div></div><p>A GateIn 3.2
      skin contains css styles for the portal's components but
      also shares components that may be reused in portlets. When GateIn 3.2
      generates a portal page markup, it inserts stylesheet links in the page's
      <code class="literal">head</code> tag.
    </p><p>
      There are two main types of css links that will appear in the
      <code class="literal">head</code> tag: a link to the portal skin css file and a link 
      to the portlet skin css files.
    </p><div class="variablelist"><dl><dt><span class="term">Portal Skin</span></dt><dd><p>
            The portal skin will appear as a single link to a css file. This
            link will contain contents from all the portal skin classes merged
            into one file. This allow for the portal skin to be transfered more
            quickly as a single file instead of many multiple smaller files.
            Included with every page render.
          </p></dd><dt><span class="term">Portlet Skin</span></dt><dd><p>
            Each portlet on a page may contribute its own style. The link to
            the portlet skin will only appear on the page if that portlet is
            loaded on the current page. A page may contain many portlet skin css
            links or none.
          </p></dd></dl></div><p>In the code fragment below you can see the two types of links:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
<span class="xml_comment">&lt;!--&nbsp;The&nbsp;portal&nbsp;skin&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;CoreSkin&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/eXoResources/skin/Stylesheet.css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--&nbsp;The&nbsp;portlet&nbsp;skins&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;web_FooterPortlet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;/web/skin/portal/webui/component/UIFooterPortlet/DefaultStylesheet.css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;web_NavigationPortlet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;/web/skin/portal/webui/component/UINavigationPortlet/DefaultStylesheet.css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;web_HomePagePortlet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;/portal/templates/skin/webui/component/UIHomePagePortlet/DefaultStylesheet.css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;web_BannerPortlet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;/web/skin/portal/webui/component/UIBannerPortlet/DefaultStylesheet.css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">head</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Window styles and the portlet specification CSS classes are included
      within the portal skin.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guid-Skin_Configuration-Skin_Service"/>3.1.5. The Skin Service</h3></div></div></div><p>
    The skin service is a GateIn 3.2 service which manages the various types of
    skins. It is reponsible for discovering and deploying the skins into the
    portal.
    </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e374"/>3.1.5.1. Skin configuration</h4></div></div></div><p>GateIn 3.2 automatically discovers web archives that contain a
      file descriptor for skins (<code class="filename">WEB-INF/gatein-resources.xml</code>). This file is
      reponsible for specifying the portal, portlet and window decorators to be deployed into the
      skin service.
      </p><p>The full schema can be found in lib directory:</p><code class="filename">exo.portal.component.portal.jar/gatein_resources_1_0.xsd</code><p>Here is an example where we define a skin (MySkin) with its CSS location, and specify a few window decorator skins: 
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">gatein-resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portal-skin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">skin-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MySkin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">skin-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">css-path</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/skin/myskin.css</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">css-path</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">overwrite</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">overwrite</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portal-skin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">gatein-resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;window&nbsp;style&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">window-style</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">style-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyThemeCategory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">style-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyThemeBlue</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyThemeRed</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-How_to_Configure_a_Portal_Skin-SkinConfigListener"/>3.1.5.2. Resource Request Filter</h4></div></div></div><p>Because of the Right-To-Left support all CSS files need to be
      retrieved through a Servlet filter and the web application needs to be
      configured to activate this filter. This is already done for
      01eXoResources.war web application which contains the default skin.</p><p>
      Any new web applications containing skinning css files will
      need to have the following added to their
      <code class="literal">web.xml</code>
      :
    </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">ResourceRequestFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.application.ResourceRequestFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">ResourceRequestFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*.css</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>The <code class="literal">display-name</code> element will also need to
      be specified in the <code class="literal">web.xml</code> for the skinning service to work properly
      with the web application.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Default_Skin"/>3.1.6. The Default Skin</h3></div></div></div><p>
    The default skin for GateIn 3.2 is located as part of the <code class="literal">01eXoResource.war</code>.
    The main files associated with the skin is show below:
    </p><div class="programlistingco"><pre class="programlisting">WEB-INF/gatein<span xmlns="" class="co" id="area-Reference_Guide-Skin_Configuration-Default_Skin-gatein-resources"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>-resources.xml
WEB-INF/web.xm<span xmlns="" class="co" id="area-Reference_Guide-Skin_Configuration-Default_Skin-web"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>l
skin/Styleshee<span xmlns="" class="co" id="area-Reference_Guide-Skin_Configuration-Default_Skin-skin-Stylesheet"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>t.css</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>gatein-resources.xml: defines the skin setup to use</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>web.xml: contains the resource filer and has the display-name set</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>Stylesheet.css: contains the CSS class definitions for this skin.</p></td></tr></table></div></div><div class="variablelist"><dl><dt><span class="term">gatein-resources.xml</span></dt><dd><p>
		    For the default portal skin, this file contains definitions for the portal skin, the window
		    decorations that this skin provides and well as defining some javascript resources which are not
		    related to the skin. The default portal skin doesn't directly define portlet skins, these should be
		    provided by the portlets themeselves.
          </p></dd><dt><span class="term">web.xml</span></dt><dd><p>
	        For the default portal skin, the web.xml of the eXoResources.war will contains a lot
	        of information which is mostly irrelevant to the portal skining. The areas of interest
	        in this file is the resourcerequestfilter and the fact that the display-name is set.
          </p></dd><dt><span class="term">Stylesheet.css</span></dt><dd><p>
          The main portal skin stylesheet. The file is the main entry point to the css class definitions
          for the skin. Below is shown the contents of this file:
          </p><div class="programlistingco"><pre class="programlisting">@import url(De<span xmlns="" class="co" id="area-Reference_Guide-Skin_Configuration-Default_Skin-uiportletapplication"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>faultSkin/portal/webui/component/UIPortalApplicationSkin.css);
@import url(De<span xmlns="" class="co" id="area-Reference_Guide-Skin_Configuration-Default_Skin-components"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>faultSkin/webui/component/Stylesheet.css);
@import url(Po<span xmlns="" class="co" id="area-Reference_Guide-Skin_Configuration-Default_Skin-portletthemes"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>rtletThemes/Stylesheet.css);
@import url(Po<span xmlns="" class="co" id="area-Reference_Guide-Skin_Configuration-Default_Skin-portlet"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span>rtlet/Stylesheet.css);</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>Skin for the main portal page.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>Skins for various portal components.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>Window decoration skins.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>The portlet specificiation css classes.</p></td></tr></table></div></div><p>
		  Instead of defining all the CSS classes in this one file we are instead importing other css stylesheet files,
		  some of which may also import other CSS stylesheets. The css classes are split up between multiple files to make
		  it easier for new skins to reuse parts of the default skin.
		  </p><p>To reuse a CSS stylesheet from the default portal skin you would need to reference the default skin from eXoResources.
		  For example, to include the window decorators from the default skin within a new portal skin you would need to use this import: </p><pre class="programlisting">@import url(/eXoResources/skin/Portlet/Stylesheet.css);</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>When the portal skin is added to the page, it merge all the css stylesheets into a single file.</p></div></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Skin_Configuration-How_to_create_a_new_skin"/>3.1.7. Creating New Skins</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Skin_Configuration-How_to_create_new_portal_skin"/>3.1.7.1. Creating a New Portal Skin</h4></div></div></div><p>
        A new portal will need to be added to the portal through the skin service. As such the web application
        which contains the skin will need to be properly configured for the skin service to discover them. This 
        means properly configuring the ResourceRequestFilter and gatein-resources.xml.
      </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e493"/>3.1.7.1.1. Portal Skin Configuration</h5></div></div></div><p>
        The gatein-resources.xml will need to specify the new portal skin. This will include specifying the name
        of the new skin, where to locate its css stylesheet file and whether to overwrite an existing portal theme with
        the same name.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">gatein-resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portal-skin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">skin-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MySkin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">skin-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">css-path</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/skin/myskin.css</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">css-path</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">overwrite</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">overwrite</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portal-skin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">gatein-resources</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>The default portal skin and window styles are defined in
    <code class="filename">01eXoResources.war/WEB-INF/gatein-resources.xml</code>.
    </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
      The css for the portal skin needs to contain the css for all the window decorations and the portlet specification
      css classes.
      </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e508"/>3.1.7.1.2. Portal Skin Preview Icon</h5></div></div></div><p>
         When selecting a skin it is possible to see a preview of what the skin will look like. The current skin needs to
         know about the skin icons for all the available skins, otherwise it will not be able
         to show the previews. When creating a new portal it is recommended to include the preview
         icons of the other skins and to update the other skins with your new portal skin preview.
         </p><div class="mediaobject"><img src="images/PortalDevelopment/Skinning/portal-change-skin.png"/></div><p>
         The portal skin preview icon is specified through the CSS of the portal skin. In order for the current portal skin
         to be able to display the preview it must specify a specific CSS class and set the icon as the background. 
         </p><p>
         For a portal named <span class="bold"><strong>MySkin</strong></span> in must define the following CSS class:
         </p><pre class="programlisting">.UIChangeSkinForm .UIItemSelector .TemplateContainer .<span class="bold"><strong>MySkinImage</strong></span></pre><p>
         In order for the default skin to know about the skin icon for a new portal skin, the preview screenshot
         needs to be place in:</p><code class="filename">01eXoResources.war:/skin/DefaultSkin/portal/webui/component/customization/UIChangeSkinForm/background</code><p>
         The CSS stylesheet for the default portal needs to have the following updated with the preview icon css class. For a skin named 
         <span class="bold"><strong>MySkin</strong></span> then the following needs to be updated:</p><code class="filename">01eXoResources.war:/skin/DefaultSkin/portal/webui/component/customization/UIChangeSkinForm/Stylesheet.css</code><pre class="programlisting">.UIChangeSkinForm .UIItemSelector .TemplateContainer .<span class="bold"><strong>MySkinImage</strong></span> {
  margin: auto;
  width: 329px; height:204px;
  background: url('background/MySkin.jpg') no-repeat top;
  cursor: pointer ;
}</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Skin_Configuration-How_to_create_new_themes"/>3.1.7.2. Creating a New Window Style</h4></div></div></div><p>Window styles are the CSS applied to window decoration. When an
    administrator choose a new application to add on a page he can decide
    which style of decoration would go around the window if any.</p><div class="mediaobject"><img src="images/PortalDevelopment/Skinning/windowStyles.png"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e552"/>3.1.7.2.1. Window Style Configuration</h5></div></div></div><p>
	Window Styles are defined within a gatein-resources.xml file which is used by the skin service to 
	deploy the window style into the portal. Window styles can belong in with a window style category, this
	category and the window styles will need to be specified in resources file.
	</p><p>The following gatein-resource.xml fragment will add MyThemeBlue and MyThemeRed to 
        the MyTheme category.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">window-style</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">style-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyTheme</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">style-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyThemeBlue</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyThemeRed</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">style-theme</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">window-style</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>The windows style configuration for the default skin is configured in:</p><code class="filename">01eXoResources.war/WEB-INF/gatein-resources.xml</code><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
    When a window style is defined in gatein-resources.xml file, it will be available
    to all portlets regardless if the current portal skin support the window decorator or 
    not. It is recommended that when a new window decorator is added that it is added 
    to all portal skins or that portal skins share a common stylesheet for window decorators.
    </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e568"/>3.1.7.2.2. Window Style CSS</h5></div></div></div><p>
	In order for the skin service to display the window decorators, it must have CSS classes with specific
	naming in relation to the window style name. The service will try and display css based on this naming. 
	The css class must be included as part of the current portal skin for the window decorators to be displayed.
	</p><p>The location of the window decorator css classes for the default portal theme is located at:</p><code class="filename">01eXoResources.war/skin/PortletThemes/Stylesheet.css</code><p/><p>Create the CSS file:</p><pre class="programlisting">
/*---- MyTheme ----*/
.MyTheme .WindowBarCenter .WindowPortletInfo {
  margin-right: 80px; /* orientation=lt */
  margin-left: 80px; /* orientation=rt */
}
.MyTheme .WindowBarCenter .ControlIcon {
  float: right;/* orientation=lt */
  float: left;/* orientation=rt */
  width: 24px; 
  height: 17px;
  cursor: pointer;
  background-image: url('background/MyTheme.png');
}
.MyTheme .ArrowDownIcon {
  background-position: center 20px;
}
.MyTheme .OverArrowDownIcon {
  background-position: center 116px;
}
.MyTheme .MinimizedIcon {
  background-position: center 44px;
}
.MyTheme .OverMinimizedIcon {
  background-position: center 140px;
}
.MyTheme .MaximizedIcon {
  background-position: center 68px;
}
.MyTheme .OverMaximizedIcon {
  background-position: center 164px;
}
.MyTheme .RestoreIcon {
  background-position: center 92px;
}
.MyTheme .OverRestoreIcon {
  background-position: center 188px;
}
.MyTheme .NormalIcon {
  background-position: center 92px;
}
.MyTheme .OverNormalIcon {
  background-position: center 188px;
}
.UIPageDesktop .MyTheme .ResizeArea {
  float: right;/* orientation=lt */
  float: left;/* orientation=rt */
  width: 18px; height: 18px;
  cursor: nw-resize;
  background: url('background/ResizeArea18x18.gif') no-repeat left top; /* orientation=lt */
  background: url('background/ResizeArea18x18-rt.gif') no-repeat right top; /* orientation=rt */
}
.MyTheme .Information {
  height: 18px; line-height: 18px;
  vertical-align: middle; font-size: 10px;
  padding-left: 5px;/* orientation=lt */
  padding-right: 5px;/* orientation=rt */
  margin-right: 18px;/* orientation=lt */
  margin-left: 18px;/* orientation=rt */
}
.MyTheme .WindowBarCenter .WindowPortletIcon {
  background-position: left top; /* orientation=lt */
  background-position: right top; /* orientation=rt */
  padding-left: 20px; /* orientation=lt */
  padding-right: 20px; /* orientation=rt */
  height: 16px;
  line-height: 16px;
}
.MyTheme .WindowBarCenter .PortletName {
  font-weight: bold;
  color: #333333;
  overflow: hidden;
  white-space: nowrap;
  width: 100%;
}
.MyTheme .WindowBarLeft {
  padding-left: 12px;
  background-image: url('background/MyTheme.png');
  background-repeat: no-repeat;
  background-position: left -148px;
}
.MyTheme .WindowBarRight {
  padding-right: 11px;
  background-image: url('background/MyTheme.png');
  background-repeat: no-repeat;
  background-position: right -119px;
}
.MyTheme .WindowBarCenter {
  background-image: url('background/MyTheme.png');
  background-repeat: repeat-x;
  background-position: left -90px;
}
.MyTheme .WindowBarCenter .FixHeight {
  height: 21px;
  padding-top: 8px;
}
.MyTheme .MiddleDecoratorLeft {
  padding-left: 12px;
  background: url('background/MyTheme.png') repeat-y left;
}
.MyTheme .MiddleDecoratorRight {
  padding-right: 11px;
  background: url('background/MyTheme.png') repeat-y right;
}
.MyTheme .MiddleDecoratorCenter {
  background: #ffffff;
}
.MyTheme .BottomDecoratorLeft {
  MyTheme: 12px;
  background-image: url('background/MyTheme.png');
  background-repeat: no-repeat;
  background-position: left -60px;
}
.MyTheme .BottomDecoratorRight {
  padding-right: 11px;
  background-image: url('background/MyTheme.png');
  background-repeat: no-repeat;
  background-position: right -30px;
}
.MyTheme .BottomDecoratorCenter {
  background-image: url('background/MyTheme.png');
  background-repeat: repeat-x;
  background-position: left top;
}
.MyTheme .BottomDecoratorCenter .FixHeight {
  height: 30px;
}
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="d0e582"/>3.1.7.2.3. How to Set the Default Window Style</h5></div></div></div>
To set the default window style to be used for a portal, you will to specify the css classes
for a theme called <code class="literal">DefaultTheme</code>.
<div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>You do not need to specify the DefaultTheme in gatein-resources.xml</p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Portlet_Styles"/>3.1.7.3. How to Create New Portlet skins</h4></div></div></div><p>Portlets often require additional styles that may not be defined by
    the portal skin. GateIn 3.2 allows portlets to define additional
    stylesheets for each portlet and will append the corresponding
    <code class="literal">link</code> tags to the <code class="literal">head</code>.</p><p>The link ID will be of the form
    <em class="parameter"><code>{portletAppName}{PortletName}</code></em>. For example:
    <code class="literal">ContentPortlet</code> in <code class="literal">content.war</code>, will
    give
    <em class="parameter"><code>id="content<code class="literal">ContentPortlet"</code></code></em></p><p>To define a new CSS file to include whenever a portlet is available on a portal page, the
    following fragment needs to be added in gatein-resources.xml</p><pre class="programlisting">&lt;portlet-skin&gt;
  &lt;application-name&gt;portletAppName&lt;/application-name&gt;
  &lt;portlet-name&gt;PortletName&lt;/portlet-name&gt;
  &lt;skin-name&gt;Default&lt;/skin-name&gt;
  &lt;css-path&gt;/skin/DefaultStylesheet.css&lt;/css-path&gt;
&lt;/portlet-skin&gt;

&lt;portlet-skin&gt;
  &lt;application-name&gt;portletAppName&lt;/application-name&gt;
  &lt;portlet-name&gt;PortletName&lt;/portlet-name&gt;
  &lt;skin-name&gt;OtherSkin&lt;/skin-name&gt;
  &lt;css-path&gt;/skin/OtherSkinStylesheet.css&lt;/css-path&gt;
&lt;/portlet-skin&gt;</pre><p>This will load the DefaultStylesheet.css when the Default skin is used and the
    OtherSkinStylesheet.css when the OtherSkin is used.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>If the current portal skin is not defined as part of the supported
    skins, then the portlet css class will not be loaded. It is recommended to update
    portlet skins whenever a new portal skin is created.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Tips_and_Tricks-Change_portlet_icons"/>3.1.7.3.1. Change portlet icons</h5></div></div></div><p>Each portlet can be represented by an unique icon that you can see in the
      portlet registry or page editor. This icon can be changed by adding an image to the
      directory of the portlet webapplication:</p><div class="itemizedlist"><ul><li><p><code class="filename">skin/DefaultSkin/portletIcons/<em class="replaceable"><code>icon_name.png</code></em></code>.</p></li></ul></div><p>To be used correctly the icon must be named after the
          portlet.</p><p>For example, the icon for an account portlet named AccountPortlet
      would be located at:</p><div class="itemizedlist"><ul><li><p><code class="filename">skin/DefaultSkin/portletIcons/AccountPortlet.png</code></p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
      You must use <code class="literal">skin/DefaultSkin/portletIcons/</code> for the directory to store the
      portlet icon regardless of what skin is going to be used.
      </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Portlet_Specification_CSS_Classes"/>3.1.7.4. How to create a new Portlet Specification CSS Classes</h4></div></div></div><p>The portlet specification defines a set of default css classes that should be available for portlets.
    These classes are included as part of the portal skin. Please see the portlet specification for a list of the 
    default classes that should be available.</p><p>For the default portal skin, the portlet specification CSS classes are defined in :</p><code class="filename">eXoResources.war/skin/Portlet/Stylesheet.css</code></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Skin_Configuration-Tips_and_Tricks"/>3.1.8. Tips and Tricks</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Tips_and_Tricks-Easier_css_debuggin"/>3.1.8.1. Easier css debugging</h4></div></div></div><p>By default, CSS files are cached and their imports are merged into
      a single CSS file at the server side. This reduces the number of HTTP
      requests from the browser to the server.</p><p>The optimization code is quite simple as all the CSS files are
      parsed at the server startup time and all the @import and url(...)
      references are rewritten to support a single flat file. The result is
      stored in a cache directly used from the
      <code class="literal">ResourceRequestFilter</code>.</p><p>Although the optimization is useful for a production environments,
      it may be easier to deactivate this optimization while debugging
      stylesheets. To do so, set the java system property
      <code class="literal">exo.product.developing</code> to
      <code class="literal">true</code>.</p><p>For example, the property can be passed as a JVM parameter with
      <code class="literal">-D</code> option when running GateIn.</p><pre class="programlisting">sh $JBOSS_HOME/bin/run.sh -Dexo.product.developing=true</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>warning("This option may cause display bugs with certain
          browsers like Internet Explorer")</p></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Tips_and_Tricks-Some_CSS_techniques"/>3.1.8.2. Some CSS techniques</h4></div></div></div><p>It is recommended that users have some experience with CSS before
      studying GateIn 3.2 CSS.</p><p>GateIn 3.2 relies heavily on CSS to create the layout and effects
      for the UI. Some common techniques for customizing GateIn 3.2 CSS are
      explained below.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Some_CSS_techniques-Decorator_pattern"/>3.1.8.2.1. Decorator pattern</h5></div></div></div><p>The decorator is a pattern to create a contour or a curve around
        an area. In order to achieve this effect you need to create 9 cells.
        The BODY is the central area that you want to decorate. The other 8
        cells are distributed around the BODY cell. You can use the width,
        height and background image properties to achieve any decoration
        effect that you want.</p><div class="mediaobject"><img src="images/PortalDevelopment/Skinning/decoratorPattern.png"/></div><pre class="programlisting">
&lt;div class="Parent"&gt;
  &lt;div class="TopLeft"&gt;
    &lt;div class="TopRight"&gt;
      &lt;div class="TopCenter"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="CenterLeft"&gt;
    &lt;div class="CenterRight"&gt;
      &lt;div class="CenterCenter"&gt;BODY&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="BottomLeft"&gt;
    &lt;div class="BottomRight"&gt;
      &lt;div class="BottomCenter"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;div&gt;
&lt;/div&gt;
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Some_CSS_techniques-Left_margin_left_pattern"/>3.1.8.2.2. Left margin left pattern</h5></div></div></div><p>Left margin left pattern is a technique to create 2 blocks side
        by side. The left block will have a fixed size and the right block
        will take the rest of the available space. When the user resizes the
        browser the added or removed space will be taken from the right
        block.</p><div class="mediaobject"><img src="images/PortalDevelopment/Skinning/leftMarginPattern.png"/></div><pre class="programlisting">
&lt;div class="Parent"&gt;
  &lt;div style="float: left; width: 100px"&gt;
  &lt;/div&gt;
  &lt;div style="margin-left: 105px;"&gt;
  &lt;div&gt;
  &lt;div style="clear: left"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
</pre></div></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Portal_Lifecycle"/>3.2. Portal Lifecycle</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Lifecycle-Overview"/>3.2.1. Overview</h3></div></div></div><p>
			This chapter describes the portal lifecycle from the application server start to its stop as well as how requests are handled.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Lifecycle-Application_Server_start_and_stop"/>3.2.2. Application Server start and stop</h3></div></div></div><p>
			A portal instance is simply a web application deployed as a WAR in an application server. Portlets are also part of an enhanced WAR called a portlet application.
		</p><p>
			GateIn 3.2 doesn't require any particular setup for your portlet in most common scenarios and the <code class="filename">web.xml</code> file can remain without any GateIn 3.2 specific configuration.
		</p><p>
			During deployment, GateIn 3.2 will automatically and transparently inject a servlet into the portlet application to be able to interact with it. This feature is dependent on the underlying servlet container but will work out of the box on the proposed bundles.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Lifecycle-The_Command_Servlet"/>3.2.3. The Command Servlet</h3></div></div></div><p>
			The servlet is the main entry point for incoming requests, it also includes some init code when the portal is launched. This servlet (<code class="literal">org.gatein.wci.command.CommandServlet</code>) is automatically added during deployment and mapped to <code class="literal">/tomcatgateinservlet</code>.
		</p><p>
			This is equivalent to adding the following into <code class="filename">web.xml</code>.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
				As the servlet is already configured this example is for information only.
			</p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">TomcatGateInServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.gatein.wci.command.CommandServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">load-on-startup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">0</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">load-on-startup</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">TomcatGateInServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/tomcatgateinservlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			It is possible to filter on the CommandServlet by filtering the URL pattern used by the Servlet mapping.
		</p><p>
			The example below would create a servlet filter that calculates the time of execution of a portlet request.
		</p><p>
			The filter class:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">example</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;java</span><span class="java_separator">.</span><span class="java_plain">io</span><span class="java_separator">.</span><span class="java_type">IOException</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">servlet</span><span class="java_separator">.</span><span class="java_type">FilterChain</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">servlet</span><span class="java_separator">.</span><span class="java_type">FilterConfig</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">servlet</span><span class="java_separator">.</span><span class="java_type">ServletException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">servlet</span><span class="java_separator">.</span><span class="java_type">ServletRequest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">servlet</span><span class="java_separator">.</span><span class="java_type">ServletResponse</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyFilter</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">servlet</span><span class="java_separator">.</span><span class="java_type">Filter</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;doFilter</span><span class="java_separator">(</span><span class="java_type">ServletRequest</span><span class="java_plain">&nbsp;request</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletResponse</span><span class="java_plain">&nbsp;response</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">FilterChain</span><span class="java_plain">&nbsp;chain</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;beforeTime&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">currentTimeMillis</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;chain</span><span class="java_separator">.</span><span class="java_plain">doFilter</span><span class="java_separator">(</span><span class="java_plain">request</span><span class="java_separator">,</span><span class="java_plain">&nbsp;response</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;afterTime&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">currentTimeMillis</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_literal">&quot;Time&nbsp;to&nbsp;execute&nbsp;the&nbsp;portlet&nbsp;request&nbsp;(in&nbsp;ms):&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">afterTime&nbsp;</span><span class="java_operator">-</span><span class="java_plain">&nbsp;beforeTime</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;init</span><span class="java_separator">(</span><span class="java_type">FilterConfig</span><span class="java_plain">&nbsp;config</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;destroy</span><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><p>
			The Java EE web application configuration file (<code class="filename">web.xml</code>) of the portlet on which we want to know the time to serve a portlet request. As mentioned above nothing specific to GateIn 3.2 needs to be included, only the URL pattern to set has to be known.
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web-app</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/j2ee&nbsp;http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2.5&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.example.MyFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MyFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/tomcatgateinservlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">INCLUDE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">web-app</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>INCLUDE dispatcher</h2><p>
					It is important to set <code class="literal">INCLUDE</code> as dispatcher as the portal will always hit the CommandServlet through a request dispatcher. Without this, the filter will not be triggered, unless direct access to a resource (such as an image).
				</p></div><p>
		</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Default_Portal_Configuration"/>3.3. Default Portal Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Default_Portal_Configuration-Overview"/>3.3.1. Overview</h3></div></div></div><p>
			GateIn 3.2 default home page URL is <code class="literal">http://{hostname}:{port}/portal/</code>.
         There may be multiple independent portals deployed in parallel at any given time, each of which has its root
         context (i.e.: <code class="literal">http://{hostname}:{port}/sample-portal/</code>).
         Each portal is internally composed of one or more, what we again call 'portals'. There needs to be at least
         one such portal - the default one is called 'classic'. When accessing GateIn 3.2 default home page URL, you
         are automatically redirected to 'classic' portal.

         The default portal performs another important task. When starting up GateIn 3.2 for the first time, its
         JCR database will be empty (that's where portals keep their runtime-configurable settings).
         It's the default portal that's used to detect this, and to trigger automatic data initialization.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Default_Portal_Configuration-Configuration"/>3.3.2. Configuration</h3></div></div></div><p>
			The following example configuration can be found at: "<code class="filename">02portal.war:/WEB-INF/conf/portal/portal-configuration.xml</code>".
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.UserPortalConfigService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.UserPortalConfigService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">new.portal.config.user.listener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">initListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.NewPortalConfigListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">this&nbsp;listener&nbsp;init&nbsp;the&nbsp;portal&nbsp;configuration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default.portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;default&nbsp;portal&nbsp;for&nbsp;checking&nbsp;db&nbsp;is&nbsp;empty&nbsp;or&nbsp;not</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">classic</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			In this example the <span class="bold"><strong>classic</strong></span> portal has been set as the default.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
         Components, component-plugins, and init-params are explained in Foundations chapter. For now just note how
         <code class="literal">NewPortalConfigListener</code> component-plugin is used to add configuration to
         <code class="literal">UserPortalConfigService</code>, which is designed in this way to allow other components
         to add configuration to it.
         </p></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Portal_Default_Permission_Configuration"/>3.4. Portal Default Permission Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Default_Permission_Configuration-Overview"/>3.4.1. Overview</h3></div></div></div><p>
			The default permission configuration for the portal is defined through <code class="literal">org.exoplatform.portal.config.UserACL</code>
         component configuration in the file <code class="filename">02portal.war:/WEB-INF/conf/portal/portal-configuration.xml</code>.
		</p><p>
			It defines 8 permissions types:
		</p><div class="variablelist"><dl><dt><span class="term">super.user</span></dt><dd><p>
						The super user has all the rights on the platform, this user is referred to as <span class="emphasis"><em>root</em></span>.
					</p></dd><dt><span class="term">portal.administrator.groups</span></dt><dd><p>
						Any member of those groups are considered administrators. Default value is <code class="literal">/platform/administrators</code>.
					</p></dd><dt><span class="term">portal.administrator.mstype</span></dt><dd><p>
						Any user with that membership type would be considered administrator or the associated group. Default value is <code class="literal">manager</code>.
					</p></dd><dt><span class="term">portal.creator.groups</span></dt><dd><p>
						This list defines all groups that will be able to manage the different portals. Members of this group
                  also have the permission to create new portals. The format is <code class="literal">membership:/group/subgroup</code>.
					</p></dd><dt><span class="term">navigation.creator.membership.type</span></dt><dd><p>
						Defines the membership type of group managers. The group managers have the permission to create and edit group pages and they can modify the group navigation.
					</p></dd><dt><span class="term">guests.group</span></dt><dd><p>
						Any anonymous user automatically becomes a member of this group when they enter the public pages.
					</p></dd><dt><span class="term">mandatory.groups</span></dt><dd><p>
						Groups that can't be deleted.
					</p></dd><dt><span class="term">mandatory.mstypes</span></dt><dd><p>
						Membership types that can't be deleted.
					</p></dd></dl></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.UserACL</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.UserACL</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">super.user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">administrator</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal.creator.groups</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">groups&nbsp;with&nbsp;membership&nbsp;type&nbsp;have&nbsp;permission&nbsp;to&nbsp;manage&nbsp;portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators,*:/organization/management/executive-board</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">navigation.creator.membership.type</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">specific&nbsp;membership&nbsp;type&nbsp;have&nbsp;full&nbsp;permission&nbsp;with&nbsp;group&nbsp;navigation</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">manager</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">guests.group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">guests&nbsp;group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/platform/guests</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">access.control.workspace</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">groups&nbsp;with&nbsp;memberships&nbsp;that&nbsp;have&nbsp;the&nbsp;right&nbsp;to&nbsp;access&nbsp;the&nbsp;User&nbsp;Control&nbsp;Workspace</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators,*:/organization/management/executive-board</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Default_Permission_Configuration-Overwrite_Portal_Default_Permissions"/>3.4.2. Overwrite Portal Default Permissions</h3></div></div></div><p>When creating custom portals and portal extensions it's possible to override the default configuration by
      using <code class="literal">org.exoplatform.portal.config.PortalACLPlugin</code>, configuring it as an external-plugin of
      <code class="literal">org.exoplatform.portal.config.UserACL</code> service:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">external-component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">target-component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.UserACL</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">target-component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">addPortalACLPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">addPortalACLPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.PortalACLPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">setting&nbsp;some&nbsp;permission&nbsp;for&nbsp;portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">access.control.workspace.roles</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/organization/management/executive-board</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal.creation.roles</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/organization/management/executive-board</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">external-component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Portal_Navigation_Configuration"/>3.5. Portal Navigation Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Navigation_Configuration-Overview"/>3.5.1. Overview</h3></div></div></div><p>
			There are three navigation types available to portal users:
		</p><div class="itemizedlist"><ul><li><p>
					<a class="xref" href="#sect-Reference_Guide-Portal_Navigation_Configuration-Portal_Navigation" title="3.5.2. Portal Navigation">Section 3.5.2, “Portal Navigation”</a>
				</p></li><li><p>
					<a class="xref" href="#sect-Reference_Guide-Portal_Navigation_Configuration-Group_Navigation" title="3.5.3. Group Navigation">Section 3.5.3, “Group Navigation”</a>
				</p></li><li><p>
					<a class="xref" href="#sect-Reference_Guide-Portal_Navigation_Configuration-User_Navigation" title="3.5.4. User Navigation">Section 3.5.4, “User Navigation”</a>
				</p></li></ul></div><p>
			These navigations are configured using the standard XML syntax in the file; "<code class="filename">02portal.war:/WEB-INF/conf/portal/portal-configuration.xml</code>".
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.UserPortalConfigService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.UserPortalConfigService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">new.portal.config.user.listener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">initListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.config.NewPortalConfigListener</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">this&nbsp;listener&nbsp;init&nbsp;the&nbsp;portal&nbsp;configuration</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default.portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;default&nbsp;portal&nbsp;for&nbsp;checking&nbsp;db&nbsp;is&nbsp;empty&nbsp;or&nbsp;not</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">classic</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">page.templates.location</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">the&nbsp;path&nbsp;to&nbsp;the&nbsp;location&nbsp;that&nbsp;contains&nbsp;Page&nbsp;templates</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/portal/template/pages</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">override</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;flag&nbsp;parameter&nbsp;to&nbsp;decide&nbsp;if&nbsp;portal&nbsp;metadata&nbsp;is&nbsp;overriden&nbsp;on&nbsp;restarting&nbsp;server</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">site.templates.location</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.portal.config.SiteConfigTemplates&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;location&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;portalTemplates&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">basic</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">classic</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;groupTemplates&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userTemplates&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal.configuration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.portal.config.NewPortalConfig&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;predefinedOwner&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">classic</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ownerType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;templateLocation&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/portal/</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;importMode&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">conserve</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">group.configuration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.portal.config.NewPortalConfig&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;predefinedOwner&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/platform/administrators</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/platform/users</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/platform/guests</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/organization/management/executive-board</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ownerType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;templateLocation&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;importMode&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">conserve</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">user.configuration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.portal.config.NewPortalConfig&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;predefinedOwner&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">john</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">mary</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">demo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ownerType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;templateLocation&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;importMode&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">conserve</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
 This XML configuration defines where in the portal's war to look for configuration, and which portals, groups, and user specific views
 to include in <code class="literal">portal/group/user</code> navigation. Those files will be used to create an initial navigation when the portal is launched in the first time.
 That information will then be stored in the JCR content repository, and can then be modified and managed from the portal UI.
 </p><p>
Each portal, groups and users navigation is indicated by a configuration paragraph, for example:

</p><div class="programlistingco"><pre class="programlisting">&lt;object-param&gt;
   &lt;name&gt;portal.configuration&lt;/name&gt;
   &lt;description&gt;description&lt;/description&gt;
   &lt;object type="org.exoplatform.portal.config.NewPortalConfig"&gt;
      &lt;field n<span xmlns="" class="co" id="area-Reference_Guide.Portalconf.predifinedOwner"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>ame="predefinedOwner"&gt;
         &lt;collection type="java.util.HashSet"&gt;
            &lt;value&gt;&lt;string&gt;classic&lt;/string&gt;&lt;/value&gt;
         &lt;/collection&gt;
      &lt;/field&gt;
      &lt;field n<span xmlns="" class="co" id="area-Reference_Guide.Portalconf.ownerType"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>ame="ownerType"&gt;
         &lt;string&gt;portal&lt;/string&gt;
      &lt;/field&gt;
      &lt;field n<span xmlns="" class="co" id="area-Reference_Guide.Portalconf.templateLocation"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>ame="templateLocation"&gt;
         &lt;string&gt;war:/conf/portal/&lt;/string&gt;
      &lt;/field&gt;
      &lt;field n<span xmlns="" class="co" id="area-Reference_Guide.Portalconf.importMode"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span>ame="importMode"&gt;
         &lt;string&gt;conserve&lt;/string&gt;
      &lt;/field&gt;
   &lt;/object&gt;
&lt;/object-param&gt;
</pre></div><p>

</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em> predefinedOwner</em></span> define the navigation owner, portal will look for the configuration files in folder with this name, if there is no suiable folder, a default portal will be created with name is this value.
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em> ownerType</em></span> define the type of portal navigation. It may be a portal, group or user
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em> templateLocation</em></span> the classpath where contains all portal configuration files
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em> importMode</em></span> The mode for navigation import. There are 4 types of import mode:
					</p><div class="itemizedlist"><ul><li><span class="emphasis"><em>conserve</em></span>: Import data when it does not exist, otherwise do nothing.
						</li><li><span class="emphasis"><em>insert</em></span>: Import data when it does not exist, otherwise performs a strategy that adds new data only.
						</li><li><span class="emphasis"><em>merge</em></span>: Import data when it does not exist, update data when it exists.
						</li><li><span class="emphasis"><em>rewrite</em></span>: Overwrite data whatsoever.
						</li></ul></div></td></tr></table></div><p>
		</p><p>	
Base on these parameters, portal will look for the configuration files and create a relevant portal navigation, pages and data import strategy. The portal configuration files will be stored in folders with path look like <code class="literal">{templateLocation}/{ownerType}/{predefinedOwner}</code>, all navigations are defined in the <code class="literal">navigation.xml</code> file, pages are defined in pages.xml and portal configuration is defined in <code class="literal">{ownerType}.xml</code>.
For example, with the above configuration, prtal will look for all configuration files from <code class="literal">war:/conf/portal/portal/classic path.</code>
	</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Navigation_Configuration-Portal_Navigation"/>3.5.2. Portal Navigation</h3></div></div></div><p>
		The portal navigation incorporates the pages that can be accessed even when the user is not logged in assuming the applicable permissions allow the public access). For example, several portal navigations are used when a company owns multiple trademarks, and sets up a website for each of them.
		</p><p>
			The <span class="bold"><strong>classic</strong></span> portal is configured by four XML files in the <code class="filename">02portal.war:/WEB-INF/conf/portal/portal/classic</code> directory:
		</p><div class="variablelist"><dl><dt><span class="term">portal.xml</span></dt><dd><p>
						This file describes the layout and portlets that will be shown on all pages. The layout usually contains the banner, footer, menu and breadcrumbs portlets.
                  GateIn 3.2 is extremely configurable as every view element (even the banner and footer) is a portlet.
					</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portal-config</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_objects_1_0&nbsp;http://www.gatein.org/xml/ns/gatein_objects_1_0&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_objects_1_0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portal-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">classic</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portal-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">en</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entry</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sessionAlive&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">onDemand</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">entry</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entry</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">key</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;showPortletInfo&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">entry</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portal-layout</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">BannerPortlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">preferences</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">template</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">par:/groovy/groovy/webui/component/UIBannerPortlet.gtmpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">preferences</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">NavigationPortlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">BreadcumbsPortlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page-body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page-body</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">FooterPortlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">preferences</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">template</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">par:/groovy/groovy/webui/component/UIFooterPortlet.gtmpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">preferences</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portal-layout</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portal-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
						It is also possible to apply a nested container that can also contain portlets. Row, column or tab containers are then responsible for the layout of their child portlets.
					</p><p>
						Each application references a portlet using the id <code class="literal">portal#{portalName}:/{portletWarName}/{portletName}/{uniqueId}</code>
					</p><p>
						Use the <code class="literal">page-body</code> tag to define where GateIn 3.2 should render the current page.
					</p><p>
						The defined <span class="bold"><strong>classic</strong></span> portal is accessible to "Everyone" (at <code class="literal">/portal/public/classic</code>) but only members of the group <code class="literal">/platform/administrators</code> can edit it.
					</p></dd><dt><span class="term">navigation.xml</span></dt><dd><p>
						This file defines all the navigation nodes of the portal. The syntax is simple using the nested node tags. Each node refers to a page defined in the <code class="literal">pages.xml</code> file (explained next).
					</p><p>
						If the administrator want to create node labels for each language, they will have to use <code class="literal">xml:lang</code> attribute in the label tag with value of <code class="literal">xml:lang</code> is the relevant locale.
					</p><p>
						Otherwise, if they want the node label is localized by resource bundle files, the <code class="literal">#{...}</code> syntax will be used, the enclosed property name serves as a key that is automatically passed to the internationalization mechanism. Thus the literal property name is replaced by a localized value taken from the associated properties file matching the current locale. 
					</p><p>	
						For example:
					</p><p>
					</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">node-navigation</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_objects_1_2&nbsp;http://www.gatein.org/xml/ns/gatein_objects_1_2&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_objects_1_2&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">priority</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">1</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">priority</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page-nodes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">node</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">home</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">label</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xml:lang</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;en&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Home</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page-reference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal::classic::homepage</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page-reference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">node</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">node</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sitemap</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">label</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xml:lang</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;en&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SiteMap</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">visibility</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">DISPLAYED</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">visibility</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page-reference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal::classic::sitemap</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page-reference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">node</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..........</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page-nodes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">node-navigation</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
						This navigation tree can have multiple views inside portlets (such as the breadcrumbs portlet) that render the current view node, the site map or the menu portlets.
					</p></dd><dt><span class="term">pages.xml</span></dt><dd><p>
						This configuration file structure is very similar to <code class="filename">portal.xml</code> and it can also contain container tags.
                  Each application can decide whether to render the portlet border, the window state, the icons or portlet's mode.
					</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page-set</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_objects_1_0&nbsp;http://www.gatein.org/xml/ns/gatein_objects_1_0&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_objects_1_0&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">homepage</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Home&nbsp;Page</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">HomePagePortlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">preferences</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">template</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">system:/templates/groovy/webui/component/UIHomePagePortlet.gtmpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">preferences</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Home&nbsp;Page&nbsp;portlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-application-state</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-application-state</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-application-mode</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-application-mode</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sitemap</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Site&nbsp;Map</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*:/platform/administrators</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">edit-permission</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SiteMapPortlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SiteMap</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">title</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Everyone</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">access-permissions</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">show-info-bar</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;.......</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">page-set</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Navigation_Configuration-Group_Navigation"/>3.5.3. Group Navigation</h3></div></div></div><p>
			Group navigations are dynamically added to the user navigation at login. This allows users to see the menu of all pages assigned to any groups they belong to.
		</p><p>
			The group navigation menu is configured by three XML files (<code class="filename">navigation.xml</code>, <code class="filename">pages.xml</code> and <code class="filename">portlet-preferences.xml</code>). The syntax used in these files is the same as those covered in <a class="xref" href="#sect-Reference_Guide-Portal_Navigation_Configuration-Portal_Navigation" title="3.5.2. Portal Navigation">Section 3.5.2, “Portal Navigation”</a>.
		</p><p>
			They are also located in the <code class="filename">{templateLocation}/{ownerType}/{predefinedOwner}</code> directory with <code class="literal">ownerType</code> is <code class="literal">group</code> and <code class="literal">predefinedOwner</code> is the path to the group. For example, <code class="filename">portal.war/WEB-INF/conf/portal/group/platform/administrators/</code>.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portal_Navigation_Configuration-User_Navigation"/>3.5.4. User Navigation</h3></div></div></div><p>
			User navigation is the set of nodes and pages that are owned by the user. They are part of the user's dashboard.
		</p><p>
			Three files configure the user navigation (<code class="filename">navigation.xml</code>, <code class="filename">pages.xml</code> and <code class="filename">portlet-preferences.xml</code>). They are located in the <code class="filename">{templateLocation}/{ownerType}/{predefinedOwner}</code> directory with <code class="literal">ownerType</code> is <code class="literal">user</code> and <code class="literal">predefinedOwner</code> is username that want to create the navigation. For example, if administrator want to create navigation for user <code class="literal">root</code>, he has to locate the configuration files in <code class="filename">portal.war/WEB-INF/conf/portal/user/root </code>
		</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Internationalization_Configuration"/>3.6. Internationalization Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Internationalization_Configuration-Overview"/>3.6.1. Overview</h3></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Assumed Knowledge</h2><p>
				GateIn 3.2 is fully configurable for internationalization, however users should have a general knowledge of Internationalization in Java products before attempting these configurations.
			</p><p>
				Sun Java hosts a comprehensive guide to internationalizing java products at <a class="ulink" href="http://java.sun.com/docs/books/tutorial/i18n/TOC.html">http://java.sun.com/docs/books/tutorial/i18n/TOC.html</a>.
			</p></div><p>
			All GateIn 3.2 applications contain property files for various languages. They are packaged with the portlets applications in a <code class="filename">WEB-INF/classes/locale/</code> directory.
		</p><p>
			These files are located in the <code class="literal">classes</code> folder of the WEB-INF directory, so as to be loaded by the ClassLoader.
		</p><p>
			All resource files are in a subfolder named <code class="literal">locale</code>.
		</p><p>
			For instance; the translations for the <span class="emphasis"><em>NavigationPortlet</em></span> are located in <code class="literal">web.war/WEB-INF/classes/locale/portlet/portal</code>
		</p><pre class="programlisting">NavigationPortlet_de.properties
NavigationPortlet_en.properties
NavigationPortlet_es.properties
NavigationPortlet_fr.properties
NavigationPortlet_nl.properties
NavigationPortlet_ru.properties
NavigationPortlet_uk.properties
NavigationPortlet_ar.xml
</pre><p>
			Inside those file are typical <code class="literal">key=value</code> Java EE properties. For example the French one:
		</p><pre class="programlisting">javax.portlet.title=Portlet Navigation
</pre><p>
			There are also properties files in the portal itself. They form the <span class="bold"><strong>portal resource bundle</strong></span>.
		</p><p>
			From a portlet you can then access translations from the portlet itself or shared at the portal level, both are aggregated when you need them.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Translation in XML format</h2><p>
				It is also possible to use a proprietary XML format to define translations. This is a more convenient way to translate a document for some languages such as Japanese, Arabic or Russian. Property files have te be ASCII encoded, while the XML file can define its encoding. As a result it's easier for a human being to read (and fix) a translation in XML instead of having to decode and encode the property file.
			</p><p>
				For more information refer to: <a class="xref" href="#sect-Reference_Guide-XML_Resources_Bundles" title="3.9. XML Resources Bundles">Section 3.9, “XML Resources Bundles”</a>
			</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Internationalization_Configuration-Locales_configuration"/>3.6.2. Locales configuration</h3></div></div></div><p>
			Various languages are available in the portal package. The configuration below will define which languages are shown in the "Change Language" section and made available to users.
		</p><p>
			The <code class="filename">02portal.war:/WEB-INF/conf/common/common-configuration.xml</code> file of your installation contains the following section:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.resources.LocaleConfigService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.resources.impl.LocaleConfigServiceImpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">locale.config.file</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/common/locales-config.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			This configuration points to the locale configuration file.
		</p><p>
			The locale configuration file (<code class="filename">02portal.war:/WEB-INF/conf/common/locales-config.xml</code>) contains the following code:
		</p><div class="programlistingco"><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;locales-config&gt;
  &lt;locale-config&gt;
    &lt;locale&gt;en<span xmlns="" class="co" id="area-Reference_Guide-i18n.locales.configuration.locale"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>&lt;/locale&gt;
    &lt;output-en<span xmlns="" class="co" id="area-Reference_Guide-i18n.locales.configuration.output-encoding"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>coding&gt;UTF-8&lt;/output-encoding&gt;
    &lt;input-enc<span xmlns="" class="co" id="area-Reference_Guide-i18n.locales.configuration.input-encoding"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>oding&gt;UTF-8&lt;/input-encoding&gt;
    &lt;descripti<span xmlns="" class="co" id="area-Reference_Guide-i18n.locales.configuration.description"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span>on&gt;Default configuration for english locale&lt;/description&gt;
  &lt;/locale-config&gt;
 
  &lt;locale-config&gt;
    &lt;locale&gt;fr&lt;/locale&gt;
    &lt;output-encoding&gt;UTF-8&lt;/output-encoding&gt;
    &lt;input-encoding&gt;UTF-8&lt;/input-encoding&gt;
    &lt;description&gt;Default configuration for the french locale&lt;/description&gt;
  &lt;/locale-config&gt;
 
  &lt;locale-config&gt;
    &lt;locale&gt;ar&lt;/locale&gt;
    &lt;output-encoding&gt;UTF-8&lt;/output-encoding&gt;
    &lt;input-encoding&gt;UTF-8&lt;/input-encoding&gt;
    &lt;description&gt;Default configuration for the arabic locale&lt;/description&gt;
    &lt;orientati<span xmlns="" class="co" id="area-Reference_Guide-i18n.locales.configuration.orientation"><img src="images/gatein/docbook/callouts/5.png" alt="(5)"/></span>on&gt;rt&lt;/orientation&gt;
  &lt;/locale-config&gt;
&lt;/locales-config&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>locale</em></span> The locale has to be defined such as defined here <a class="ulink" href="http://ftp.ics.uci.edu-pub-ietf-http-related-iso639.txt">http://ftp.ics.uci.edu-pub-ietf-http-related-iso639.txt</a>. In this example "<span class="emphasis"><em>ar</em></span>" is Arabic.
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>output-encoding</em></span> deals with character encoding. It is recommended that <span class="bold"><strong>UTF-8</strong></span> be used.
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>input-encoding</em></span> In the java implementation, the encoding parameters will be used for the request response stream. The input-encoding parameter will be used for request setCharacterEncoding(..).
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>description</em></span> Description for the language
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/5.png" alt="5" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>orientation</em></span> The default orientation of text and images is Left-To-Right. GateIn 3.2 supports <span class="bold"><strong>Right-To-Left</strong></span> orientation. Modifying text orientation is explained in <a class="xref" href="#sect-Reference_Guide-RTL_Right_To_Left_Framework" title="3.8. RTL (Right To Left) Framework">Section 3.8, “RTL (Right To Left) Framework”</a>.
					</p></td></tr></table></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Internationalization_Configuration-ResourceBundleService"/>3.6.3. ResourceBundleService</h3></div></div></div><p>
			The resource bundle service is configured in: <code class="filename">02portal.war:/WEB-INF/conf/common/common-configuration.xml</code>:
		</p><div class="programlistingco"><pre class="programlisting">&lt;component&gt;
  &lt;key&gt;org.exoplatform.services.resources.ResourceBundleService&lt;/key&gt;
  &lt;type&gt;org.exoplatform.services.resources.impl.SimpleResourceBundleService&lt;/type&gt;
  &lt;init-params&gt;
    &lt;values-param&gt;
      &lt;name&gt;cl<span xmlns="" class="co" id="area-Reference_Guide-i18n.rb.service.classpath_resources"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>asspath.resources&lt;/name&gt;
      &lt;description&gt;The resources  that start with the following package name should be load from file system&lt;/description&gt;
      &lt;value&gt;locale.portlet&lt;/value&gt;      
    &lt;/values-param&gt;      
    &lt;values-param&gt;
      &lt;name&gt;in<span xmlns="" class="co" id="area-Reference_Guide-i18n.rb.service.init_resources"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>it.resources&lt;/name&gt;
      &lt;description&gt;Initiate the following resources during the first launch&lt;/description&gt;
      &lt;value&gt;locale.portal.expression&lt;/value&gt;
      &lt;value&gt;locale.portal.services&lt;/value&gt;
      &lt;value&gt;locale.portal.webui&lt;/value&gt;
      &lt;value&gt;locale.portal.custom&lt;/value&gt;
      &lt;value&gt;locale.navigation.portal.classic&lt;/value&gt;
      &lt;value&gt;locale.navigation.group.platform.administrators&lt;/value&gt;
      &lt;value&gt;locale.navigation.group.platform.users&lt;/value&gt;
      &lt;value&gt;locale.navigation.group.platform.guests&lt;/value&gt;
      &lt;value&gt;locale.navigation.group.organization.management.executive-board&lt;/value&gt;               
    &lt;/values-param&gt;      
    &lt;values-param&gt;
      &lt;name&gt;po<span xmlns="" class="co" id="area-Reference_Guide-i18n.rb.service.portal_resource_names"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>rtal.resource.names&lt;/name&gt;
      &lt;description&gt;The properties files of  the portal ,  those file will be merged 
        into one ResoruceBundle properties &lt;/description&gt;
      &lt;value&gt;locale.portal.expression&lt;/value&gt;
      &lt;value&gt;locale.portal.services&lt;/value&gt;
      &lt;value&gt;locale.portal.webui&lt;/value&gt;
      &lt;value&gt;locale.portal.custom&lt;/value&gt;        
    &lt;/values-param&gt;      
  &lt;/init-params&gt;
&lt;/component&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>classpath.resources</em></span> are discussed in a later section.
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>init.resources</em></span> TODO
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
						<span class="emphasis"><em>portal.resource.names</em></span> Defines all resources that belong to the <span class="emphasis"><em>Portal Resource Bundle</em></span>.
					</p><p>
						These resources are merged to a single resource bundle which is accessible from anywhere in GateIn 3.2. All these keys are located in the same bundle, which is separated from the navigation resource bundles.
					</p></td></tr></table></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Internationalization_Configuration-Navigation_Resource_Bundles"/>3.6.4. Navigation Resource Bundles</h3></div></div></div><p>
			There is a resource bundle for each navigation. A navigation can exist for user, groups, and portal.
		</p><p>
			The previous example shows bundle definitions for the navigation of the classic portal and of four different groups. Each of these resource bundles occupies a different sphere, they are independent of each other and they are not included in the <em class="parameter"><code>portal.resource.names</code></em> parameter.
		</p><p>
			The properties for a group must be in the <code class="filename">WEB-INF/classes/locale/navigation/group/</code> folder. <code class="literal">/WEB-INF/classes/locale/navigation/group/organization/management/executive-board_en.properties</code>, for example.
		</p><p>
			The folder and file names must correspond to the group hierarchy. The group name "<em class="parameter"><code>executive-board</code></em>" is followed by the iso 639 code.
		</p><p>
			For each language defined in <em class="parameter"><code>LocalesConfig</code></em> must have a resource file defined. If the name of a group is changed the name of the folder and/or files of the correspondent navigation resource bundles must also be changed.
		</p><p>
			Content of <code class="filename">executive-board_en.properties</code>: 
</p><pre class="programlisting">organization.title=Organization
organization.newstaff=New Staff
organization.management=Management
</pre><p>
		</p><p>
			This resource bundle is only accessible for the navigation of the <em class="parameter"><code>organization.management.executive-board</code></em> group.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Internationalization_Configuration-_Portlets_"/>3.6.5.  Portlets </h3></div></div></div><p>
			Portlets are independent applications and deliver their own resource files.
		</p><p>
			All shipped portlet resources are located in the <span class="bold"><strong>locale/portlet</strong></span> subfolder. The ResourceBundleService parameter <span class="bold"><strong>classpath.resources</strong></span> defines this subfolder. 
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="proc-Reference_Guide-_Portlets_-Example"/><p class="title"><b>Procedure 3.1. Example</b></p><ol class="1"><li><p>
					To add a Spanish translation to the <em class="parameter"><code>GadgetPortlet</code></em>.
				</p></li><li><p>
					Create the file <code class="literal">GadgetPortlet_es.properties</code> in: <code class="filename">WEB-INF/classes/locale/portlet/gadget/GadgetPortlet</code>.
				</p></li><li><p>
					In <code class="filename">portlet.xml</code>, add <em class="parameter"><code>Spanish</code></em> as a <span class="bold"><strong>supported-locale</strong></span> ('es' is the 2 letters code for Spanish), the <span class="bold"><strong>resource-bundle</strong></span> is already declared and is the same for all languages :
				</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">supported-locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">en</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">supported-locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">supported-locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">es</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">supported-locale</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-bundle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">locale.portlet.gadget.GadgetPortlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-bundle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li></ol></div><p>
			See the portlet specification for more details about portlet internationalization.
		</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-_Portlets_-Standard_portlet_resource_keys"/>3.6.5.1. Standard portlet resource keys</h4></div></div></div><p>
				The portlet specifications defines three standard keys: Title, Short Title and Keywords. Keywords is formatted as a comma-separated list of tags.
			</p><pre class="programlisting"> javax.portlet.title=Breadcrumbs Portlet
 javax.portlet.short-title=Breadcrumbs
 javax.portlet.keywords=Breadcrumbs, Breadcrumb
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-_Portlets_-Debugging_resource_bundle_usage"/>3.6.5.2. Debugging resource bundle usage</h4></div></div></div><p>
				When translating an application it can sometimes be difficult to find the right key for a given property.
			</p><p>
				Execute the portal in <span class="bold"><strong>debug mode</strong></span> and select, from the available languages, select the special language; <span class="bold"><strong>Magic locale</strong></span>.
			</p><p>
				This feature translates a key to the same key value.
			</p><p>
				For example, the translated value for the key "<em class="parameter"><code>organization.title</code></em>" is simply the value "<em class="parameter"><code>organization.title</code></em>". Selecting that language allows use of the portal and its applications with all the keys visible. This makes it easier to find out the correct key for a given label in the portal page.
			</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1478"/>3.6.6. Translating the language selection form</h3></div></div></div><div class="mediaobject" align="center"><img src="images/PortalDevelopment/InternationalizationConfiguration/LanguageChoice.png" align="middle"/></div><p>When choosing a language as on the screenshot above, the user is presented with a list of languages on the left side in the current chosen language
        and on the right side, the same language translated into its own language. 
        Those texts are obtained from the JDK API <code class="literal">java.util.Locale.getDisplayedLanguage()</code> and <code class="literal">java.util.Locale.getDisplayedCountry()</code> (if needed) and all languages may not be translated and can also depend on the JVM currently used.
        It is still possible to override those values by editing the <code class="literal">locale.portal.webui</code> resource bundle, to do so edit the file <code class="filename">gatein.ear/02portal.war/WEB-INF/classes/locale/portal/webui_xx_yy.properties</code> where <code class="literal">xx_yy</code>
        represents the country code of the language in which you want to translate a particular language.
        In that file, add or modify a key such as <code class="literal">Locale.xx_yy</code> with the value being the translated string.
        </p><div class="example"><a id="d0e1504"/><p class="title"><b>Example 3.1. Changing the displayed text for Traditional Chinese in French</b></p><div class="example-contents"><p>First edit <code class="filename">gatein.ear/02portal.war/WEB-INF/classes/locale/portal/webui_fr.properties</code> where <code class="literal">ne</code> is the country code for French, and add
           the following key into it:
           </p><pre class="programlisting">
              Locale.zh_TW=Chinois traditionnel
           </pre><p>
           After a restart the language will be updated in the user interface when a user is trying to change the current language.
           </p></div></div><br class="example-break"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy"/>3.7. Pluggable Locale Policy</h2></div></div></div><p>Every request processed by every portlet is invoked within a context of current <code class="literal">Locale</code>.
      Current <code class="literal">Locale</code> can be retrieved by calling <code class="literal">getLocale()</code> method of
      <code class="literal">javax.portlet.PortletRequest</code> interface.
   </p><p>The exact algorithm for determining the current <code class="literal">Locale</code> is not specified by Portlet Specification,
      and is left to portlet containers to implement the way they deem most appropriate.
   </p><p>In GateIn 3.2 each portal instance has a default language which can be used to present content for new users.
      Another option is to use each user’s browser language preference, provided it matches one of the available
      localizations that GateIn 3.2 supports, and only fallback to portal default language if no match is found.
      Every user, while visiting a portal, has an option to change the language of the user interface by using a Language chooser.
      The choice can be remembered for the duration of the session, or it can be remembered for a longer period using a browser cookie,
      or - for registered and logged-in users - it can be saved into user’s profile.
   </p><p>So, we can see that there is more than one way to determine the <code class="literal">Locale</code> to be used for displaying a portal page
      to the user. For this reason the mechanism for determining the current <code class="literal">Locale</code> of the request
      is pluggable in GateIn 3.2, so the exact algorithm can be customized.
   </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Locale_Policy_API"/>3.7.1. LocalePolicy API</h3></div></div></div><p>Customization is achieved by using LocalePolicy API, which is a simple API consisting of one interface,
            and one class:
         </p><div class="itemizedlist"><ul><li><p><code class="literal">org.exoplatform.services.resources.LocalePolicy</code> interface</p></li><li><p><code class="literal">org.exoplatform.services.resources.LocaleContextInfo</code> class</p></li></ul></div><p><code class="literal">LocalePolicy</code> interface defines a single method that’s invoked on the installed
            <code class="literal">LocalePolicy</code> service implementation:
         </p><pre class="programlisting">public interface LocalePolicy
{
   public Locale determineLocale(LocaleContextInfo localeContext);
}
         </pre><p><code class="literal">Locale</code> returned by determineLocale() method is the <code class="literal">Locale</code>
            that will be returned to portlets when they call <code class="literal">javax.portlet.PortletRequest.getLocale()</code> method.
         </p><p>The returned <code class="literal">Locale</code> has to be one of the locales supported by portal,
            otherwise it will fallback to portal-default <code class="literal">Locale</code>.
         </p><p>The supported locales are listed in <code class="filename">gatein.ear/02portal.war/WEB-INF/conf/common/locales-config.xml</code> file
            as described in <a class="xref" href="#sect-Reference_Guide-Internationalization_Configuration-Locales_configuration" title="3.6.2. Locales configuration">Section 3.6.2, “Locales configuration”</a> .
         </p><p>The <code class="literal">determineLocale()</code> method takes a parameter of type <code class="literal">LocaleContextInfo</code>,
            which represents a compilation of preferred locales from different sources - user’s profile, portal default,
            browser language settings, current session, browser cookie … All these different sources of <code class="literal">Locale</code>
            configuration or preference are used as input to <code class="literal">LocalePolicy</code> implementation
            that decides which <code class="literal">Locale</code> should be used.
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Default_LocalePolicy"/>3.7.2. Default <code class="literal">LocalePolicy</code></h3></div></div></div><p>By default, <code class="literal">org.exoplatform.portal.application.localization.DefaultLocalePolicyService</code> - an implementation
               of <code class="literal">LocalePolicy</code> - is installed to provide the default behaviour.
               This, however, can easily be extended and overriden. A completely new implementation can also be written from scratch.
         </p><p><code class="literal">DefaultLocalePolicyService</code> treats logged-in users slightly differently than anonymous users.
            Logged-in users have a profile that can contain language preference, while anonymous users don't.
         </p><p>Here is an algorithm used for anonymous users.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e1636"/><p class="title"><b>Procedure 3.2. An algorithm for anonymous users</b></p><ol class="1"><li><p>
                  Iterate over <code class="literal">LocaleContextInfo</code> properties in the following order:
               </p><div class="itemizedlist"><ul><li><p><code class="literal">cookieLocales</code></p></li><li><p><code class="literal">sessionLocale</code></p></li><li><p><code class="literal">browserLocales</code></p></li><li><p><code class="literal">portalLocale</code></p></li></ul></div></li><li><p>Get each property's value - if it's a collection, get the first value.
               </p></li><li><p>If value is one of the supported locales return it as a result.
               </p></li><li><p>If value is not in the supported locales set, try to remove country information,
                  and check if a language matching locale is in the list of supported locales.
                  If so, return it as a result.
               </p></li><li><p>Otherwise, continue with the next property.
               </p></li></ol></div><p>If no supported locale is found the return locale eventually defaults to <code class="literal">portalLocale</code>.
         </p><p>The algorithm for logged-in users is virtually the same except that the first <code class="literal">Locale</code>
            source checked is user's profile.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e1684"/><p class="title"><b>Procedure 3.3. An algorithm for logged-in users</b></p><ol class="1"><li><p>
                  Iterate over <code class="literal">LocaleContextInfo</code> properties in the following order:
               </p><div class="itemizedlist"><ul><li><p><code class="literal">userProfile</code></p></li><li><p><code class="literal">cookieLocales</code></p></li><li><p><code class="literal">sessionLocale</code></p></li><li><p><code class="literal">browserLocales</code></p></li><li><p><code class="literal">portalLocale</code></p></li></ul></div></li><li><p>The rest is the same as for anonymous users ...</p></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Custom_LocalePolicy"/>3.7.3. Custom <code class="literal">LocalePolicy</code></h3></div></div></div><p>The easiest way to customize the <code class="literal">LocalePolicy</code> is to extend <code class="literal">DefaultLocalePolicyService</code>.
            The study of its source code will be required. There is ample JavaDoc that provides thorough information.
            Most customizations will involve simply overriding one or more of its protected methods.
         </p><p>
            An example of a customization is an already provided <code class="literal">NoBrowserLocalePolicyService</code>.
            By overriding just one method, it skips any use of browser language preference.
         </p><pre class="programlisting">public class NoBrowserLocalePolicyService extends DefaultLocalePolicyService
{
   /**
    * Override super method with no-op.
    *
    * @param context locale context info available to implementations in order to determine appropriate Locale
    * @return null
    */
   @Override
   protected Locale getLocaleConfigFromBrowser(LocaleContextInfo context)
   {
      return null;
   }
}
         </pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Configuration"/>3.7.4. LocalePolicy Configuration</h3></div></div></div><p>The <code class="literal">LocalePolicy</code> framework is enabled for portlets by configuring LocalizationLifecycle class in portal's webui configuration file:
         <code class="filename">gatein.ear/02portal.war/WEB-INF/webui-configuration.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-lifecycle-listeners</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.application.localization.LocalizationLifecycle</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-lifecycle-listeners</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>The default <code class="literal">LocalePolicy</code> implementation is installed as GateIn Kernel portal service via
            <code class="filename">gatein.ear/lib/exo.portal.webui.portal-VERSION.jar/conf/portal/configuration.xml</code>.
         </p><p>The following fragment is responsible for installing the service:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.resources.LocalePolicy</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.application.localization.DefaultLocalePolicyService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>Besides implementing <code class="literal">LocalePolicy</code>, the service class also needs to implement
            <code class="literal">org.picocontainer.Startable</code> interface in order to get installed.
         </p><p>This configuration file should not be changed. The configuration in it can be overriden by placing it into portal's .war file:
            <code class="filename">gatein.ear/02portal.war/WEB-INF/conf/configuration.xml</code> (usually as another file included into this one).
         </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Localization_Configuration-Pluggable_Locale_Policy-Non_bridged"/>3.7.5. Keeping non-bridged resources in sync with current Locale</h3></div></div></div><p>In portals all the resources that are not portlets themselves but are accessed through portlets - reading
            data through <code class="literal">PortletRequest</code>, and writing to <code class="literal">PortletResponse</code> - are
            referred to as 'bridged'. Any resources that are accessed directly, bypassing portal filters and servlets,
            are referred to as 'non-bridged'.
         </p><p>Non-bridged servlets, and .jsps have no access to <code class="literal">PortalRequest</code>. They don't use
            <code class="literal">PortletRequest.getLocale()</code> to determine current <code class="literal">Locale</code>.
            Instead, they use <code class="literal">ServletRequest.getLocale()</code> which is subject to precise semantics
            defined by Servlet specification - it reflects browser's language preference.
         </p><p>In other words, non-bridged resources don't have a notion of current <code class="literal">Locale</code>
            in the same sense that portlets do. The result is that when mixing portlets and non-bridged resources there
            may be a localization mismatch - an inconsistency in the language used by different resources composing your portal
            page.
         </p><p>This problem is addressed by <code class="literal">LocalizationFilter</code>. This is a filter that changes the behaviour
            of <code class="literal">ServletRequest.getLocale()</code> method so that it behaves the same way as
            <code class="literal">PortletRequest.getLocale()</code>. That way even localization of servlets, and .jsps
            accessed in a non-bridged manner can stay in sync with portlet localization.
         </p><p><code class="literal">LocalizationFilter</code> is installed through portal's web.xml file: <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">LocalizationFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.application.localization.LocalizationFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">LocalizationFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">*.jsp</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">url-pattern</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">INCLUDE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">FORWARD</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">REQUEST</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">ERROR</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dispatcher</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>There is a tiny limitation with this mechanism in that it is unable to determine the current portal,
            and consequently its default language. As a result the portalLocale defaults to <code class="literal">English</code>, but can be configured
            to something else by using filter's <code class="literal">PortalLocale</code> init param. For example:
         </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">LocalizationFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.application.localization.LocalizationFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PortalLocale</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">fr_FR</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>By default, <code class="literal">LocalizationFilter</code> is applied to *.jsp, which is considered the minimum
            required by GateIn 3.2 to properly keep its non-bridged resources in sync with the rest of the portal.
            Additionally deployed portlets, and portal applications, may need broader mapping to cover their non-bridged
            resources.
         </p><p>Avoid using <code class="literal">/*</code>, <code class="literal">/public/*</code>, <code class="literal">/private/*</code>,
            and similar broad mappings as <code class="literal">LocalizationFilter</code> sometimes adversely interacts with the
            processing of portlet requests. Use multiple filter-mappings instead to specifically target non-bridged resources.
         </p><p>Keeping the mapping limited to only non-bridged resources will minimize any impact on performance as well.
         </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-RTL_Right_To_Left_Framework"/>3.8. RTL (Right To Left) Framework</h2></div></div></div><p>
		The text orientation depends on the current locale setting. The orientation is a Java 5 enum that provides a set of functionalities:
	</p><pre class="programlisting">
   LT, // Western Europe
   RT, // Middle East (Arabic, Hebrew)
   TL, // Japanese, Chinese, Korean
   TR; // Mongolian
   public boolean isLT() { ... }
   public boolean isRT() { ... }
   public boolean isTL() { ... }
   public boolean isTR() { ... }
</pre><p>
		The object defining the Orientation for the current request is the <code class="literal">UIPortalApplication</code>. However it should be accessed at runtime using the <code class="literal">RequestContext</code> that delegates to the <code class="literal">UIPortalApplication</code>.
	</p><p>
		In the case of a <code class="literal">PortalRequestContext</code> it is a direct delegate as the <code class="literal">PortalRequestContext</code> has a reference to the current <code class="literal">UIPortalApplication</code>.
	</p><p>
		In the case of a different context such as the <code class="literal">PortletRequestContext</code>, it delegates to the parent context given the fact that the root <code class="literal">RequestContext</code> is always a <code class="literal">PortalRequestContext</code>.
	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-RTL_Right_To_Left_Framework-Groovy_templates"/>3.8.1. Groovy templates</h3></div></div></div><p>
			Orientation is defined by implicit variables in the groovy binding context:
		</p><div class="variablelist"><dl><dt><span class="term">Orientation</span></dt><dd><p>
						The current orientation as an Orientation
					</p></dd><dt><span class="term">isLT</span></dt><dd><p>
						The value of orientation.isLT()
					</p></dd><dt><span class="term">isRT</span></dt><dd><p>
						The value of orientation.isRT()
					</p></dd><dt><span class="term">dir</span></dt><dd><p>
						The string 'ltr' if the orientation is LT or the string 'rtl' if the orientation is RT.
					</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-RTL_Right_To_Left_Framework-Stylesheet"/>3.8.2. Stylesheet</h3></div></div></div><p>
			The skin service handles stylesheet rewriting to accommodate the orientation. It works by appending -lt or -rt to the stylesheet name.
		</p><p>
			For instance: <code class="filename">/web/skin/portal/webui/component/UIFooterPortlet/DefaultStylesheet-rt.css</code> will return the same stylesheet as <code class="filename">/web/skin/portal/webui/component/UIFooterPortlet/DefaultStylesheet.css</code> but processed for the RT orientation. The <em class="parameter"><code>-lt</code></em> suffix is optional.
		</p><p>
			Stylesheet authors can annotate their stylesheet to create content that depends on the orientation.
		</p><p class="formalpara"><a id="form-Reference_Guide-Stylesheet-Example_1"/></p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Example 1</h5><p class="formalpara">
				In the example we need to use the orientation to modify the float attribute that will make the horizontal tabs either float on left or on right: 
</p><pre class="programlisting">
float: left; /* orientation=lt */
float: right; /* orientation=rt */
font-weight: bold;
text-align: center;
white-space: nowrap;
</pre><p class="formalpara">
				 The LT produced output will be: 
</p><pre class="programlisting">
float: left; /* orientation=lt */
font-weight: bold;
text-align: center;
white-space: nowrap;
</pre><p class="formalpara">
				 The RT produced output will be: 
</p><pre class="programlisting"> 
float: right; /* orientation=rt */
font-weight: bold;
text-align: center;
white-space: nowrap;
</pre><p class="formalpara">
			</p><p class="formalpara"><a id="form-Reference_Guide-Stylesheet-Example_2"/></p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Example 2</h5><p class="formalpara">
				In this example we need to modify the padding according to the orientation: 
</p><pre class="programlisting">
color: white;
line-height: 24px;
padding: 0px 5px 0px 0px; /* orientation=lt */
padding: 0px 0px 0px 5px; /* &gt;orientation=rt */
</pre><p class="formalpara">
				 The LT produced output will be: 
</p><pre class="programlisting"> 
color: white;
line-height: 24px;
padding: 0px 5px 0px 0px; /* orientation=lt */
</pre><p class="formalpara">
				 The RT produced output will be: 
</p><pre class="programlisting"> 
color: white;
line-height: 24px;
padding: 0px 0px 0px 5px; /* orientation=rt */
</pre><p class="formalpara">
			</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-RTL_Right_To_Left_Framework-Images"/>3.8.3. Images</h3></div></div></div><p>
			Sometimes it is necessary to create an RT version of an image that will be used from a template or from a stylesheet. However symmetric images can be automatically generated avoiding the necessity to create a mirrored version of an image and furthermore avoiding maintenance cost.
		</p><p>
			The web resource filter uses the same naming pattern as the skin service. When an image ends with the -rt suffix the portal will attempt to locate the original image and create a mirror of it.
		</p><p>
			For instance: requesting the image <code class="filename">/GateInResources/skin/DefaultSkin/webui/component/UITabSystem/UITabs/background/NormalTabStyle-rt.gif</code> returns a mirror of the image <code class="filename">/GateInResources/skin/DefaultSkin/webui/component/UITabSystem/UITabs/background/NormalTabStyle.gif</code>.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
				It is important to consider whether the image to be mirrored is symmetrical as this will impact it's final appearance.
			</p></div><p>
			Here is an example combining stylesheet and images:
		</p><pre class="programlisting">
line-height: 24px; 
background: url('background/NavigationTab.gif') no-repeat right top; /* orientation=lt */
background: url('background/NavigationTab-rt.gif') no-repeat left top; /* orientation=rt */
padding-right: 2px; /* orientation=lt */
padding-left: 2px; /* orientation=rt */
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-RTL_Right_To_Left_Framework-Client_side_JavaScript"/>3.8.4. Client side JavaScript</h3></div></div></div><p>
			The <code class="literal">eXo.core.I18n</code> object provides the following parameters for orientation:
		</p><div class="variablelist"><dl><dt><span class="term">getOrientation()</span></dt><dd><p>
						Returns either the string lt or rt
					</p></dd><dt><span class="term">getDir()</span></dt><dd><p>
						Returns either the string ltr or rtl
					</p></dd><dt><span class="term">isLT()</span></dt><dd><p>
						Returns true for LT
					</p></dd><dt><span class="term">isRT()</span></dt><dd><p>
						Returns true of RT
					</p></dd></dl></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-XML_Resources_Bundles"/>3.9. XML Resources Bundles</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-XML_Resources_Bundles-Motivation"/>3.9.1. Motivation</h3></div></div></div><p>
			Resource bundles are usually stored in property files. However, as property files are plain files, issues with the encoding of the file may arise. The XML resource bundle format has been developed to provide an alternative to property files.
		</p><div class="itemizedlist"><ul><li><p>
					The XML format declares the encoding of the file. This avoids use of the native2ascii program which can interfere with encoding.
				</p></li><li><p>
					Property files generally use ISO 8859-1 character encoding which does not cover the full unicode charset. As a result, languages such as Arabic would not be natively supported.
				</p></li><li><p>
					Tooling for XML files is better supported than the tooling for Java property files and thus the XML editor copes well with the file encoding.
				</p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-XML_Resources_Bundles-XML_format"/>3.9.2. XML format</h3></div></div></div><p>
			The XML format is very simple and has been developed based on the <span class="emphasis"><em>DRY</em></span> (Don't Repeat Yourself) principle. Usually resource bundle keys are hierarchically defined and we can leverage the hierarchic nature of the XML for that purpose. Here is an example of turning a property file into an XML resource bundle file:
		</p><pre class="programlisting">UIAccountForm.tab.label.AccountInputSet = ...
UIAccountForm.tab.label.UIUserProfileInputSet = ...
UIAccountForm.label.Profile = ...
UIAccountForm.label.HomeInfo= ...
UIAccountForm.label.BusinessInfo= ...
UIAccountForm.label.password= ...
UIAccountForm.label.Confirmpassword= ...
UIAccountForm.label.email= ...
UIAccountForm.action.Reset= ...
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bundle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">UIAccountForm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">tab</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">AccountInputSet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">AccountInputSet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">UIUserProfileInputSet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">UIUserProfileInputSet</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">tab</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">Profile</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">Profile</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">HomeInfo</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">HomeInfo</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">BusinessInfo</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">BusinessInfo</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">password</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">password</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">Confirmpassword</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">Confirmpassword</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">email</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">email</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">label</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">action</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">Reset</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">...</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">Reset</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">action</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">UIAccountForm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bundle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-XML_Resources_Bundles-Portal_support"/>3.9.3. Portal support</h3></div></div></div><p>
			In order to be loaded by the portal at runtime (actually the resource bundle service), the name of the file must be the same as a property file and it must use the <span class="bold"><strong>.xml</strong></span> suffix.
		</p><p>
			For example; for the Account Portlet to be displayed in Arabic, the resource bundle would be <span class="bold"><strong> AccountPortlet_ar.xml</strong></span> rather than <span class="bold"><strong>AccountPortlet_ar.properties</strong></span>.
		</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-JavaScript_Inter_Application_Communication"/>3.10. JavaScript Inter Application Communication</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-JavaScript_Inter_Application_Communication-Overview"/>3.10.1. Overview</h3></div></div></div><p>
			JavaScript Inter Application Communication is designed to allow applications within a page to exchange data. This library is made for broadcasting messages on topic.
		</p><p>
			It is based on 3 functions:
		</p><div class="itemizedlist"><ul><li><p>
					Subscribe.
				</p></li><li><p>
					Publish.
				</p></li><li><p>
					Unsubscribe.
				</p></li></ul></div><p>
			A subscription to a topic will receive any subtopic messages. For example; An application subscribed to "<code class="literal">/eXo/application</code>" will receive messages sent on the "<code class="literal">/eXo/application/map</code>" topic. A message sent on "<code class="literal">/eXo</code>", however, would not be received.
		</p><div class="variablelist"><a id="vari-Reference_Guide-Overview-Subscription_Topics"/><p class="title"><b>Subscription Topics</b></p><dl><dt><span class="term">/eXo</span></dt><dd><p>
						This topic contains all the events generated by the platform.
					</p></dd><dt><span class="term">/eXo/portal/notification</span></dt><dd><p>
						A message is sent on this topic will prompt a popup notification in the top right of the screen.
					</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-JavaScript_Inter_Application_Communication-Library"/>3.10.2. Library</h3></div></div></div><p>
			The Inter Application Communication library is found in <code class="filename">01eXoResources.war:/javascript/eXo/core/Topic.js</code>
		</p><pre class="programlisting">/**
 * publish is used to publish an event to the other subscribers to the given channels
 * @param {Object} senderId is a string that identify the sender
 * @param {String} topic is the topic that the message will be published
 * @param {Object} message is the message that's going to be delivered to the subscribers to the topic
 */
Topic.prototype.publish = function(/*Object*/ senderId, /*String*/ topicName, /*Object*/ message ) { ... }

/**
 * isSubscribed is used to check if a function receive the events from a topic
 * @param {String} topic The topic.
 * @param {Function} func is the name of the function of obj to call when a message is received on the topic
 */
Topic.prototype.isSubscribed = function(/*String*/ topic, /*Function*/ func) { ... }

/**
 * subscribe is used to subscribe a callback to a topic
 * @param {String} topic is the topic that will be listened
 * @param {Function} func is the name of the function of obj to call when a message is received on the topic
 * 
 * func is a function that take a Object in parameter. the event received have this format:
 * {senderId:senderId, message:message, topic: topic}
 *
 */
Topic.prototype.subscribe = function(/*String*/ topic, /*Function*/ func) { ... }

/**
 * unsubscribe is used to unsubscribe a callback to a topic
 * @param {String} topic is the topic
 * @param {Object} id is the id of the listener we want to unsubscribe
 */
Topic.prototype.unsubscribe = function(/*String*/ topic, /*Object*/ id) { ... }

Topic.prototype.initCometdBridge = function() { ... }
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-JavaScript_Inter_Application_Communication-Syntax"/>3.10.3. Syntax</h3></div></div></div><p>
			The three messaging functions require particular objects and definitions in their syntax:
		</p><div class="variablelist"><dl><dt><span class="term">Subscribe</span></dt><dd><p>
						The <code class="literal">subscribe</code> function is used to subscribe a callback to a topic. It uses the following parameters:
					</p><div class="variablelist"><dl><dt><span class="term">topic</span></dt><dd><p>
									The topic that will be listened for.
								</p></dd><dt><span class="term">func</span></dt><dd><p>
									The name of the object function to call when a message is received on the topic. It has to be a function that takes an Object parameter. The event received will have this format: 
</p><pre class="programlisting">{
  senderId:senderId,
  message:message,
  topic: topic
}
</pre><p>
								</p></dd></dl></div></dd><dt><span class="term">Publish</span></dt><dd><p>
						The <code class="literal">publish</code> function is used to publish an event to the other subscribered applications through the given channels. Its parameters are:
					</p><div class="variablelist"><dl><dt><span class="term">senderId</span></dt><dd><p>
									This is a string that identifies the sender.
								</p></dd><dt><span class="term">topicName</span></dt><dd><p>
									The topic that the message will be published.
								</p></dd><dt><span class="term">message</span></dt><dd><p>
									This is the message body to be delivered to the subscribers to the topic.
								</p></dd></dl></div></dd><dt><span class="term">Unsubscribe</span></dt><dd><p>
						The <code class="literal">unsubscribe</code> function is used to unsubscribe a callback to a topic. The required parameters are:
					</p><div class="variablelist"><dl><dt><span class="term">topic</span></dt><dd><p>
									The topic that will is to be unsubscribed from.
								</p></dd><dt><span class="term">id</span></dt><dd><p>
									This is the context object.
								</p></dd></dl></div></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-JavaScript_Inter_Application_Communication-Example_of_what"/>3.10.4. Example of Javascript events usage</h3></div></div></div><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/portlet" prefix="portlet" %&gt;
&lt;portlet:defineObjects/&gt;
&lt;div&gt;
  &lt;p&gt;
    Received messages:
    &lt;div id="received_&lt;portlet:namespace/&gt;"&gt;
         
    &lt;/div&gt;
  &lt;/p&gt;
   
  &lt;p&gt;
    Send message:
    &lt;input type="text" id="msg_&lt;portlet:namespace/&gt;"/&gt; &lt;a href="#" onclick="send_&lt;portlet:namespace/&gt;();"&gt;send&lt;/a&gt;
  &lt;/p&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;
   
  Function.prototype.bind = function(object) {
    var method = this;
      return function() {
      method.apply(object, arguments);
    }
  }
   
  function send_&lt;portlet:namespace/&gt;() {
    var msg = document.getElementById("msg_&lt;portlet:namespace/&gt;").value;
    eXo.core.Topic.publish("&lt;portlet:namespace/&gt;", "/demo", msg);
  }
   
  function Listener_&lt;portlet:namespace/&gt;(){
      
  }
   
  Listener_&lt;portlet:namespace/&gt;.prototype.receiveMsg = function(event) {
    document.getElementById("received_&lt;portlet:namespace/&gt;").innerHTML = 
      document.getElementById("received_&lt;portlet:namespace/&gt;").innerHTML + "&lt;br /&gt;* " + 
      event.senderId + ": " + event.message;
  }
   
  function init_&lt;portlet:namespace/&gt;() {
    var listener_&lt;portlet:namespace/&gt; = new Listener_&lt;portlet:namespace/&gt;();
    eXo.core.Topic.subscribe("/demo", listener_&lt;portlet:namespace/&gt;.receiveMsg.bind(listener_&lt;portlet:namespace/&gt;));
  }
   
  init_&lt;portlet:namespace/&gt;();
&lt;/script&gt;
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Upload_Component"/>3.11. Upload Component</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Upload_Component-Upload_Service"/>3.11.1. Upload Service</h3></div></div></div><p>
			The service is defined by the class: <code class="literal">org.exoplatform.upload.UploadService</code>;
		</p><p>
			This can be configured with the following xml code:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.upload.UploadService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">upload.limit.size</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Maximum&nbsp;size&nbsp;of&nbsp;the&nbsp;file&nbsp;to&nbsp;upload&nbsp;in&nbsp;MB</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">10</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
			This code allows for a default upload size limit for the service to be configured. The value unit is in MegaBytes.
		</p><p>
			This limit will be used by default by all applications if no application-specific limit is set. Setting a different limit for applications is discussed in a later section.
		</p><p>
			If the value is set at <em class="parameter"><code>0</code></em> the upload size is unlimited.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="proc-Reference_Guide-Upload_Service-How_to_use_the_upload_component"/><p class="title"><b>Procedure 3.4. How to use the upload component</b></p><ol class="1"><li><p>
					Create an object type <code class="literal">org.exoplatform.webui.form.UIFormUploadInput</code>.
				</p><p>
					Two constructors are available for this:
				</p><pre class="programlisting">public UIFormUploadInput(String name, String bindingExpression)
</pre><p>
					or:
				</p><pre class="programlisting">public UIFormUploadInput(String name, String bindingExpression, int limit)
</pre><p>
					This is an example using the second form :
				</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">PortletRequestContext</span><!-- <br/> --><span class="java_plain">&nbsp;pcontext&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">PortletRequestContext</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_type">WebuiRequestContext</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getCurrentInstance</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_type">PortletPreferences</span><span class="java_plain">&nbsp;portletPref&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;pcontext</span><span class="java_separator">.</span><span class="java_plain">getRequest</span><span class="java_separator">().</span><span class="java_plain">getPreferences</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_type">int</span><span class="java_plain">&nbsp;limitMB&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_separator">.</span><span class="java_plain">parseInt</span><span class="java_separator">(</span><span class="java_plain">portletPref</span><span class="java_separator">.</span><span class="java_plain">getValue</span><span class="java_separator">(</span><span class="java_literal">&quot;uploadFileSizeLimitMB&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;&quot;</span><span class="java_separator">).</span><span class="java_plain">trim</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_type">UIFormUploadInput</span><span class="java_plain">&nbsp;uiInput&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">UIFormUploadInput</span><span class="java_separator">(</span><span class="java_literal">&quot;upload&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;upload&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;limitMB</span><span class="java_separator">);</span>
</pre></li><li><p>
					To obtain the limit from the <code class="literal">xml</code> configuration, this piece of code can be added to the either <code class="filename">portlet.xml</code> or <code class="filename">portlet-preferences.xml</code> :
				</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">uploadFileSizeLimitMB</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">30</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">read-only</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">preference</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
					Again, a <em class="parameter"><code>0</code></em> value means an unlimited upload size, and the value unit is set in MegaBytes.
				</p></li><li><p>
					Use the <code class="literal">getUploadDataAsStream()</code> method to get the uploaded data:
				</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">UIFormUploadInput</span><!-- <br/> --><span class="java_plain">&nbsp;input&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">UIFormUploadInput</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">uiForm</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getUIInput</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;upload&quot;</span><!-- <br/> --><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">InputStream</span><span class="java_plain">&nbsp;inputStream&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;input</span><span class="java_separator">.</span><span class="java_plain">getUploadDataAsStream</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">jcrData</span><span class="java_separator">.</span><span class="java_plain">setValue</span><span class="java_separator">(</span><span class="java_plain">inputStream</span><span class="java_separator">);</span>
</pre></li><li><p>
					The upload service stores a temporary file on the filesystem during the upload process. When the upload is finished, the service must be cleaned in order to:
				</p><div class="orderedlist"><ol><li><p>
							Delete the temporary file.
						</p></li><li><p>
							Delete the classes used for the upload.
						</p></li></ol></div><p>
					Use the<code class="literal">removeUpload()</code> method defined in the upload service to purge the file:
				</p><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">UploadService</span><!-- <br/> --><span class="java_plain">&nbsp;uploadService&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;uiForm</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getApplicationComponent</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">UploadService</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_type">UIFormUploadInput</span><span class="java_plain">&nbsp;uiChild&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;uiForm</span><span class="java_separator">.</span><span class="java_plain">getChild</span><span class="java_separator">(</span><span class="java_type">UIFormUploadInput</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">uploadService</span><span class="java_separator">.</span><span class="java_plain">removeUpload</span><span class="java_separator">(</span><span class="java_plain">uiChild</span><span class="java_separator">.</span><span class="java_plain">getUploadId</span><span class="java_separator">())</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
</pre><div class="note"><h2>Saving the uploaded file</h2><p>
						Ensure the file is saved <span class="bold"><strong>before</strong></span> the service is cleaned.
					</p></div></li></ol></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_"/>3.12. Deactivation of the Ajax Loading Mask Layer </h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_-Purpose"/>3.12.1. Purpose</h3></div></div></div><p>
			The loading mask layer is deployed after an ajax-call. Its purpose is to block the GUI in order to prevent further user actions until the the ajax-request has been completed.
		</p><p>
			However, the mask layer may need to be deactivated in instances where the portal requires user instructions before previous instructions have been carried out.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="proc-Reference_Guide-Purpose-How_to_deactivate_the_ajax_loading_mask"/><p class="title"><b>Procedure 3.5. How to deactivate the ajax-loading mask</b></p><ol class="1"><li><p>
					Generate a script to make an asynchronous ajax-call. Use the <code class="literal">uicomponent.doAsync()</code> method rather than the <code class="literal">uicomponent.event()</code> method.
				</p><p>
					For example:
				</p><pre class="programlisting">&lt;a href="&lt;%=uicomponent.doAsync(action, beanId, params)%&gt;" alt=""&gt;Asynchronous&lt;/a&gt;
</pre></li><li><p>
					The <code class="literal">doAsync()</code> method automatically adds the following new parameter into the parameters list; <code class="literal">asyncparam = new Parameter(AJAX ASYNC,"true"); (AJAX ASYNC == "ajax async")</code>
				</p><p>
					This request is asynchronous and the ajax-loading mask will not deployed.
				</p><div class="note"><h2>Note</h2><p>
						An asynchronous request can still be made using the <code class="literal">uicomponent.event()</code>. When using this method, however, the asyncparam must be added manually.
					</p></div></li></ol></div><p>
			The GUI will be blocked to ensure a user can only request one action at a time and while the request seems to be synchronous, all ajax requests are, in fact always asynchronous. For further information refer to <a class="xref" href="#sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_-Synchronous_issue" title="3.12.2. Synchronous issue">Section 3.12.2, “Synchronous issue”</a>.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Deactivation_of_the_Ajax_Loading_Mask_Layer_-Synchronous_issue"/>3.12.2. Synchronous issue</h3></div></div></div><p>
			Most web browsers support ajax requests in two modes: <span class="emphasis"><em>Synchronous</em></span> and <span class="emphasis"><em>Asynchronous</em></span>. This mode is specified with a boolean <code class="literal">bAsync</code> parameter.
		</p><pre class="programlisting">var bAsync = false; // Synchronous
request.open(instance.method, instance.url, bAsync);
</pre><p>
			However, in order to work with browsers that do not support <span class="emphasis"><em>Synchronous</em></span> requests, <code class="literal">bAsync</code> is set to always be true (Ajax request will always be asynchronous).
		</p><pre class="programlisting">// Asynchronous request
request.open(instance.method, instance.url, true);
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Javascript_Configuration"/>3.13. Javascript Configuration</h2></div></div></div><p>
		Managing Javascript scripts in an application like GateIn 3.2 is a critical part of the configuration work.
      Configuring the scripts correctly will result in a faster response time from the portal.
	</p><p>
		Every portlet can have its own javscript code but in many cases it is more convenient to reuse some existing
      shared libraries. For that reason, GateIn 3.2 has a mechanism to easily register the libraries that will be loaded
      when the first page will be rendered.
	</p><p>
		To do so, every WAR deployed in GateIn 3.2 can register the <code class="filename">.js</code> files with the groovy script
      <code class="filename">WEB-INF/conf/script/groovy/JavascriptScript.groovy</code>. (TODO: this file doesn't seem to exist)
	</p><p>
		The example file below is found in the 01eXoResources.war
	</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">JavascriptService</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">addJavascript</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;eXo&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">&quot;/javascript/eXo.js&quot;</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">ServletContext</span><!-- <br/> --><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;Animation&nbsp;Javascripts&nbsp;*/</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.animation.ImplodeExplode&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/animation/ImplodeExplode.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;Application&nbsp;descriptor&nbsp;*/</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.application.ApplicationDescriptor&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/application/ApplicationDescriptor.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;CORE&nbsp;Javascripts&nbsp;*/</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.Utils&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/Util.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.DOMUtil&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/DOMUtil.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.Browser&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/Browser.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.MouseEventManager&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/MouseEventManager.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.UIMaskLayer&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/UIMaskLayer.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.Skin&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/Skin.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.DragDrop&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/DragDrop.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.TemplateEngine&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/TemplateEngine.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;Widget&nbsp;Javascripts&nbsp;*/</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.widget.UIWidget&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/widget/UIWidget.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.widget.UIAddWidget&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/widget/UIAddWidget.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.widget.UIExoWidget&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/widget/UIExoWidget.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;Desktop&nbsp;Javascripts&nbsp;*/</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.desktop.UIDockbar&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/desktop/UIDockbar.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.desktop.UIDesktop&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/desktop/UIDesktop.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;WebUI&nbsp;Javascripts&nbsp;*/</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIItemSelector&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIItemSelector.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIForm&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIForm.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIPopup&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIPopup.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIPopupSelectCategory&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIPopupSelectCategory.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIPopupWindow&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIPopupWindow.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIVerticalScroller&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIVerticalScroller.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIHorizontalTabs&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIHorizontalTabs.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIPopupMenu&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIPopupMenu.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.webui.UIDropDownControl&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/webui/UIDropDownControl.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;Portal&nbsp;Javascripts&nbsp;*/</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.PortalHttpRequest&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/PortalHttpRequest.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.UIPortal&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/UIPortal.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.UIWorkspace&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/UIWorkspace.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.UIPortalControl&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/UIPortalControl.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.PortalDragDrop&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/PortalDragDrop.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.UIPortalNavigation&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/UIPortalNavigation.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.UIMaskWorkspace&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/UIMaskWorkspace.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.portal.UIExoStartMenu&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/portal/UIExoStartMenu.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_comment">/*&nbsp;Desktop&nbsp;Javascripts&nbsp;2&nbsp;*/</span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.desktop.UIWindow&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/desktop/UIWindow.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
</pre><p>
		Note that even registered dedicated javascripts will be merged into a single <code class="literal">merged.js</code> file when the server loads. This reduces the number of HTTP calls as seen in the home page source code:
	</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">script</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/javascript&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">src</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/portal/javascript/merged.js&quot;</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">script</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
		Although this optimization is useful for a production environment, it may be easier to deactivate this optimization while debugging javascript problems.
	</p><p>
		To do this, set the java system property <code class="literal">exo.product.developing</code> to <code class="literal">true</code>.
	</p><p>
		To see or use the merged file set this property to <code class="literal">false</code>.
	</p><p>
		The property can be passed as a JVM parameter with the <code class="literal">-D</code> option in your <code class="literal">GateIn.sh</code> or <code class="literal">GateIn.bat</code> startup script.
	</p><p>
		Every javascript file is associated with a module name which acts as a namespace.

      The module name is passed as a first parameter to JavascriptService.addJavascript() function as in the following example:
   </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_type">JavascriptService</span><span class="java_separator">.</span><span class="java_plain">addJavascript</span><span class="java_separator">(</span><span class="java_literal">&quot;eXo.core.DragDrop&quot;</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;/javascript/eXo/core/DragDrop.js&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContext</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span></pre><p>
      Inside the associated javascript files, functions are exposed as global javascript function variables using the module name.
	</p><p> For example:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">eXo</span><span class="java_separator">.</span><span class="java_plain">core</span><span class="java_separator">.</span><span class="java_type">DragDrop</span><span class="java_plain">&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">DragDrop</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span></pre><p>
		It is also possible to use <code class="literal">eXo.require()</code> javascript method to lazy load and evaluate some javascript code.
      This is quite useful for the portlet or widget applications that will use this javascript only once. Otherwise,
      if the library is reusable in several places it is better to reference it in the groovy file.
	</p></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Portlet_development"/>Chapter 4. Portlet development</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portlet_Primer">4.1. Portlet Primer</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Portlet_Primer-JSR_168_and_JSR_286_overview">4.1.1. JSR-168 and JSR-286 overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Portlet_Primer-Tutorials">4.1.2. Tutorials</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Global_Portlet">4.2. Global portlet.xml file</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Global_Portlet-Global_usecase">4.2.1. Global portlet.xml usecase</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Global_Portlet-Global_metadata">4.2.2. Global metadata</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Portlet_Primer"/>4.1. Portlet Primer</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portlet_Primer-JSR_168_and_JSR_286_overview"/>4.1.1. JSR-168 and JSR-286 overview</h3></div></div></div><p>
			The Java Community Process (<code class="literal">JCP</code>) uses Java Specification Requests (<code class="literal">JSR</code>s) to define proposed specifications and technologies designed for the Java platform.
		</p><p>
			The Portlet Specifications aim at defining portlets that can be used by any <a class="ulink" href="http://www.jcp.org/en/jsr/detail?id=168">JSR-168 (Portlet 1.0)</a> or <a class="ulink" href="http://www.jcp.org/en/jsr/detail?id=286">JSR-286 (Portlet 2.0)</a> portlet container.
		</p><p>
			Most Java EE (Enterprise Edition) portals include at least one compliant portlet container, and GateIn 3.2 is no exception. In fact, GateIn 3.2 includes a container that supports both versions.
		</p><p>
			This chapter gives a brief overview of the Portlet Specifications but portlet developers are strongly encouraged to read the <a class="ulink" href="http://www.jcp.org/en/jsr/detail?id=286">JSR-286 Portlet Specification</a> .
		</p><p>
			GateIn 3.2 is fully JSR-286 compliant. Any JSR-168 or JSR-286 portlet operates as it is mandated by the respective specifications inside the portal.
		</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JSR_168_and_JSR_286_overview-Portal_Pages"/>4.1.1.1. Portal Pages</h4></div></div></div><p>
				A portal can be considered as a series of web pages with different <span class="emphasis"><em>areas</em></span> within them. Those areas contain different <span class="emphasis"><em>windows</em></span> and each <span class="emphasis"><em>window</em></span> contains portlet:
			</p><p>
				The diagram below visually represents this nesting:
			</p><p>
				</p><div class="mediaobject"><img src="images/PortletDevelopment/Standard/SpecPortalDef.png"/></div><p>
			</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JSR_168_and_JSR_286_overview-Rendering_Modes"/>4.1.1.2. Rendering Modes</h4></div></div></div><p>
				A portlet can have different view modes. Three modes are defined by the JSR-286 specification:
			</p><div class="variablelist"><dl><dt><span class="term">View</span></dt><dd><p>
							Generates markup reflecting the current state of the portlet.
						</p></dd><dt><span class="term">Edit</span></dt><dd><p>
							Allows a user to customize the behavior of the portlet.
						</p></dd><dt><span class="term">Help</span></dt><dd><p>
							Provides information to the user as to how to use the portlet.
						</p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JSR_168_and_JSR_286_overview-Window_States"/>4.1.1.3. Window States</h4></div></div></div><p>
				Window states are an indicator of how much page space a portlet consumes on any given page. The three states defined by the JSR-168 specification are:
			</p><div class="variablelist"><dl><dt><span class="term">Normal</span></dt><dd><p>
							A portlet shares this page with other portlets.
						</p></dd><dt><span class="term">Minimized</span></dt><dd><p>
							A portlet may show very little information, or none at all.
						</p></dd><dt><span class="term">Maximized</span></dt><dd><p>
							A portlet may be the only portlet displayed on this page.
						</p></dd></dl></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Portlet_Primer-Tutorials"/>4.1.2. Tutorials</h3></div></div></div><p>
			The tutorials contained in this chapter are targeted toward portlet developers. It is also recommend that developers read and understand the <a class="ulink" href="http://www.jcp.org/en/jsr/detail?id=286"> JSR-286 Portlet Specification </a> .
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Maven</h2><p>
				This example is using Maven to compile and build the web archive. Maven versions can be downloaded from <a class="ulink" href="http://maven.apache.org/download.html">maven.apache.org</a>
			</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Tutorials-Deploying_your_first_Portlet"/>4.1.2.1. Deploying your first Portlet</h4></div></div></div><p>
				This section describes how to deploy a portlet in GateIn 3.2. A sample portlet called <code class="filename">SimplestHelloWorld</code> is located in the <code class="literal">examples</code> directory at the root of your GateIn 3.2 binary package. This sample is used in the following examples.
			</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Deploying_your_first_Portlet-Compiling"/>4.1.2.1.1. Compiling</h5></div></div></div><p>
					To compile and package the application:
				</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
							Navigate to the <code class="filename">SimplestHelloWorld</code> directory and execute:
						</p><pre class="programlisting">mvn package
</pre></li><li><p>
							If the compile is successfully packaged the result will be available in: <code class="filename">SimplestHelloWorld/target/SimplestHelloWorld-0.0.1.war </code>.
						</p></li><li><p>
							Copy the package file into <code class="literal">JBOSS_HOME/server/default/deploy</code>.
						</p></li><li><p>
							Start JBoss Application Server (if it is not already running).
						</p></li><li><p>
							Create a new portal page and add the portlet to it.
						</p><div class="mediaobject"><img src="images/PortletDevelopment/Standard/first_portlet/deployed.png"/></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Deploying_your_first_Portlet-Package_Structure"/>4.1.2.1.2. Package Structure</h5></div></div></div><p>
					Like other Java EE applications, GateIn 3.2 portlets are packaged in WAR files. A typical portlet WAR file can include servlets, resource bundles, images, HTML, JavaServer Pages (JSP), and other static or dynamic files.
				</p><p>
					The following is an example of the directory structure of the <code class="filename">SimplestHelloWorld</code> portlet:
				</p><div class="programlistingco"><pre class="programlisting">|-- SimplestHelloWorld-0.0.1.war
|   `-- WEB-INF
|       |-- classes
|       |   `-- org
|       |       `-- gatein
|       |           `-- portal
|       |               `-- examples
|       |                   `-- portlets
|       |     <span xmlns="" class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Package_Structure.javaclass"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>                  `-- SimplestHelloWorldPortlet.class
|       |-- po<span xmlns="" class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Package_Structure.portlet"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>rtlet.xml
|       `-- we<span xmlns="" class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Package_Structure.web"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>b.xml
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
								The compiled Java class implementing <span class="emphasis"><em>javax.portlet.Portlet</em></span> (through <span class="emphasis"><em>javax.portlet.GenericPortlet </em></span> )
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
								This is the mandatory descriptor files for portlets. It is used during deployment..
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
								This is the mandatory descriptor for web applications.
							</p></td></tr></table></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Deploying_your_first_Portlet-Portlet_Class"/>4.1.2.1.3. Portlet Class</h5></div></div></div><p>
					Below is the <code class="filename">SimplestHelloWorldPortlet/src/main/java/org/gatein/portal/examples/portlets/SimplestHelloWorldPortlet.java </code> Java source:
				</p><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">gatein</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">portal</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">examples</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">portlets</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;java</span><span class="java_separator">.</span><span class="java_plain">io</span><span class="java_separator">.</span><span class="java_type">IOException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;java</span><span class="java_separator">.</span><span class="java_plain">io</span><span class="java_separator">.</span><span class="java_type">PrintWriter</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">GenericPortlet</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">RenderRequest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">RenderResponse</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Portlet_Class.extends"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">SimplestHelloWorldPortlet</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">GenericPortlet</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;doView</span><span class="java_separator">(</span><span class="java_type">RenderRequest</span><span class="java_plain">&nbsp;request</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Portlet_Class.doview"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">RenderResponse</span><span class="java_plain">&nbsp;response</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Portlet_Class.writer"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">PrintWriter</span><span class="java_plain">&nbsp;writer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;response</span><span class="java_separator">.</span><span class="java_plain">getWriter</span><span class="java_separator">();</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Portlet_Class.write"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer</span><span class="java_separator">.</span><span class="java_plain">write</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&nbsp;World&nbsp;!&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Portlet_Class.close"><img src="images/gatein/docbook/callouts/5.png" alt="(5)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer</span><span class="java_separator">.</span><span class="java_plain">close</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
								All portlets must implement the <code class="literal">javax.portlet.Portlet</code> interface. The portlet API provides a convenient implementation of this interface.
							</p><p>
								The <code class="literal">javax.portlet.Portlet</code> interface uses the <code class="literal">javax.portlet.GenericPortlet</code> class which implements the <code class="literal">Portlet render</code> method to dispatch to abstract mode-specific methods. This makes it easier to support the standard portlet modes.
							</p><p>
								<code class="literal">Portlet render</code> also provides a default implementation for the <code class="literal">processAction</code>, <code class="literal">init</code> and <code class="literal">destroy</code> methods. It is recommended to extend <code class="literal">GenericPortlet</code> for most cases.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
								If only the <code class="literal">view</code> mode is required, then only the <code class="literal">doView</code> method needs to be implemented. The <code class="literal">GenericPortlet</code><code class="literal">render</code> implementation calls our implementation when the <code class="literal">view</code> mode is requested.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
								Use the <span class="emphasis"><em>RenderResponse</em></span> to obtain a writer to be used to produce content.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>
								Write the markup to display.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/5.png" alt="5" border="0"/></p></td><td valign="top" align="left"><p>
								Closing the writer.
							</p></td></tr></table></div></div><p>
					</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Markup Fragments</h2><p>
							Portlets are responsible for generating markup fragments, as they are included on a page and are surrounded by other portlets. This means that a portlet outputting HTML must not output any markup that cannot be found in a <code class="literal">&lt;body&gt;</code> element.
						</p></div><p>
				</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Deploying_your_first_Portlet-Application_Descriptors"/>4.1.2.1.4. Application Descriptors</h5></div></div></div><p>
					GateIn 3.2 requires certain descriptors to be included in a portlet WAR file. These descriptors are defined by the Jave EE (<code class="filename">web.xml</code>) and Portlet Specification (<code class="filename">portlet.xml</code>).
				</p><p>
					Below is an example of the <code class="filename">SimplestHelloWorldPortlet/WEB-INF/portlet.xml</code> file. This file must adhere to its definition in the JSR-286 Portlet Specification. More than one portlet application may be defined in this file:
				</p><div class="programlistingco"><pre class="programlisting">
&lt;portlet-app xmlns="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd 
                                         http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
   version="2.0"&gt;
   &lt;portlet&gt;
      &lt;portlet<span xmlns="" class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Application_Descriptors.portletname"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>-name&gt;SimplestHelloWorldPortlet&lt;/portlet-name&gt;
      &lt;portlet<span xmlns="" class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Application_Descriptors.portletclass"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>-class&gt;
         org.gatein.portal.examples.portlets.SimplestHelloWorldPortlet
      &lt;/portlet-class&gt;
      &lt;support<span xmlns="" class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Application_Descriptors.supports"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>s&gt;
        &lt;mime-type&gt;text/html&lt;/mime-type&gt;
      &lt;/supports&gt;
      &lt;portlet<span xmlns="" class="co" id="area-Reference_Guide-Deploying_your_first_Portlet-Application_Descriptors.portletinfo"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span>-info&gt;
          &lt;title&gt;Simplest Hello World Portlet&lt;/title&gt;
      &lt;/portlet-info&gt;
   &lt;/portlet&gt;
&lt;/portlet-app&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
								Define the portlet name. It does not have to be the class name.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
								The Fully Qualified Name (<code class="literal">FQN</code>) of your portlet class must be declared here.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
								The <code class="literal">&lt;supports&gt; </code> element declares all of the markup types that a portlet supports in the <code class="literal">render</code> method. This is accomplished via the <code class="literal">&lt;mime-type&gt; </code> element, which is required for every portlet.
							</p><p>
								The declared MIME types must match the capability of the portlet. It allows administrators to pair which modes and window states are supported for each markup type.
							</p><p>
								This does not have to be declared as all portlets must support the <code class="literal">view</code> portlet mode.
							</p><p>
								Use the <code class="literal">&lt;mime-type&gt; </code> element to define which markup type the portlet supports. In the example above this is <code class="literal">text/html</code>. This section tells the portal to only output HTML.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>
								When rendered, the portlet's title is displayed as the header in the portlet window, unless it is overridden programmatically. In the example above the title would be <code class="literal">Simplest Hello World Portlet</code> .
							</p></td></tr></table></div></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Tutorials-JavaServer_Pages_Portlet_Example"/>4.1.2.2. JavaServer Pages Portlet Example</h4></div></div></div><p>
				This section discusses:
			</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>
						Adding more features to the previous example.
					</p></li><li><p>
						Using a JSP page to render the markup.
					</p></li><li><p>
						Using the portlet tag library to generate links to the portlet in different ways.
					</p></li><li><p>
						Using the other standard portlet modes.
					</p></li></ol></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
						The example used in this section can be found in the <code class="literal">JSPHelloUser</code> directory.
					</p></li><li><p>
						Execute <code class="command">mvn package</code> in this directory.
					</p></li><li><p>
						Copy <code class="filename">JSPHelloUser/target/JSPHelloUser-0.0.1.war </code> to the <code class="literal">deploy</code> directory of JBoss Application Server.
					</p></li><li><p>
						Select the new <code class="literal">JSPHelloUser</code> tab in your portal.
					</p></li></ol></div><div class="mediaobject" align="center"><img src="images/PortletDevelopment/Standard/jsp_portlet/output.png" align="middle"/></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
					The <code class="literal">EDIT</code> button only appears with logged-in users, which is not the case in the screenshot.
				</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JavaServer_Pages_Portlet_Example-Package_Structure"/>4.1.2.2.1. Package Structure</h5></div></div></div><p>
					The package structure in this tutorial does not differ greatly from the previous example, with the exception of adding some JSP files detailed later.
				</p><p>
					The JSPHelloUser portlet contains the mandatory portlet application descriptors. The following is an example of the directory structure of the JSPHelloUser portlet:
				</p><pre class="programlisting">JSPHelloUser-0.0.1.war
    |-- META-INF
    |   |-- MANIFEST.MF
    |-- WEB-INF
    |   |-- classes
    |   |   `-- org
    |   |       `-- gatein
    |   |           `-- portal
    |   |               `-- examples
    |   |                   `-- portlets
    |   |                       `-- JSPHelloUserPortlet.class
    |   |-- portlet.xml
    |   `-- web.xml
    `-- jsp
        |-- edit.jsp
        |-- hello.jsp
        |-- help.jsp
        `-- welcome.jsp
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class"/>4.1.2.2.2. Portlet Class</h5></div></div></div><p>
					The code below is from the <code class="filename"> JSPHelloUser/src/main/java/org/gatein/portal/examples/portlets/JSPHelloUserPortlet.java </code> Java source. It is split in different pieces.
				</p><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">gatein</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">portal</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">examples</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">portlets</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;java</span><span class="java_separator">.</span><span class="java_plain">io</span><span class="java_separator">.</span><span class="java_type">IOException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">ActionRequest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">ActionResponse</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">GenericPortlet</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">PortletException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">PortletRequestDispatcher</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">RenderRequest</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">RenderResponse</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">portlet</span><span class="java_separator">.</span><span class="java_type">UnavailableException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">JSPHelloUserPortlet</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">GenericPortlet</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;doView</span><span class="java_separator">(</span><span class="java_type">RenderRequest</span><span class="java_plain">&nbsp;request</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">RenderResponse</span><span class="java_plain">&nbsp;response</span><span class="java_separator">)</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class.doView"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PortletException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;sYourName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_separator">)</span><span class="java_plain">&nbsp;request</span><span class="java_separator">.</span><span class="java_plain">getParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;yourname&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class.renderParameter"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">sYourName&nbsp;</span><span class="java_operator">!=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request</span><span class="java_separator">.</span><span class="java_plain">setAttribute</span><span class="java_separator">(</span><span class="java_literal">&quot;yourname&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;sYourName</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">PortletRequestDispatcher</span><span class="java_plain">&nbsp;prd&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class.requestDispatcher"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPortletContext</span><span class="java_separator">().</span><span class="java_plain">getRequestDispatcher</span><span class="java_separator">(</span><span class="java_literal">&quot;/jsp/hello.jsp&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class.include"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prd</span><span class="java_separator">.</span><span class="java_plain">include</span><span class="java_separator">(</span><span class="java_plain">request</span><span class="java_separator">,</span><span class="java_plain">&nbsp;response</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">PortletRequestDispatcher</span><span class="java_plain">&nbsp;prd&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getPortletContext</span><span class="java_separator">().</span><span class="java_plain">getRequestDispatcher</span><span class="java_separator">(</span><span class="java_literal">&quot;/jsp/welcome.jsp&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prd</span><span class="java_separator">.</span><span class="java_plain">include</span><span class="java_separator">(</span><span class="java_plain">request</span><span class="java_separator">,</span><span class="java_plain">&nbsp;response</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">...</span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
								Override the <span class="emphasis"><em>doView</em></span> method (as in the first tutorial).
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
								This entry attempts to obtain the value of the render parameter named <code class="literal">yourname</code>. If defined it should redirect to the <code class="filename">hello.jsp</code> JSP page, otherwise to the <code class="filename">welcome.jsp</code> JSP page.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
								Get a request dispatcher on a file located within the web archive.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>
								Perform the inclusion of the markup obtained from the JSP.
							</p></td></tr></table></div></div><p>
					As well as the <code class="literal">VIEW</code> portlet mode, the specification defines two other modes; <code class="literal">EDIT</code> and <code class="literal">HELP</code>.
				</p><p>
					These modes need to be defined in the <code class="filename">portlet.xml</code> descriptor. This will enable the corresponding buttons on the portlet's window.
				</p><p>
					The generic portlet that is inherited dispatches the different views to the methods: <code class="literal">doView</code> , <code class="literal">doHelp</code> and <code class="literal">doEdit</code>.
				</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;doHelp</span><span class="java_separator">(</span><span class="java_type">RenderRequest</span><span class="java_plain">&nbsp;rRequest</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">RenderResponse</span><span class="java_plain">&nbsp;rResponse</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PortletException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">UnavailableException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rResponse</span><span class="java_separator">.</span><span class="java_plain">setContentType</span><span class="java_separator">(</span><span class="java_literal">&quot;text/html&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">PortletRequestDispatcher</span><span class="java_plain">&nbsp;prd&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getPortletContext</span><span class="java_separator">().</span><span class="java_plain">getRequestDispatcher</span><span class="java_separator">(</span><span class="java_literal">&quot;/jsp/help.jsp&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prd</span><span class="java_separator">.</span><span class="java_plain">include</span><span class="java_separator">(</span><span class="java_plain">rRequest</span><span class="java_separator">,</span><span class="java_plain">&nbsp;rResponse</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;doEdit</span><span class="java_separator">(</span><span class="java_type">RenderRequest</span><span class="java_plain">&nbsp;rRequest</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">RenderResponse</span><span class="java_plain">&nbsp;rResponse</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PortletException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">UnavailableException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rResponse</span><span class="java_separator">.</span><span class="java_plain">setContentType</span><span class="java_separator">(</span><span class="java_literal">&quot;text/html&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">PortletRequestDispatcher</span><span class="java_plain">&nbsp;prd&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getPortletContext</span><span class="java_separator">().</span><span class="java_plain">getRequestDispatcher</span><span class="java_separator">(</span><span class="java_literal">&quot;/jsp/edit.jsp&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prd</span><span class="java_separator">.</span><span class="java_plain">include</span><span class="java_separator">(</span><span class="java_plain">rRequest</span><span class="java_separator">,</span><span class="java_plain">&nbsp;rResponse</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">...</span>
</pre><p>
					Portlet calls happen in one or two phases. One when the portlet is rendered and two when the portlet is actioned <span class="emphasis"><em>then</em></span> rendered.
				</p><p>
					An action phase is a phase where some state changes. The render phase will have access to render parameters that will be passed each time the portlet is refreshed (with the exception of caching capabilities).
				</p><p>
					The code to be executed during an action has to be implemented in the <span class="emphasis"><em>processAction</em></span> method of the portlet.
				</p><div class="programlistingco"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_separator">...</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class.processAction"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;processAction</span><span class="java_separator">(</span><span class="java_type">ActionRequest</span><span class="java_plain">&nbsp;aRequest</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">ActionResponse</span><span class="java_plain">&nbsp;aResponse</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PortletException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">UnavailableException</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class.getActionParameter"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;sYourname&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_separator">)</span><span class="java_plain">&nbsp;aRequest</span><span class="java_separator">.</span><span class="java_plain">getParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;yourname&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-Portlet_Class.setRenderParameter"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aResponse</span><span class="java_separator">.</span><span class="java_plain">setRenderParameter</span><span class="java_separator">(</span><span class="java_literal">&quot;yourname&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;sYourname</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">...</span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
								<code class="literal">processAction</code> is the method from <code class="literal">GernericPorlet</code> to override for the <span class="emphasis"><em>action</em></span> phase.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
								Here the parameter is retrieved through an <span class="emphasis"><em>action URL</em></span> .
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
								The value of <code class="literal">yourname</code> is kept to make it available in the rendering phase. The previous line simply copies an action parameters to a render parameter for this example.
							</p></td></tr></table></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JavaServer_Pages_Portlet_Example-JSP_files_and_the_Portlet_Tag_Library"/>4.1.2.2.3. JSP files and the Portlet Tag Library</h5></div></div></div><p>
					The <code class="filename">help.jsp</code> and <code class="filename">edit.jsp</code> files are very simple. Note that CSS styles are used as defined in the portlet specification. This ensures that the portlet will render well within the theme and across portal vendors.
				</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;portlet-section-header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Help&nbsp;mode</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;portlet-section-body&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">This&nbsp;is&nbsp;the&nbsp;help&nbsp;mode,&nbsp;a&nbsp;convenient&nbsp;place&nbsp;to&nbsp;give&nbsp;the&nbsp;user&nbsp;some&nbsp;help&nbsp;information.</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;portlet-section-header&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Edit&nbsp;mode</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">div</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;portlet-section-body&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">This&nbsp;is&nbsp;the&nbsp;edit&nbsp;mode,&nbsp;a&nbsp;convenient&nbsp;place&nbsp;to&nbsp;let&nbsp;the&nbsp;user&nbsp;change&nbsp;his&nbsp;portlet&nbsp;preferences.</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">div</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
					The landing page contains the links and form to call our portlet:
				</p><div class="programlistingco"><pre class="programlisting">&lt;%@ taglib uri<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSP_files_and_the_Portlet_Tag_Library.taglib"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>="http://java.sun.com/portlet" prefix="portlet" %&gt;
 
&lt;div class="portlet-section-header"&gt;Welcome !&lt;/div&gt;
 
&lt;br/&gt;
 
&lt;div class="portlet-font"&gt;Welcome on the JSP Hello User portlet,
my name is GateIn Portal. What's yours ?&lt;/div&gt;
 
&lt;br/&gt;
 
&lt;div class="portlet-font"&gt;Method 1: We simply pass the parameter to the render phase:&lt;br/&gt;
&lt;a href="&lt;port<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSP_files_and_the_Portlet_Tag_Library.method1"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>let:renderURL&gt;&lt;portlet:param name="yourname" value="John Doe"/&gt;
                &lt;/portlet:renderURL&gt;"&gt;John Doe&lt;/a&gt;&lt;/div&gt;
 
&lt;br/&gt;
 
&lt;div class="portlet-font"&gt;Method 2: We pass the parameter to the render phase, using valid XML:
Please check the source code to see the difference with Method 1.
&lt;portlet:rende<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSP_files_and_the_Portlet_Tag_Library.method2.1"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>rURL var="myRenderURL"&gt;
    &lt;portlet:param name="yourname" value='John Doe'/&gt;
&lt;/portlet:renderURL&gt;
&lt;br/&gt;
&lt;a href="&lt;%= m<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSP_files_and_the_Portlet_Tag_Library.method2.2"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span>yRenderURL %&gt;"&gt;John Doe&lt;/a&gt;&lt;/div&gt;
 
&lt;br/&gt;
 
&lt;div class="portlet-font"&gt;Method 3: We use a form:&lt;br/&gt;
 
&lt;portlet:actio<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSP_files_and_the_Portlet_Tag_Library.method3.1"><img src="images/gatein/docbook/callouts/5.png" alt="(5)"/></span>nURL var="myActionURL"/&gt;
&lt;form action="<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSP_files_and_the_Portlet_Tag_Library.method3.2"><img src="images/gatein/docbook/callouts/6.png" alt="(6)"/></span>&lt;%= myActionURL %&gt;" method="POST"&gt;
         &lt;span class="portlet-form-field-label"&gt;Name:&lt;/span&gt;
         &lt;input class="portlet-form-input-field" type="text" name="yourname"/&gt;
         &lt;input class="portlet-form-button" type="Submit"/&gt;
&lt;/form&gt;
&lt;/div&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
								The portlet taglib, needs to be declared.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
								The first method showed here is the simplest one. <code class="literal">portlet:renderURL</code> will create a URL that calls the render phase of the current portlet and append the result at the place of the markup (within a tag). A parameter is also added directly to the URL.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
								In this method the <code class="literal">var</code> attribute is used. This avoids having one XML tag within another. Instead of printing the url the <code class="literal">portlet:renderURL</code> tag will store the result in the referenced variable ( <code class="literal">myRenderURL</code>).
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>
								The variable <code class="literal">myRenderURL</code> is used like any other JSP variable.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/5.png" alt="5" border="0"/></p></td><td valign="top" align="left"><p>
								The third method mixes form submission and action request. Again, a temporary variable is used to put the created URL into.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/6.png" alt="6" border="0"/></p></td><td valign="top" align="left"><p>
								The action URL is used in HTML form.
							</p></td></tr></table></div></div><p>
					In the third method the action phase is triggered first then the render phase is triggered, which outputs some content back to the web browser based on the available render parameters. 
					</p><div class="mediaobject"><img src="images/PortletDevelopment/Standard/jsp_portlet/process.png"/></div><p>
				</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JavaServer_Pages_Portlet_Example-JSF_example_using_the_JBoss_Portlet_Bridge"/>4.1.2.2.4. JSF example using the JBoss Portlet Bridge </h5></div></div></div><p>
					In order to write a portlet using JSF a 'bridge' is needed. This software allows developers to write a portlet application as if it was a JSF application. The bridge then negotiates the interactions between the two layers.
				</p><p>
					An example of the JBoss Portlet Bridge is available in <code class="filename">examples/JSFHelloUser</code>. The configuration is slightly different from a JSP application. This example can be used as a base to configure instead of creating a new application.
				</p><p>
					As in any JSF application, the file <code class="literal">faces-config.xml</code> is required. It must contain the following information:
				</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">faces-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">view-handler</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.portletbridge.application.PortletViewHandler</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">view-handler</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">state-manager</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.portletbridge.application.PortletStateManager</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">state-manager</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">...</span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">faces-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
					The portlet bridge libraries must be available and are usually bundled with the <code class="literal">WEB-INF/lib</code> directory of the web archive.
				</p><p>
					The other difference compare to a regular portlet application, can be found in the portlet descriptor. All details about it can be found in the JSR-301 specification that the JBoss Portlet Bridge implements.
				</p><div class="programlistingco"><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;portlet-app xmlns="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd 
                                         http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
   version="2.0"&gt;
   &lt;portlet&gt;
      &lt;portlet-name&gt;JSFHelloUserPortlet&lt;/portlet-name&gt;
      &lt;portlet<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSF_example_using_the_JBoss_Portlet_Bridge.portlet"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>-class&gt;javax.portlet.faces.GenericFacesPortlet&lt;/portlet-class&gt;
      &lt;supports&gt;
         &lt;mime-type&gt;text/html&lt;/mime-type&gt;
         &lt;portlet-mode&gt;view&lt;/portlet-mode&gt;
         &lt;portlet-mode&gt;edit&lt;/portlet-mode&gt;
         &lt;portlet-mode&gt;help&lt;/portlet-mode&gt;
      &lt;/supports&gt;
      &lt;portlet-info&gt;
         &lt;title&gt;JSF Hello User Portlet&lt;/title&gt;
      &lt;/portlet-info&gt;
      
      &lt;init-param&gt;
         &lt;name<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSF_example_using_the_JBoss_Portlet_Bridge.view"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>&gt;javax.portlet.faces.defaultViewId.view&lt;/name&gt;
         &lt;value&gt;/jsf/welcome.jsp&lt;/value&gt;
      &lt;/init-param&gt;
 
      &lt;init-param&gt;
         &lt;name<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSF_example_using_the_JBoss_Portlet_Bridge.edit"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>&gt;javax.portlet.faces.defaultViewId.edit&lt;/name&gt;
         &lt;value&gt;/jsf/edit.jsp&lt;/value&gt;
      &lt;/init-param&gt;
 
      &lt;init-param&gt;
         &lt;name<span xmlns="" class="co" id="area-Reference_Guide-JavaServer_Pages_Portlet_Example-JSF_example_using_the_JBoss_Portlet_Bridge.help"><img src="images/gatein/docbook/callouts/4.png" alt="(4)"/></span>&gt;javax.portlet.faces.defaultViewId.help&lt;/name&gt;
         &lt;value&gt;/jsf/help.jsp&lt;/value&gt;
      &lt;/init-param&gt;
 
   &lt;/portlet&gt;
&lt;/portlet-app&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
								All JSF portlets define <code class="literal">javax.portlet.faces.GenericFacesPortlet </code> as portlet class. This class is part of the JBoss Portlet Bridge
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
								This is a mandatory parameter to define what's the default page to display.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
								This parameter defines which page to display on the 'edit' mode.
							</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/4.png" alt="4" border="0"/></p></td><td valign="top" align="left"><p>
								This parameter defines which page to display on the 'help' mode.
							</p></td></tr></table></div></div></div></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Global_Portlet"/>4.2. Global portlet.xml file</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Global_Portlet-Global_usecase"/>4.2.1. Global portlet.xml usecase</h3></div></div></div><p>The Portlet Specification introduces PortletFilter as a standard approach to extend the behaviors of portlet
          objects. For example, a filter can transform the content of portlet requests and portlet responses.
          According to the Portlet Specification, normally there are three steps in setting up a portlet filter:
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Implement a PortletFilter object</p></li><li><p>Define the filter in portlet application deployment descriptor</p></li><li><p>Define the filter mapping in portlet definitions</p></li></ol></div><p>Two first steps are quite simple and easy to be done, however, at the step 3, developers/administrators
          need to replicate the filter mapping in many portlet definitions, that makes work error and tedious in
          several use cases.
          The global portlet feature is designed to compensate such limitation.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Global_Portlet-Global_metadata"/>4.2.2. Global metadata</h3></div></div></div><p>The Global metadata is declared in the
            <span class="italic">portlet.xml</span> file conforming with Portlet 2.0 's XSD.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">portlet-app</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1.0&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd&nbsp;http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">portlet-app</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Global_Portlet-Location"/>4.2.2.1. Location</h4></div></div></div><p>The path to the global <span class="italic">portlet.xml</span> is value of <span class="italic">gatein.portlet.config</span> in the <span class="italic">configuration.properties</span> file and varied by hosting
            application servers.
        </p><p><span class="bold"><strong>For Tomcat</strong></span>: <span class="italic">TOMCAT_HOME/gatein/conf/portlet.xml</span></p><p><span class="bold"><strong>For JBoss</strong></span>: <span class="italic">JBOSS_HOME/server/default/conf/gatein/portlet.xml</span></p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Global_Portlet-Global_metadata_elements"/>4.2.2.2. Global metadata elements</h4></div></div></div><p>The global <span class="italic">portlet.xml</span> file conforms to the schema of the portlet deployment descriptor defined in the Portlet
            Specification with some restrictions. In this file, the following elements are supported:
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>Portlet Filter</p></li><li><p>Portlet Mode</p></li><li><p>Window State</p></li></ol></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Global_metadata_elements-Global_Portlet-Portlet_filter"/>4.2.2.2.1. Portlet filter</h5></div></div></div><p>Portlet filter mappings declared in the global<span class="italic"> portlet.xml</span> file are applied across portlet applications. With
                the XML configuration below, the filter ApplicationMonitoringFilter involves in request handling on any
                deployed portlet.
        </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.application.ApplicationMonitoringFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.portal.application.ApplicationMonitoringFilter</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">ACTION_PHASE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">RENDER_PHASE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">EVENT_PHASE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">RESOURCE_PHASE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">lifecycle</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">filter</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
              <span class="bold"><strong>Application Monitoring Filter</strong></span>
              supports four lifecycle phases as the order below:
              <span class="italic">ACTION_PHASE/ EVENT_PHASE/ RENDER_PHASE/ RESOURCE_PHASE</span>
              and
              records statistic information on deployed portlets.
              The filter alternates actual monitoring mechanism in WebUI Framework.
          </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-Global_metadata_elements-Global_Portlet-Portlet_mode"/>4.2.2.2.2. Portlet Mode and Window State</h5></div></div></div><p>The global <span class="italic">portlet.xml</span> file is considered as an alternative place to declare custom Portlet Modes and Window States.
            </p></div></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Gadget_development"/>Chapter 5. Gadget development</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets">5.1. Gadgets</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Existing_Gadgets">5.1.1. Existing Gadgets</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Create_a_new_Gadget">5.1.2. Create a new Gadget</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Remote_Gadget">5.1.3. Remote Gadget</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Gadget_Importing">5.1.4. Gadget Importing</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Gadget_Web_Editing">5.1.5. Gadget Web Editing</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Gadget_IDE_Editing">5.1.6. Gadget IDE Editing</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Gadgets-Dashboard_Viewing">5.1.7. Dashboard Viewing</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Setup_a_Gadget_Server">5.2. Setup a Gadget Server</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Setup_a_Gadget_Server-Virtual_servers_for_gadget_rendering">5.2.1. Virtual servers for gadget rendering</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Setup_a_Gadget_Server-Configuration">5.2.2. Configuration</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Gadgets"/>5.1. Gadgets</h2></div></div></div><p>
		A gadget is a mini web application, embedded in a web page and running on an application server platform. These small applications help users perform various tasks.
	</p><p>
		GateIn 3.2 supports gadgets such as: Todo gadget, Calendar gadget, Calculator gadget, Weather Forecasts and and RSS Reader.
	</p><div class="variablelist"><a id="vari-Reference_Guide-Gadgets-Default_Gadgets"/><p class="title"><b>Default Gadgets:</b></p><dl><dt><span class="term">Calendar</span></dt><dd><p>
					The calendar gadget allows users to switch easily between daily, monthly and yearly view and, again, is customizable to match your portal's theme.
				</p><div class="mediaobject"><img src="images/GadgetDevelopment/Calendar.png"/></div></dd><dt><span class="term">ToDo</span></dt><dd><p>
					This application helps you organize your day and work group. It is designed to keep track of your tasks in a convenient and transparent way. Tasks can be highlighted with different colors.
				</p><div class="mediaobject"><img src="images/GadgetDevelopment/Todo.png"/></div></dd><dt><span class="term">Calculator</span></dt><dd><p>
					This mini-application lets you perform most basic arithmetic operations and can be themed to match the rest of your portal.
				</p><div class="mediaobject"><img src="images/GadgetDevelopment/Calculator.png"/></div></dd><dt><span class="term">RSS Reader</span></dt><dd><p>
					An RSS reader, or aggregator, collates content from various, user-specified feed sources and displays them in one location. This content can include, but isn't limited to, news headlines, blog posts or email. The RSS Reader gadget displays this content in a single window on your Portal page.
				</p></dd><dt><span class="term">More Gadgets</span></dt><dd><p>
					Further gadgets can be obtained from the <a class="ulink" href="http://www.google.com/ig/directory?synd=open">Google Gadget</a> site. GateIn 3.2 is compatible with most of the gadgets available here.
				</p></dd></dl></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>
			The following sections require more textual information.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Gadgets-Existing_Gadgets"/>5.1.1. Existing Gadgets</h3></div></div></div><div class="mediaobject"><img src="images/GadgetDevelopment/Liste.png"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Gadgets-Create_a_new_Gadget"/>5.1.2. Create a new Gadget</h3></div></div></div><div class="mediaobject"><img src="images/GadgetDevelopment/New.png"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Gadgets-Remote_Gadget"/>5.1.3. Remote Gadget</h3></div></div></div><p>
			This is the reference to a remote gadget (stock one).
		</p><div class="mediaobject"><img src="images/GadgetDevelopment/Import.png"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Gadgets-Gadget_Importing"/>5.1.4. Gadget Importing</h3></div></div></div><p>
			After referencing the gadget successfully, then import it into the local repository.
		</p><div class="mediaobject"><img src="images/GadgetDevelopment/Imported.png"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Gadgets-Gadget_Web_Editing"/>5.1.5. Gadget Web Editing</h3></div></div></div><p>
			Edit it from the Web the imported Gadget to modify it:
		</p><div class="mediaobject"><img src="images/GadgetDevelopment/EditImportedOnline.png"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Gadgets-Gadget_IDE_Editing"/>5.1.6. Gadget IDE Editing</h3></div></div></div><p>
			Edit it from your IDE thanks to the WebDAV protocol:
		</p><div class="mediaobject"><img src="images/GadgetDevelopment/EditImportedWebDAV.png"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Gadgets-Dashboard_Viewing"/>5.1.7. Dashboard Viewing</h3></div></div></div><p>
			View it from the Dashboard when you drag and drop the Gadget from listing to the dashboard.
		</p><div class="mediaobject"><img src="images/GadgetDevelopment/Dashboard.png"/></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Setup_a_Gadget_Server"/>5.2. Setup a Gadget Server</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Setup_a_Gadget_Server-Virtual_servers_for_gadget_rendering"/>5.2.1. Virtual servers for gadget rendering</h3></div></div></div><p>
			GateIn 3.2 recommends using two virtual hosts for security. If the gadget is running on a different domain than the container (the website that 'contains' the app), it is unable to interfere with the portal by modifying code or cookies.
		</p><p>
			An example would hosting the portal from <span class="bold"><strong>http://www.sample.com</strong></span> and the gadgets from <span class="bold"><strong>http://www.samplemodules.com</strong></span>.
		</p><p>
			To do this, configure a parameter called <span class="emphasis"><em>gadgets.hostName</em></span>. The value is the <span class="emphasis"><em>path/to/gadgetServer</em></span> in <code class="literal">GadgetRegisteryService</code>:
		</p><pre class="programlisting">&lt;component&gt;
  &lt;key&gt;org.exoplatform.application.gadget.GadgetRegistryService&lt;/key&gt;
  &lt;type&gt;org.exoplatform.application.gadget.jcr.GadgetRegistryServiceImpl&lt;/type&gt;
  &lt;init-params&gt;
    &lt;value-param&gt;
      &lt;name&gt;gadgets.hostName&lt;/name&gt;
      &lt;description&gt;Gadget server url&lt;/description&gt;
      &lt;value&gt;http://localhost:8080/GateInGadgetServer/gadgets/&lt;/value&gt;
    &lt;/value-param&gt;
  &lt;/init-params&gt;
&lt;/component&gt;
</pre><p>
			It is also possible to have multiple rendering servers. This helps to balance the rendering load across multiple servers.
		</p><p>
			When deploying on the same server ensure the gadget initiates before anything that calls it (for example; the webapp <code class="literal">GateInGadgets</code> which uses <code class="literal">org.exoplatform.application.gadget.GadgetRegister</code>).
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Setup_a_Gadget_Server-Configuration"/>5.2.2. Configuration</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Configuration-Security_key"/>5.2.2.1. Security key</h4></div></div></div><p>
				A file called <span class="bold"><strong>key.txt</strong></span> has to be generated for every installation of GateIn 3.2 to be secure. This file contains a secret key used to encrypt the security token used for authenticating the user.
			</p><p>
				In Linux systems this file can be generated with:
			</p><pre class="programlisting"><code class="command">dd if=/dev/random bs=32 count=1 | openssl base64 &gt; /tmp/key.txt</code>
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Configuration-Gadget_proxy_and_concat_configuration"/>5.2.2.2. Gadget proxy and concat configuration</h4></div></div></div><p>
				These servers have to be on the same domain as the gadget server. You can configure the container in <code class="filename">eXoGadgetServer:/WEB-INF/classes/containers/default/container.js</code>.
			</p><pre class="programlisting">"gadgets.content-rewrite" : {
  "include-urls": ".*",
  "exclude-urls": "",
  "include-tags": ["link", "script", "embed", "img", "style"],
  "expires": "86400",
  "proxy-url": "http://localhost:8080/eXoGadgetServer/gadgets/proxy?url=",
  "concat-url": "http://localhost:8080/eXoGadgetServer/gadgets/concat?"
},
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Configuration-Proxy"/>5.2.2.3. Proxy</h4></div></div></div><p>
				To allow external gadgets when the server is behind a proxy, add the following code to the beginning of the JVM:
			</p><pre class="programlisting">-Dhttp.proxyHost=proxyhostURL -Dhttp.proxyPort=proxyPortNumber -Dhttp.proxyUser=someUserName -Dhttp.proxyPassword=somePassword
</pre></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Authentication_And_Identity"/>Chapter 6. Authentication and Identity</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration">6.1. Predefined User Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Overview">6.1.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_adding_users_groups_and_membership_types">6.1.2. Plugin for adding users, groups and membership types</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Membership_types">6.1.3. Membership types</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Groups">6.1.4. Groups</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Users">6.1.5. Users</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_monitoring_user_creation">6.1.6. Plugin for monitoring user creation</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration">6.2. Authentication Token Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration-What_is_token_service">6.2.1. What is Token Service?</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration-Implement_token_services_API">6.2.2. Implementing the Token Service API</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Authentication_Token_Configuration-Configure_token_services">6.2.3. Configuring token services</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-PicketLink_IDM_integration">6.3. PicketLink IDM integration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-PicketLink_IDM_integration-Configuration_files">6.3.1. Configuration files</a></span></dt></dl></dd><dt><span class="section"><a href="#sect-Reference_Guide-APIs-Organization_API">6.4. Organization API</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Accessing_User_Profile">6.5. Accessing User Profile</a></span></dt><dt><span class="section"><a href="#chap-Reference_Guide-SSO_Single_Sign_On">6.6. Single-Sign-On (SSO)</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-Overview">6.6.1. Overview</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-CAS_Central_Authentication_Service">6.6.2. Central Authentication Service (CAS)</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-JOSSO">6.6.3. JOSSO</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Single_Sign_On-OpenSSO_The_Open_Web_SSO_project">6.6.4. OpenSSO - The Open Web SSO project</a></span></dt><dt><span class="section"><a href="#Single_Sign_On-SPNEGO">6.6.5. SPNEGO</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration"/>6.1. Predefined User Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Overview"/>6.1.1. Overview</h3></div></div></div><p>
			To specify the initial Organization configuration, the content of <code class="literal">02portal.war:/WEB-INF/conf/organization/organization-configuration.xml </code> should be edited. This file uses the portal XML configuration schema. It lists several configuration plugins.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_adding_users_groups_and_membership_types"/>6.1.2. Plugin for adding users, groups and membership types</h3></div></div></div><p>
			The plugin of type <code class="literal">org.exoplatform.services.organization.OrganizationDatabaseInitializer</code> is used to specify a list of membership types, a list of groups, and a list of users to be created.
		</p><p>
			The <span class="bold"><strong>checkDatabaseAlgorithm</strong></span> initialization parameter determines how the database update is performed.
		</p><p>
			If its value is set to <span class="bold"><strong>entry</strong></span> it means that each user, group and membership listed in the configuration is checked each time GateIn 3.2 is started.
         If the entry doesn't yet exist in the database, it is created. If <span class="bold"><strong>checkDatabaseAlgorithm</strong></span> parameter value is set to <span class="bold"><strong>empty</strong></span>,
         the configuration data will be updated to the database only if the database is empty.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Membership_types"/>6.1.3. Membership types</h3></div></div></div><p>
			The predefined membership types are specified in the <span class="bold"><strong>membershipType</strong></span> field of the <span class="bold"><strong>OrganizationConfig</strong></span> plugin parameter.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
            See <code class="literal">02portal.war:/WEB-INF/conf/organization/organization-configuration.xml</code> for the full content.
         </p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;membershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$MembershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member&nbsp;membership&nbsp;type</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$MembershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">owner</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">owner&nbsp;membership&nbsp;type</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$MembershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">validator</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">validator&nbsp;membership&nbsp;type</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Groups"/>6.1.4. Groups</h3></div></div></div><p>
			The predefined groups are specified in the <span class="bold"><strong>group</strong></span> field of the <span class="bold"><strong>OrganizationConfig</strong></span> plugin parameter.
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$Group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;parentId&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hierachy</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">the&nbsp;/portal&nbsp;group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$Group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">community</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;parentId&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hierachy</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">the&nbsp;/portal/community&nbsp;group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Users"/>6.1.5. Users</h3></div></div></div><p>
			The predefined users are specified in the <span class="bold"><strong>membershipType</strong></span> field of the <span class="bold"><strong>OrganizationConfig</strong></span> plugin parameter.
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;user&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$User&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;email&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exoadmin@localhost</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;groups&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member:/admin,member:/user,owner:/portal/admin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$User&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">site</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">site</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;email&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo@localhost</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;groups&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member:/user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_monitoring_user_creation"/>6.1.6. Plugin for monitoring user creation</h3></div></div></div><p>
			The plugin of type <code class="literal">org.exoplatform.services.organization.impl.NewUserEventListener </code> specifies
         which groups all the newly created users should become members of. It specifies the groups and the memberships to use
         (while group is just a set of users, a membership type represents a user's role within a group).
         It also specifies a list of users that should not be processed (i.e. administrative users like 'root').
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>The terms 'membership' and 'membership type' refer to the same thing, and are used interchangeably.</p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">new.user.event.listener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">addListenerPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.organization.impl.NewUserEventListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">this&nbsp;listener&nbsp;assign&nbsp;group&nbsp;and&nbsp;membership&nbsp;to&nbsp;a&nbsp;new&nbsp;created&nbsp;user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">configuration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.impl.NewUserConfig&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.impl.NewUserConfig$JoinGroup&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;groupId&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;membership&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ignoredUser&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">company</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">community</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration"/>6.2. Authentication Token Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration-What_is_token_service"/>6.2.1. What is Token Service?</h3></div></div></div><p>
			<span class="emphasis"><em>Token Service</em></span> is used in authentication.
		</p><p>
			The token system prevents user account information being sent in clear text mode within inbound requests. This increases authentication security.
		</p><p>
			Token service allows administrators to create, delete, retrieve and clean tokens as required.
         The service also defines a validity period of any given token. The token becomes invalid once this period expires.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration-Implement_token_services_API"/>6.2.2. Implementing the Token Service API</h3></div></div></div><p>
			All token services used in GateIn 3.2 authentication must be implemented by subclassing an <span class="bold"><strong>AbstractTokenService</strong></span> abstract class.
         The following <span class="bold"><strong>AbstractTokenService</strong></span> methods represent the contract between authentication runtime, and a token service implementation.
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Token</span><span class="java_plain">&nbsp;getToken</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PathNotFoundException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">RepositoryException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Token</span><span class="java_plain">&nbsp;deleteToken</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PathNotFoundException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">RepositoryException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getAllTokens</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;getNumberTokens</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;createToken</span><span class="java_separator">(</span><span class="java_type">Credentials</span><span class="java_plain">&nbsp;credentials</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">IllegalArgumentException</span><span class="java_separator">,</span><span class="java_type">NullPointerException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Credentials</span><span class="java_plain">&nbsp;validateToken</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;tokenKey</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;remove</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">NullPointerException</span><span class="java_separator">;</span>
</pre><p>
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration-Configure_token_services"/>6.2.3. Configuring token services</h3></div></div></div><p>
			Token services configuration includes specifying the token validity period. The token service is configured as a portal component (in portal scope, as opposed to root scope - more about that in Foundations chapter).
		</p><p>
			In the example below, <span class="emphasis"><em>CookieTokenService</em></span> is a subclass of <span class="bold"><strong>AbstractTokenService</strong></span> so it has a property which specifies the validity period of the token.
		</p><p>
			The token service will initialize this validity property by looking for an <em class="parameter"><code>init-param</code></em> named <span class="bold"><strong>service.configuration</strong></span>.
		</p><p>
			This property must have three values.
		</p><div class="programlistingco"><pre class="programlisting">&lt;component&gt;
  &lt;key&gt;org.exoplatform.web.security.security.CookieTokenService&lt;/key&gt;
  &lt;type&gt;org.exoplatform.web.security.security.CookieTokenService&lt;/type&gt;
  &lt;init-params&gt;
  	&lt;values-param&gt;
      &lt;name&gt;service.configuration&lt;/name&gt;
      &lt;value&gt;j<span xmlns="" class="co" id="area-Reference_Guide-Authentication_Token_Configuration-Configure_token_services-name"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>cr-token&lt;/value&gt;
      &lt;value&gt;7<span xmlns="" class="co" id="area-Reference_Guide-Authentication_Token_Configuration-Configure_token_services-time"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>&lt;/value&gt;
      &lt;value&gt;D<span xmlns="" class="co" id="area-Reference_Guide-Authentication_Token_Configuration-Configure_token_services-unit"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>AY&lt;/value&gt;
    &lt;/values-param&gt;    	
  &lt;/init-params&gt;
&lt;/component&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
						Service name
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
						Amount of time
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
						Unit of time
					</p></td></tr></table></div></div><p>
			In this case, the service name is <span class="bold"><strong>jcr-token</strong></span> and the token expiration time is one week.
		</p><p>
			GateIn 3.2 supports <span class="emphasis"><em>four</em></span> time units:
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>
					<em class="parameter"><code>SECOND</code></em>
				</p></li><li><p>
					<em class="parameter"><code>MINUTE</code></em>
				</p></li><li><p>
					<em class="parameter"><code>HOUR</code></em>
				</p></li><li><p>
					<em class="parameter"><code>DAY</code></em>
				</p></li></ol></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-PicketLink_IDM_integration"/>6.3. PicketLink IDM integration</h2></div></div></div><p>
		GateIn 3.2 uses PicketLink IDM component to keep the necessary identity information (users, groups, memberships, etc.).
      While legacy interfaces are still used (org.exoplatform.services.organization) for identity management,
      there is a wrapper implementation that delegates to PicketLink IDM framework.
	</p><p>
		This section doesn't provide information about PicketLink IDM and its configuration. Please, refer to the appropriate project documentation (<a class="ulink" href="http://jboss.org/picketlink/IDM.html">http://jboss.org/picketlink/IDM.html</a>) for further information.
	</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
			It is important to fully understand the concepts behind this framework design before changing the default configuration.
		</p></div><p>
		The identity model represented in '<span class="bold"><strong>org.exoplatform.services.organization</strong></span>' interfaces and the one used in <span class="bold"><strong>PicketLink IDM</strong></span> have some major differences.
	</p><p>TODO: tell more about org.exoplatform.services.organization</p><p>
		For example: <span class="bold"><strong>PicketLink IDM</strong></span> provides greater abstraction. It is possible for groups in <span class="bold"><strong>IDM</strong></span> framework to form memberships with many parents (which requires recursive ID translation),
      while GateIn model allows only pure tree-like membership structures.
	</p><p>
		Additionally, GateIn <span class="emphasis"><em>membership</em></span> concept needs to be translated into the IDM <span class="emphasis"><em>Role</em></span> concept. Therefore <span class="bold"><strong>PicketLink IDM</strong></span> model is used in a limited way. All these translations are applied by the integration layer.
	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-PicketLink_IDM_integration-Configuration_files"/>6.3.1. Configuration files</h3></div></div></div><p>
			The main configuration file is <span class="bold"><strong>idm-configuration.xml</strong></span>:
		</p><div class="programlistingco"><pre class="programlisting">&lt;configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.exoplaform.org/xml/ns/kernel_1_0.xsd http://www.exoplaform.org/xml/ns/kernel_1_0.xsd"
               xmlns="http://www.exoplaform.org/xml/ns/kernel_1_0.xsd"&gt;
 
   &lt;component&gt;<span xmlns="" class="co" id="area-Reference_Guide-PicketLink_IDM_integration-Configuration_files-JBossIDMServiceImpl"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>
        &lt;key&gt;org.exoplatform.services.organization.idm.PicketLinkIDMService&lt;/key&gt;
      &lt;type&gt;org.exoplatform.services.organization.idm.PicketLinkIDMServiceImpl&lt;/type&gt;
      &lt;init-params&gt;
         &lt;value-param&gt;
            &lt;name&gt;config&lt;/name&gt;
            &lt;value&gt;war:/conf/organization/idm-config.xml&lt;/value&gt;
         &lt;/value-param&gt;
         &lt;value-param&gt;
            &lt;name&gt;portalRealm&lt;/name&gt;
            &lt;value&gt;realm${container.name.suffix}&lt;/value&gt;
         &lt;/value-param&gt;
       &lt;/init-params&gt;
   &lt;/component&gt;
 
 
   &lt;component&gt;
      &lt;key&gt;org<span xmlns="" class="co" id="area-Reference_Guide-PicketLink_IDM_integration-Configuration_files-JBossIDMOrganizationServiceImpl"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>.exoplatform.services.organization.OrganizationService&lt;/key&gt;
      &lt;type&gt;org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl&lt;/type&gt;
      &lt;init-params&gt;
      &lt;object-param&gt;
        &lt;name&gt;configuration&lt;/name&gt;
        &lt;object type="org.exoplatform.services.organization.idm.Config"&gt;
          &lt;field name="useParentIdAsGroupType"&gt;
            &lt;boolean&gt;true&lt;/boolean&gt;
          &lt;/field&gt;
 
          &lt;field name="forceMembershipOfMappedTypes"&gt;
            &lt;boolean&gt;true&lt;/boolean&gt;
          &lt;/field&gt;
 
          &lt;field name="pathSeparator"&gt;
            &lt;string&gt;.&lt;/string&gt;
          &lt;/field&gt;
 
          &lt;field name="rootGroupName"&gt;
            &lt;string&gt;GTN_ROOT_GROUP&lt;/string&gt;
          &lt;/field&gt;
 
          &lt;field name="groupTypeMappings"&gt;
            &lt;map type="java.util.HashMap"&gt;
              &lt;entry&gt;
                &lt;key&gt;&lt;string&gt;/&lt;/string&gt;&lt;/key&gt;
                &lt;value&gt;&lt;string&gt;root_type&lt;/string&gt;&lt;/value&gt;
              &lt;/entry&gt;
 
              &lt;!-- Sample mapping --&gt;
              &lt;!--
              &lt;entry&gt;
                &lt;key&gt;&lt;string&gt;/platform/*&lt;/string&gt;&lt;/key&gt;
                &lt;value&gt;&lt;string&gt;platform_type&lt;/string&gt;&lt;/value&gt;
              &lt;/entry&gt;
              &lt;entry&gt;
                &lt;key&gt;&lt;string&gt;/organization/*&lt;/string&gt;&lt;/key&gt;
                &lt;value&gt;&lt;string&gt;organization_type&lt;/string&gt;&lt;/value&gt;
              &lt;/entry&gt;
              --&gt;
 
            &lt;/map&gt;
          &lt;/field&gt;
 
          &lt;field name="associationMembershipType"&gt;
            &lt;string&gt;member&lt;/string&gt;
          &lt;/field&gt;
 
          &lt;field name="ignoreMappedMembershipType"&gt;
            &lt;boolean&gt;false&lt;/boolean&gt;
          &lt;/field&gt;
        &lt;/object&gt;
      &lt;/object-param&gt;
    &lt;/init-params&gt;
 
 
   &lt;/component&gt;
 
&lt;/configuration&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
						The <span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMServiceImpl</strong></span> service has the following options:
					</p><div class="variablelist"><dl><dt><span class="term">config</span></dt><dd><p>
								(value-param)
							</p><p>
								PicketLink IDM configuration file
							</p></dd><dt><span class="term">hibernate.properties</span></dt><dd><p>
								(properties-param)
							</p><p>
								A list of hibernate properties used to create SessionFactory that will be injected to JBoss Identity IDM configuration registry.
							</p></dd><dt><span class="term">hibernate.annotations</span></dt><dd><p>
								A list of annotated classes that will be added to Hibernate configuration.
							</p></dd><dt><span class="term">hibernate.mappings</span></dt><dd><p>
								A list of xml files that will be added to hibernate configuration as mapping files.
							</p></dd><dt><span class="term">jndiName</span></dt><dd><p>
								(value-param)
							</p><p>
								If the 'config' parameter is not provided, this parameter will be used to perform JNDI lookup for IdentitySessionFactory
							</p></dd><dt><span class="term">portalRealm</span></dt><dd><p>
								(value-param)
							</p><p>
								The realm name that should be used to obtain proper IdentitySession. The default is 'PortalRealm'.
							</p></dd></dl></div></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
						The <span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl</strong></span>
            key is a main entrypoint implementing <span class="bold"><strong>org.exoplatform.services.organization.OrganizationService</strong></span>
            and is dependant on <span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMService</strong></span>
					</p><p>
						<span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl</strong></span>
            service has the following options defined as fields of object-param of type
            <span class="bold"><strong>org.exoplatform.services.organization.idm.Config</strong></span>:
					</p><div class="variablelist"><dl><dt><span class="term">defaultGroupType</span></dt><dd><p>
								The name of the PicketLink IDM GroupType that will be used to store groups. The default is 'GTN_GROUP_TYPE'.
							</p></dd><dt><span class="term">rootGroupName</span></dt><dd><p>
									 The name of the PicketLink IDM Group that will be used as a root parent. The default is 'GTN_ROOT_GROUP'
								</p></dd><dt><span class="term">passwordAsAttribute</span></dt><dd><p>
									This parameter specifies if a password should be stored using PicketLink IDM Credential object or as a plain attribute. The default is false.
								</p></dd><dt><span class="term">useParentIdAsGroupType</span></dt><dd><p>
								This parameter stores the parent ID path as a group type in PicketLink IDM for any IDs not mapped with a specific type in 'groupTypeMappings'.
                        If this option is set to false, and no mappings are provided under 'groupTypeMappings', then only one group with the given name can exist in the GateIn 3.2 group tree.
							</p></dd><dt><span class="term">pathSeparator</span></dt><dd><p>
									When 'userParentIdAsGroupType is set to true, this value will be used to replace all "/" characters in IDs. The "/" character is not allowed to be used in group type name in PicketLink IDM.
								</p></dd><dt><span class="term">associationMembershipType</span></dt><dd><p>
									If this option is used, then each Membership, created with MembrshipType that is equal to the value specified here, will be stored in PicketLink IDM as simple Group-User association.
								</p></dd><dt><span class="term">groupTypeMappings</span></dt><dd><p>
									This parameter maps groups added with GateIn 3.2 API as children of a given group ID, and stores them with a given group type name in PicketLink IDM.
								</p><p>
									If the parent ID ends with "/*", then all child groups will have the mapped group type. Otherwise, only direct (first level) children will use this type. 
								</p><p>
									This can be leveraged by LDAP if LDAP DN is configured in PicketLink IDM to only store a specific group type. This will then store the given branch in GateIn 3.2 group tree, while all other groups will remain in the database.
								</p></dd><dt><span class="term">forceMembershipOfMappedTypes</span></dt><dd><p>
									Groups stored in PicketLink IDM with a type mapped in 'groupTypeMappings' will automatically be members under the mapped parent. Group relationships linked by PicketLink IDM group association will not be necessary.
								</p><p>
									This parameter can be set to false if all groups are added via GateIn 3.2 APIs. This may be useful with LDAP configuration as, when set to true, it will make every entry added to LDAP appear in GateIn 3.2. This, however, is not true for entries added via GateIn 3.2 management UI.
								</p></dd><dt><span class="term">ignoreMappedMembershipType</span></dt><dd><p>
									If "associationMembershipType" option is used, and this option is set to true, then Membership with MembershipType configured to be stored as PicketLink IDM association will not be stored as PicketLink IDM Role.
								</p></dd></dl></div><p>
						Additionally, <span class="bold"><strong>JBossIDMOrganizationServiceImpl</strong></span> uses those defaults to perform identity management operations
					</p><div class="itemizedlist"><ul><li><p>
								GateIn 3.2 User interface properties fields are persisted in JBoss Identity IDM using those attributes names: firstName, lastName, email, createdDate, lastLoginTime, organizationId, password (if password is configured to be stored as attribute)
							</p></li><li><p>
								GateIn 3.2 Group interface properties fields are persisted in JBoss Identity IDM using those attributes names: label, description
							</p></li><li><p>
								GateIn 3.2 MembershipType interface properties fields are persisted in JBoss Identity IDM using those RoleType properties: description, owner, create_date, modified_date
							</p></li></ul></div></td></tr></table></div></div><p>
			A sample <span class="bold"><strong>PicketLink IDM</strong></span> configuration file is shown below. To understand all the options it contains, please refer to the PicketLink IDM Reference Guide
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jboss-identity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;urn:jboss:identity:idm:config:v1_0_beta&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;urn:jboss:identity:idm:config:v1_0_alpha&nbsp;identity-config.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">realms</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">realm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PortalRealm</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repository-id-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PortalRepository</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repository-id-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-type-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">user-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">USER</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">user-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-type-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">realm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">realms</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repositories</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repository</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PortalRepository</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.identity.idm.impl.repository.WrapperIdentityStoreRepository</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">external-config</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">default-identity-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">HibernateStore</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">default-identity-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">default-attribute-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">HibernateStore</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">default-attribute-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repository</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repositories</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute-stores</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-store</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">HibernateStore</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.identity.idm.impl.store.hibernate.HibernateIdentityStoreImpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">external-config</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">supported-relationship-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">JBOSS_IDENTITY_MEMBERSHIP</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">JBOSS_IDENTITY_ROLE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">supported-relationship-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">supported-identity-object-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-object-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">USER</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">relationships</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">credentials</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">credential-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PASSWORD</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">credential-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">credentials</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attributes</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">options</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-object-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">supported-identity-object-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">options</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernateSessionFactoryRegistryName</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernateSessionFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">allowNotDefinedIdentityObjectTypes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">populateRelationshipTypes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">populateIdentityObjectTypes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">allowNotDefinedAttributes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">isRealmAware</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">options</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-store</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jboss-identity</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-APIs-Organization_API"/>6.4. Organization API</h2></div></div></div><p>
		The
		<code class="literal">exo.platform.services.organization</code>
		package has five main components: user, user profile, group,
		membership type and membership.
		There is an additional component that serves as an entry point into
		Organization API -
		<code class="literal">OrganizationService</code>
		component,
		that provides handling functionality for the five components.
	</p><p>
		</p><div class="mediaobject" align="center"><img src="images/AuthenticationAndIdentity/OrganizationServiceClassDiagram.png" align="middle"/></div><p>
	</p><p>
		The
		<code class="literal">User</code>
		component contains basic information about a user - such as
		username, password, first name, last name, and email. The
		<code class="literal">User Profile</code>
		component contains extra information about a user, such as user's
		personal information, and business information.
		You can also add additional information about a user if your application
		requires it.
		The
		<code class="literal">Group</code>
		component contains a group graph. The
		<code class="literal">Membership Type</code>
		component
		contains a list of predefined membership types.
		Finally, the
		<code class="literal">Membership</code>
		component connects a User, a Group and a Membership Type.
	</p><p>
		A user can have one or more memberships within a group, for example:
		user A can have the 'member' and 'admin' memberships in group /user.
		A user belongs to a group if he has at least one membership in that
		group.
      </p><p>
		Exposing the Organization API to developers the OrganizationService component
		provides developers with access
		to handler objects for managing each of the five components -
		UserHandler, UserProfileHandler, GroupHandler, MembershipTypeHandler,
		and MembershipHandler.
      </p><p>
		The five central API components are really designed like persistent
		entities, and handlers are really specified like data access objects
		(DAO).
      </p><p>
		Organization API simply describes a contract, meaning it is not a concrete
		implementation. The described components are interfaces,
		allowing for different concrete implementations. In practial terms that means,
		you can replace the existing implementation with a different one.
	</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Accessing_User_Profile"/>6.5. Accessing User Profile</h2></div></div></div><p>
		The following code retrieves the details for a logged-in user:
	</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Alternative</span><!-- <br/> --><span class="java_plain">&nbsp;context</span><!-- <br/> --><span class="java_operator">:</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">WebuiRequestContext</span><!-- <br/> --><span class="java_plain">&nbsp;context&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">WebuiRequestContext</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getCurrentInstance</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_type">PortalRequestContext</span><span class="java_plain">&nbsp;context&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">PortalRequestContext</span><span class="java_separator">.</span><span class="java_plain">getCurrentInstance</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Get</span><span class="java_plain">&nbsp;the&nbsp;id&nbsp;of&nbsp;the&nbsp;user&nbsp;logged</span>
<!--  --><br/><span class="java_type">String</span><span class="java_plain">&nbsp;userId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;context</span><span class="java_separator">.</span><span class="java_plain">getRemoteUser</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Request</span><span class="java_plain">&nbsp;the&nbsp;information&nbsp;from&nbsp;</span><span class="java_type">OrganizationService</span><span class="java_operator">:</span>
<!--  --><br/><span class="java_type">OrganizationService</span><span class="java_plain">&nbsp;orgService&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getApplicationComponent</span><span class="java_separator">(</span><span class="java_type">OrganizationService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">userId&nbsp;</span><span class="java_operator">!=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;orgService</span><span class="java_separator">.</span><span class="java_plain">getUserHandler</span><span class="java_separator">().</span><span class="java_plain">findUserByName</span><span class="java_separator">(</span><span class="java_plain">userId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">user&nbsp;</span><span class="java_operator">!=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getFirstName</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getLastName</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;email&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getEmail</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><p>
		Below are two alternatives for retrieving the Organization Service:
	</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_plain">&nbsp;service&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">ExoContainerContext</span><span class="java_separator">.</span><span class="java_plain">getCurrentContainer</span><span class="java_separator">().</span><span class="java_plain">getComponentInstanceOfType</span><span class="java_separator">(</span><span class="java_type">OrganizationService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
</pre></li><li><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_plain">&nbsp;service&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">PortalContainer</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">().</span><span class="java_plain">getComponentInstanceOfType</span><span class="java_separator">(</span><span class="java_type">OrganizationService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
</pre></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-SSO_Single_Sign_On"/>6.6. Single-Sign-On (SSO)</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-Overview"/>6.6.1. Overview</h3></div></div></div><p>
			GateIn 3.2 provides some form of Single Sign On (<code class="literal">SSO</code>) as an integration and aggregation platform.
		</p><p>
			When logging into the portal users gain access to many systems through portlets using a single identity. In many cases, however, the portal infrastructure must be integrated with other SSO enabled systems. There are many different Identity Management solutions available. In most cases each SSO framework provides a unique way to plug into a Java EE application.
		</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Overview_of_SSO-Prerequisite"/>6.6.1.1. Prerequisites</h4></div></div></div><p>
				In this tutorial, the SSO server is installed in a Tomcat installation. Tomcat can be obtained from <a class="ulink" href="http://tomcat.apache.org">http://tomcat.apache.org</a>.
			</p><p>
				All the packages required for setup can be found in a zip file located at: <a class="ulink" href="https://repository.jboss.org/nexus/content/groups/public/org/gatein/sso/sso-packaging/1.0.1-GA/sso-packaging-1.0.1-GA.zip">https://repository.jboss.org/nexus/content/groups/public/org/gatein/sso/sso-packaging/1.0.1-GA/sso-packaging-1.0.1-GA.zip</a>. In this document we will call $GATEIN_SSO_HOME the directory where the file is extracted.
			</p><p>
				Users are advised to not run any portal extensions that could override the data when manipulating the <code class="filename">gatein.ear</code> file directly.
			</p><p>
				Remove <code class="literal">$JBOSS_HOME/server/default/deploy/gatein-sample-extension.ear</code> and <code class="literal">$JBOSS_HOME/server/default/deploy/gatein-sample-portal.ear</code> which are packaged by default with GateIn 3.2.
			</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-CAS_Central_Authentication_Service"/>6.6.2. Central Authentication Service (CAS)</h3></div></div></div><p>
			This Single Sign On plugin enables seamless integration between GateIn 3.2 and the CAS Single Sign On Framework. Details about CAS can be found <a class="ulink" href="http://www.ja-sig.org/products/cas/">here</a>.
		</p><p>
			The integration consists of two parts; the first part consists of installing or configuring a CAS server, the second part consists of setting up the portal to use the CAS server.
		</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-CAS_Central_Authentication_Service-CAS_server"/>6.6.2.1. CAS server</h4></div></div></div><p>
				First, set up the server to authenticate against the portal login module. In this example the CAS server will be installed on Tomcat.
			</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-CAS_server-Obtaining_CAS"/>6.6.2.1.1. Obtaining CAS</h5></div></div></div><p>
					CAS can be downloaded from <a class="ulink" href="http://www.jasig.org/cas/download">http://www.jasig.org/cas/download</a>.
				</p><p>
					Extract the downloaded file into a suitable location. This location will be referred to as <code class="literal">$CAS_HOME</code> in the following example.
				</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-CAS_server-Modifying_CAS_server"/>6.6.2.1.2. Modifying the CAS server</h5></div></div></div><p>
					To configure the web archive as desired, the simplest way is to make the necessary changes directly in CAS codebase.
				</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                  To complete these instructions, and perform the final build step, you will need the Apache Maven 2.
                  You can get it <a class="ulink" href="http://maven.apache.org/download.html">here</a>.
               </p></div><p>
					First, we need to change the default authentication handler with the one provided by GateIn 3.2.
				</p><p>
					The CAS Server Plugin makes secure authentication callbacks to a RESTful service installed on the remote GateIn server in order to authenticate a user.
				</p><p>
					In order for the plugin to function correctly, it needs to be properly configured to connect to this service. This configuration is done via the <code class="filename">cas.war/WEB-INF/deployerConfigContext.xml </code> file.
				</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
							Open <code class="filename">CAS_HOME/cas-server-webapp/src/main/webapp/WEB-INF/deployerConfigContext.xml</code>
						</p></li><li><p>
							Replace:
</p><pre class="programlisting"> &lt;!--
  | Whereas CredentialsToPrincipalResolvers identify who it is some Credentials might authenticate, 
  | AuthenticationHandlers actually authenticate credentials.  Here e declare the AuthenticationHandlers that
  | authenticate the Principals that the CredentialsToPrincipalResolvers identified.  CAS will try these handlers in turn
  | until it finds one that both supports the Credentials presented and succeeds in authenticating.
  +--&gt;
 &lt;property name="authenticationHandlers"&gt;
   &lt;list&gt;
     &lt;!--
      | This is the authentication handler that authenticates services by means of callback via SSL, thereby validating
      | a server side SSL certificate.
      +--&gt;
     &lt;bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
           p:httpClient-ref="httpClient" /&gt;
     &lt;!--
      | This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS 
      | into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials
      | where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your
      | local authentication strategy.  You might accomplish this by coding a new such handler and declaring
      | edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.
      +--&gt;
     <span class="bold"><strong>&lt;bean
        class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" /&gt;</strong></span>
   &lt;/list&gt;
 &lt;/property&gt;
</pre><p>
						</p></li><li><p>
							With the following (Make sure to set the host, port and context with the values corresponding to your portal). Also available in <code class="filename">GATEIN_SSO_HOME/cas/plugin/WEB-INF/deployerConfigContext.xml</code>.
						</p><p>

</p><pre class="programlisting">&lt;!--
 | Whereas CredentialsToPrincipalResolvers identify who it is some Credentials might authenticate, 
 | AuthenticationHandlers actually authenticate credentials.  Here we declare the AuthenticationHandlers that
 | authenticate the Principals that the CredentialsToPrincipalResolvers identified.  CAS will try these handlers in turn
 | until it finds one that both supports the Credentials presented and succeeds in authenticating.
 +--&gt;
 &lt;property name="authenticationHandlers"&gt;
   &lt;list&gt;
     &lt;!--
      | This is the authentication handler that authenticates services by means of callback via SSL, thereby validating
      | a server side SSL certificate.
      +--&gt;
     &lt;bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
           p:httpClient-ref="httpClient" /&gt;
     &lt;!--
      | This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS 
      | into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials
      | where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your
      | local authentication strategy.  You might accomplish this by coding a new such handler and declaring
      | edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.
      +--&gt;
     &lt;!-- Integrates with the Gatein Authentication Service to perform authentication --&gt;
     &lt;!--
      | Note: Modify the Plugin Configuration based on the actual information of a GateIn instance.
      | The instance can be anywhere on the internet...Not necessarily on localhost where CAS is running 
      +--&gt;
     <span class="bold"><strong>&lt;bean class="org.gatein.sso.cas.plugin.AuthenticationPlugin"&gt;
        &lt;property name="gateInHost"&gt;&lt;value&gt;localhost&lt;/value&gt;&lt;/property&gt;
        &lt;property name="gateInPort"&gt;&lt;value&gt;8080&lt;/value&gt;&lt;/property&gt;
        &lt;property name="gateInContext"&gt;&lt;value&gt;portal&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;</strong></span>
   &lt;/list&gt;
 &lt;/property&gt;
</pre><p>
						</p></li><li><p>
							Copy <code class="filename">GATEIN_SSO_HOME/cas/plugin/WEB-INF/lib/sso-cas-plugin-&lt;VERSION&gt;.jar</code> and <code class="filename">GATEIN_SSO_HOME/cas/plugin/WEB-INF/lib/commons-httpclient-&lt;VERSION&gt;.jar</code> into the <code class="filename">CAS_HOME/cas-server-webapp/src/main/webapp/WEB-INF/lib</code> created directory.
						</p></li><li><p>
							Get an installation of Tomcat and extract it into a suitable location (which will be called <code class="filename">TOMCAT_HOME</code> for these instructions). 
						</p><p>
							Change the default port to avoid a conflict with the default GateIn 3.2 (for testing purposes). Edit <code class="filename">TOMCAT_HOME/conf/server.xml</code> and replace the 8080 port to 8888.
							</p><div class="note"><h2>Note</h2><p>
									If GateIn 3.2 is running on the same machine as Tomcat, other ports need to be changed in addition to 8080 in order to avoid port conflicts.
                           They can be changed to any free port. For example, you can change admin port from 8005 to 8805, and AJP port from 8009 to 8809.
								</p></div><p>
						</p></li><li><p>
							Go to <code class="filename">CAS_HOME/cas-server-webapp</code> and execute the command:
</p><pre class="programlisting">mvn install
</pre><p>
						</p></li><li><p>
							Copy <code class="filename">CAS_HOME/cas-server-webapp/target/cas.war</code> into <code class="filename">TOMCAT_HOME/webapps</code>.
						</p><p>
							Tomcat should start and be accessible at <a class="ulink" href="http://localhost:8888/cas">http://localhost:8888/cas</a>. Note that at this stage login won't be available.
						</p><div class="mediaobject"><img src="images/AuthenticationAndIdentity/SSO/cas.png"/></div></li></ol></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
				  By default on logout the CAS server will display the CAS logout page with a link to return to the portal. To make the CAS server redirect to the portal page after a logout, modify the 
                                  <code class="filename">cas.war/WEB-INF/cas-servlet.xml</code> to include the follow line :
				</p><pre class="programlisting">
		&lt;bean id="logoutController" class="org.jasig.cas.web.LogoutController"
                  p:centralAuthenticationService-ref="centralAuthenticationService"
                  p:logoutView="casLogoutView"
                  p:warnCookieGenerator-ref="warnCookieGenerator"
                  p:ticketGrantingTicketCookieGenerator-ref="ticketGrantingTicketCookieGenerator"
                <span class="bold"><strong>p:followServiceRedirects="true"/&gt;</strong></span>

				</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-CAS_Central_Authentication_Service-Setup_the_CAS_client"/>6.6.2.2. Setup the CAS client</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
						Copy all libraries from <code class="filename">GATEIN_SSO_HOME/cas/gatein.ear/lib</code> into <code class="filename">JBOSS_HOME/server/default/deploy/gatein.ear/lib</code> (Or in Tomcat, into $<code class="filename">GATEIN_HOME/lib</code>)
					</p></li><li><div class="itemizedlist"><ul><li><p>
							In JBoss AS, edit <code class="filename">gatein.ear/META-INF/gatein-jboss-beans.xml</code> and uncomment this section:
							</p><pre class="programlisting">&lt;authentication&gt;
  &lt;login-module code="org.gatein.sso.agent.login.SSOLoginModule" flag="required"&gt;
  &lt;/login-module&gt;      
  &lt;login-module code="org.exoplatform.services.security.j2ee.JbossLoginModule" flag="required"&gt;
    &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
    &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
  &lt;/login-module&gt;
&lt;/authentication&gt;
</pre></li><li><p>
							In Tomcat, edit <code class="filename">GATEIN_HOME/conf/jaas.conf</code> and uncomment this section:
							</p><pre class="programlisting">org.gatein.sso.agent.login.SSOLoginModule required;
org.exoplatform.services.security.j2ee.TomcatLoginModule required
portalContainerName=portal
realmName=gatein-domain;
</pre></li></ul></div></li><li><p>
						The installation can be tested at this point:
					</p><div class="procedure"><ol class="1"><li><p>
								Start (or restart) GateIn 3.2, and (assuming the CAS server on Tomcat is running) direct your browser to <a class="ulink" href="http://localhost:8888/cas">http://localhost:8888/cas</a>.
							</p></li><li><p>
								Login with the username <code class="literal">root</code> and the password <code class="literal">gtn</code> (or any account created through the portal).
							</p></li></ol></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-CAS_Central_Authentication_Service-Redirect_to_CAS"/>6.6.2.3. Redirect to CAS</h4></div></div></div><p>
				To utilize the Central Authentication Service, GateIn 3.2 needs to redirect all user authentication to the CAS server.
			</p><p>
				Information about where the CAS is hosted must be properly configured within the GateIn 3.2 instance. The required configuration is done by modifying three files:
				</p><div class="itemizedlist"><ul><li><p>
						In the <code class="filename">gatein.ear/web.war/groovy/groovy/webui/component/UIBannerPortlet.gtml</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a class="Login" onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a class="Login" href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;

</pre><p>
						</p></li><li><p>
						In the <code class="filename">gatein.ear/web.war/groovy/portal/webui/component/UILogoPortlet.gtmpl</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt; 

</pre><p>
						</p></li><li><p>
							Replace the entire contents of <code class="filename">gatein.ear/02portal.war/login/jsp/login.jsp</code> with:
						</p><pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;script type="text/javascript"&gt;
     window.location = '/portal/sso';
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></li><li><p>
							Add the following Filters at the top of the filter chain in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>:


</p><pre class="programlisting">

	&lt;filter&gt;
		&lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
		&lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
		&lt;init-param&gt;                                 
		  &lt;!-- This should point to your SSO authentication server --&gt;                                                                                              
		  &lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;   
		  &lt;!--
		      If casRenewTicket param value of InitiateLoginServlet is:  not specified or false
		  --&gt;
		  &lt;param-value&gt;http://localhost:8888/cas/login?service=http://localhost:8080/portal/initiatessologin&lt;/param-value&gt;
		  &lt;!--
		      If casRenewTicket param value of InitiateLoginServlet is : true
		  --&gt;
		  &lt;!--
		  &lt;param-value&gt;http://localhost:8888/cas/login?service=http://localhost:8080/portal/initiatessologin&amp;amp;renew=true&lt;/param-value&gt;      		  
		  --&gt;
		&lt;/init-param&gt;
	&lt;/filter&gt;
	&lt;filter&gt;
		&lt;filter-name&gt;CASLogoutFilter&lt;/filter-name&gt;                                                                                              
		&lt;filter-class&gt;org.gatein.sso.agent.filter.CASLogoutFilter&lt;/filter-class&gt;                                                      
		&lt;init-param&gt;                                 
		  &lt;!-- This should point to your JOSSO authentication server --&gt;                                                                                              
		  &lt;param-name&gt;LOGOUT_URL&lt;/param-name&gt;                                                                                                
		  &lt;param-value&gt;http://localhost:8888/cas/logout&lt;/param-value&gt;                                                                                                         
		&lt;/init-param&gt;                                                                                                                              
	&lt;/filter&gt;
	&lt;filter&gt;
		&lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
		&lt;filter-class&gt;org.gatein.sso.agent.filter.InitiateLoginFilter&lt;/filter-class&gt;
		&lt;init-param&gt;
		  &lt;param-name&gt;ssoServerUrl&lt;/param-name&gt;
		  &lt;param-value&gt;http://localhost:8888/cas&lt;/param-value&gt;
		&lt;/init-param&gt;    
		&lt;init-param&gt;
		  &lt;param-name&gt;casRenewTicket&lt;/param-name&gt;
		  &lt;param-value&gt;false&lt;/param-value&gt;
		&lt;/init-param&gt;
		&lt;init-param&gt;
		  &lt;param-name&gt;casServiceUrl&lt;/param-name&gt;
		  &lt;param-value&gt;http://localhost:8080/portal/initiatessologin&lt;/param-value&gt;
		&lt;/init-param&gt;
		&lt;init-param&gt;
		  &lt;param-name&gt;loginUrl&lt;/param-name&gt;
		  &lt;param-value&gt;http://localhost:8080/portal/dologin&lt;/param-value&gt;
		&lt;/init-param&gt;
	&lt;/filter&gt;
	
	&lt;!-- Mapping the filters at the very top of the filter chain --&gt;
	&lt;filter-mapping&gt;
	  &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
	  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;	         
	&lt;/filter-mapping&gt;
	&lt;filter-mapping&gt;
	  &lt;filter-name&gt;CASLogoutFilter&lt;/filter-name&gt;
	  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
	&lt;/filter-mapping&gt;
        &lt;filter-mapping&gt;
          &lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
          &lt;url-pattern&gt;/initiatessologin&lt;/url-pattern&gt;
        &lt;/filter-mapping&gt;
  
</pre><p>
						</p></li></ul></div><p>
			</p><p>
				Once these changes have been made, all links to the user authentication pages will redirect to the CAS centralized authentication form.
			</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-JOSSO"/>6.6.3. JOSSO</h3></div></div></div><p>
			This Single Sign On plugin enables seamless integration between GateIn 3.2 and the JOSSO Single Sign On Framework. Details about JOSSO can be found <a class="ulink" href="http://www.josso.org">here</a>.
		</p><p>
			Setting up this integration involves two steps. The first step is to install or configure a JOSSO server, and the second is to set up the portal to use the JOSSO server.
		</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JOSSO-JOSSO_server"/>6.6.3.1. JOSSO server</h4></div></div></div><p>
				This section details setting up the JOSSO server to authenticate against the GateIn 3.2 login module.
			</p><p>
				In this example the JOSSO server will be installed on Tomcat.
			</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JOSSO_server-Obtaining_JOSSO"/>6.6.3.1.1. Obtaining JOSSO</h5></div></div></div><p>
					JOSSO can be downloaded from <a class="ulink" href="http://sourceforge.net/projects/josso/files/">http://sourceforge.net/projects/josso/files/</a>. Use the package that embeds Apache Tomcat.
				</p><p>
					Once downloaded, extract the package into what will be called <code class="filename">JOSSO_HOME</code> in this example.
				</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>The steps described later are only correct in case of JOSSO v.1.8.1.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JOSSO_server-Modifying_JOSSO_server"/>6.6.3.1.2. Modifying the JOSSO server</h5></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
							Copy the files from <code class="filename">GATEIN_SSO_HOME/josso/plugin</code> into the Tomcat directory (<code class="filename">JOSSO_HOME</code>).
						</p><p>
							This action should replace or add the following files to the <code class="filename">JOSSO_HOME/webapps/josso/WEB-INF/lib</code> directory:
						</p><div class="itemizedlist"><ul><li><p>
									<code class="filename">JOSSO_HOME/lib/josso-gateway-config.xml</code>
								</p></li><li><p>
									<code class="filename">JOSSO_HOME/lib/josso-gateway-gatein-stores.xml</code>
								</p></li></ul></div><p>
							and
						</p><div class="itemizedlist"><ul><li><p>
									<code class="filename">JOSSO_HOME/webapps/josso/WEB-INF/classes/gatein.properties</code>
								</p></li></ul></div></li><li><p>
							Edit <code class="filename">TOMCAT_HOME/conf/server.xml</code> and replace the 8080 port to 8888 to change the default Tomcat port and avoid a conflict with the default GateIn 3.2 port (for testing purposes).
							</p><div class="note"><h2>Port Conflicts</h2><p>
                           If GateIn 3.2 is running on the same machine as Tomcat, other ports need to be changed in addition to 8080 in order to avoid port conflicts.
                           They can be changed to any free port. For example, you can change admin port from 8005 to 8805, and AJP port from 8009 to 8809.
								</p></div><p>
						</p></li><li><p>
							Tomcat should now start and allow access to <a class="ulink" href="http://localhost:8888/josso/signon/login.do">http://localhost:8888/josso/signon/login.do</a> but at this stage login will not be available.
						</p><div class="mediaobject"><img src="images/AuthenticationAndIdentity/SSO/opensso.png"/></div></li></ol></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JOSSO-Setup_the_JOSSO_client"/>6.6.3.2. Setup the JOSSO client</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
						Copy the library files from <code class="filename">GATEIN_SSO_HOME/josso/gatein.ear/lib</code> into <code class="filename">gatein.ear/lib</code> (or into <code class="filename">GATEIN_HOME/lib</code> if GateIn 3.2 is  running in Tomcat)
					</p></li><li><p>
                  Copy the file <code class="filename">GATEIN_SSO_HOME/josso/gatein.ear/portal.war/WEB-INF/classes/josso-agent-config.xml</code> into <code class="filename">gatein.ear/02portal.war/WEB-INF/classes</code> (or into <code class="filename">GATEIN_HOME/webapps/portal.war/WEB-INF/classes</code>, or <code class="filename">GATEIN_HOME/conf</code> if GateIn 3.2 is  running in Tomcat)
               </p></li><li><div class="itemizedlist"><ul><li><p>
								In JBoss AS, edit <code class="filename">gatein.ear/META-INF/gatein-jboss-beans.xml</code> and uncomment this section:
							</p><pre class="programlisting">&lt;authentication&gt;
  &lt;login-module code="org.gatein.sso.agent.login.SSOLoginModule" flag="required"&gt;
  &lt;/login-module&gt;      
  &lt;login-module code="org.exoplatform.services.security.j2ee.JbossLoginModule" flag="required"&gt;
    &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
    &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
  &lt;/login-module&gt;
&lt;/authentication&gt;
</pre></li><li><p>
								In Tomcat, edit <code class="filename">GATEIN_HOME/conf/jaas.conf</code> and uncomment this section:
							</p><pre class="programlisting">org.gatein.sso.agent.login.SSOLoginModule required;
org.exoplatform.services.security.j2ee.TomcatLoginModule requiredtm	
portalContainerName=portal
realmName=gatein-domain;
</pre></li></ul></div></li><li><p>
						The installation can be tested at this point.
					</p><div class="procedure"><ol class="1"><li><p>
								Start (or restart) GateIn 3.2, and (assuming the JOSSO server on Tomcat is running) direct your browser to <a class="ulink" href="http://localhost:8888/josso/signon/login.do">http://localhost:8888/josso/signon/login.do</a>.
							</p></li><li><p>
								Login with the username <code class="literal">root</code> and the password <code class="literal">gtn</code> or any account created through the portal.
							</p></li></ol></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JOSSO-Setup_the_portal_to_redirect_to_JOSSO"/>6.6.3.3. Setup the portal to redirect to JOSSO</h4></div></div></div><p>
				The next part of the process is to redirect all user authentication to the JOSSO server.
			</p><p>
				Information about where the JOSSO server is hosted must be properly configured within the GateIn 3.2 instance. The required configuration is done by modifying four files:
				</p><div class="itemizedlist"><ul><li><p>
						In the <code class="filename">gatein.ear/web.war/groovy/groovy/webui/component/UIBannerPortlet.gtml</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a class="Login" onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a class="Login" href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;

</pre><p>
						</p></li><li><p>
						In the <code class="filename">gatein.ear/web.war/groovy/portal/webui/component/UILogoPortlet.gtmpl</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt; 

</pre><p>
						</p></li><li><p>
							Replace the entire contents of <code class="filename">gatein.ear/02portal.war/login/jsp/login.jsp</code> with:
						</p><pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;script type="text/javascript"&gt;
     window.location = '/portal/sso';
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></li><li><p>
							Add the following Filters at the top of the filter chain in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>:


</p><pre class="programlisting">

  &lt;filter&gt;
      &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
      &lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
      &lt;init-param&gt;                                 
		&lt;!-- This should point to your SSO authentication server --&gt;                                                                                              
		&lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;                                                                                                
		&lt;param-value&gt;http://localhost:8888/josso/signon/login.do?josso_back_to=http://localhost:8080/portal
		/private/classic&lt;/param-value&gt;                                                                                                         
      &lt;/init-param&gt;
  &lt;/filter&gt;
  &lt;filter&gt;
      &lt;filter-name&gt;JOSSOLogoutFilter&lt;/filter-name&gt;                                                                                              
      &lt;filter-class&gt;org.gatein.sso.agent.filter.JOSSOLogoutFilter&lt;/filter-class&gt;                                                      
      &lt;init-param&gt;                                 
        &lt;!-- This should point to your JOSSO authentication server --&gt;                                                                                              
        &lt;param-name&gt;LOGOUT_URL&lt;/param-name&gt;                                                                                                
        &lt;param-value&gt;http://localhost:8888/josso/signon/logout.do&lt;/param-value&gt;                                                                                                         
      &lt;/init-param&gt;                                                                                                                              
  &lt;/filter&gt;   
  
  &lt;!-- filters should be placed at the very top of the filter chain --&gt;
  &lt;filter-mapping&gt;
	  &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
	  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;	         
  &lt;/filter-mapping&gt;	
  &lt;filter-mapping&gt;
     &lt;filter-name&gt;JOSSOLogoutFilter&lt;/filter-name&gt;
     &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
 
</pre><p>
						</p></li><li><p>
						Replace the <code class="literal">InitiateLoginServlet</code> declaration in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code> with:
						</p><pre class="programlisting">&lt;servlet&gt;
  &lt;servlet-name&gt;InitiateLoginServlet&lt;/servlet-name&gt;
  &lt;servlet-class&gt;org.gatein.sso.agent.GenericSSOAgent&lt;/servlet-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;ssoServerUrl&lt;/param-name&gt;
    &lt;param-value&gt;http://localhost:8888/josso/signon/login.do&lt;/param-value&gt;
  &lt;/init-param&gt;    
&lt;/servlet&gt;
</pre></li><li><p>
							Remove the <code class="literal">PortalLoginController</code> servlet declaration and mapping in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>
						</p></li></ul></div><p>
			</p><p>
				From now on, all links redirecting to the user authentication pages will redirect to the JOSSO centralized authentication form.
			</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-OpenSSO_The_Open_Web_SSO_project"/>6.6.4. OpenSSO - The Open Web SSO project</h3></div></div></div><p>
			This Single Sign On plugin enables seamless integration between GateIn 3.2 and the OpenSSO Single Sign On Framework. Details about OpenSSO can be found <a class="ulink" href="https://opensso.dev.java.net/">here</a>.
		</p><p>
			Setting up this integration involves two steps. The first step is to install or configure an OpenSSO server, and the second is to set up the portal to use the OpenSSO server.
		</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-OpenSSO_The_Open_Web_SSO_project-OpenSSO_server"/>6.6.4.1. OpenSSO server</h4></div></div></div><p>
				 This section details the setting up of OpenSSO server to authenticate against the GateIn 3.2 login module.
			</p><p>
				In this example the OpenSSO server will be installed on Tomcat.
			</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-OpenSSO_server-Obtaining_OpenSSO"/>6.6.4.1.1. Obtaining OpenSSO</h5></div></div></div><p>
					OpenSSO can be downloaded from <a class="ulink" href="http://download.oracle.com/otn/nt/middleware/11g/oracle_opensso_80U2.zip">http://download.oracle.com/otn/nt/middleware/11g/oracle_opensso_80U2.zip</a>.
				</p><p>
					Once downloaded, extract the package into a suitable location. This location will be referred to as <code class="filename">OPENSSO_HOME</code> in this example.
				</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-OpenSSO_server-Modifying_OpenSSO_server"/>6.6.4.1.2. Modifying OpenSSO server</h5></div></div></div><p>
					 To configure the web server as desired, it is simpler to directly modify the sources. 
				</p><p>
					The first step is to add the GateIn 3.2 Authentication Plugin:
				</p><p>
					The plugin makes secure authentication callbacks to a RESTful service installed on the remote GateIn 3.2 server in order to authenticate a user.
				</p><p>
					In order for the plugin to function correctly, it needs to be properly configured to connect to this service. This configuration is done via the <code class="filename">opensso.war/config/auth/default/AuthenticationPlugin.xml</code> file.
				</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
							Obtain a copy of Tomcat and extract it into a suitable location (this location will be referred to as <code class="filename">TOMCAT_HOME</code> in this example).
						</p></li><li><p>
							Change the default port to avoid a conflict with the default GateIn 3.2 port (for testing purposes). Do this by editing <code class="filename">TOMCAT_HOME/conf/server.xml</code> and replacing the 8080 port to 8888.
							</p><div class="note"><h2>Note</h2><p>
                           If GateIn 3.2 is running on the same machine as Tomcat, other ports need to be changed in addition to 8080 in order to avoid port conflicts.
                           They can be changed to any free port. For example, you can change admin port from 8005 to 8805, and AJP port from 8009 to 8809.
								</p></div><p>
						</p></li><li><p>
							Ensure the <code class="filename">TOMCAT_HOME/webapps/opensso/config/auth/default/AuthenticationPlugin.xml</code> file looks like this:
</p><pre class="programlisting">
&lt;?xml version='1.0' encoding="UTF-8"?&gt;

&lt;!DOCTYPE ModuleProperties PUBLIC "=//iPlanet//Authentication Module Properties XML Interface 1.0 DTD//EN"
          "jar://com/sun/identity/authentication/Auth_Module_Properties.dtd"&gt;

&lt;ModuleProperties moduleName="AuthenticationPlugin" version="1.0" &gt;
  &lt;Callbacks length="2" order="1" timeout="60"
             header="GateIn OpenSSO Login" &gt;    
    &lt;NameCallback&gt;
      &lt;Prompt&gt;
		Username
      &lt;/Prompt&gt;
    &lt;/NameCallback&gt;
    &lt;PasswordCallback echoPassword="false" &gt;
      &lt;Prompt&gt;
		Password
      &lt;/Prompt&gt;
    &lt;/PasswordCallback&gt;
  &lt;/Callbacks&gt;
&lt;/ModuleProperties&gt;
</pre><p>
						</p></li><li><p>
							Copy <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/lib/sso-opensso-plugin-&lt;VERSION&gt;.jar</code>, <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/lib/commons-httpclient-&lt;VERSION&gt;.jar</code>, and <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/lib/commons-logging-&lt;VERSION&gt;.jar</code> into the Tomcat directory at <code class="filename">TOMCAT_HOME/webapps/opensso/WEB-INF/lib</code>.
						</p></li><li><p>
							Copy <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/classes/gatein.properties</code> into <code class="filename">TOMCAT_HOME/webapps/opensso/WEB-INF/classes</code>
						</p></li><li><p>
							Tomcat should start and be able to access <a class="ulink" href="http://localhost:8888/opensso/UI/Login?realm=gatein">http://localhost:8888/opensso/UI/Login?realm=gatein</a>. Login will not be available at this point.
						</p><div class="mediaobject"><img src="images/AuthenticationAndIdentity/SSO/opensso-shot.png"/></div></li></ol></div><p>Configure "gatein" realm:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Direct your browser to <a class="ulink" href="http://localhost:8888/opensso">http://localhost:8888/opensso</a></p></li><li><p>Create default configuration</p></li><li><p>Login as <code class="literal">amadmin</code> and then go to tab "Configuration" -&gt; tab "Authentication" -&gt; link "Core" -&gt;
                        add new value and fill in the class name "org.gatein.sso.opensso.plugin.AuthenticationPlugin".
                        This step is really important. Without it AuthenticationPlugin is not available among other OpenSSO authentication modules.
                     </p></li><li><p>Go to tab "Access control" and create new realm called "gatein".</p></li><li><p>Go to "gatein" realm and click on "Authentication" tab. At the bottom in the section "Authentication chaining" click on "ldapService".
                     Here change the selection from "Datastore", which is the default module in the authentication chain, to "AuthenticationPlugin".
                     This enables authentication of "gatein" realm by using GateIn REST service instead of the OpenSSO LDAP server.</p></li><li><p>
                     Go to "Advanced properties" and change UserProfile from "Required" to "Dynamic". This step is needed
                     because GateIn 3.2 users are not in OpenSSO Datastore (LDAP server), so their profiles can't be obtained
                     if "Required" is active. By using "Dynamic" all new users are automatically
                     created in OpenSSO datastore after successful authentication.
                  </p></li><li><p>
                     Increase the user privileges to allow REST access. Go to "Access control" -&gt;
                     Top level realm -&gt; "Privileges" tab -&gt; All authenticated users, and check the last two checkboxes:
                     </p><div class="itemizedlist"><ul><li><p>Read and write access only for policy properties</p></li><li><p>Read and write access to all realm and policy properties</p></li></ul></div><p>
                  </p></li><li><p>Do the same for "gatein" realm.</p></li></ol></div><p>Also, instead of configuring OpenSSO manually as above, you can refer to the available configuration files <a class="ulink" href="https://repository.jboss.org/nexus/content/groups/public/org/gatein/sso/sso-packaging/1.0.1-GA/sso-packaging-1.0.1-GA.zip">here</a>.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-OpenSSO_The_Open_Web_SSO_project-Setup_the_OpenSSO_client"/>6.6.4.2. Setup the OpenSSO client</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
						Copy all libraries from <code class="filename">GATEIN_SSO_HOME/opensso/gatein.ear/lib</code> into <code class="filename">JBOSS_HOME/server/default/deploy/gatein.ear/lib</code> (Or, in Tomcat, into <code class="filename">GATEIN_HOME/lib</code>)
					</p></li><li><div class="itemizedlist"><ul><li><p>
								In JBoss AS, edit gatein.ear/META-INF/gatein-jboss-beans.xml and uncomment this section
							</p><pre class="programlisting">&lt;authentication&gt;
  &lt;login-module code="org.gatein.sso.agent.login.SSOLoginModule" flag="required"&gt;
  &lt;/login-module&gt;      
  &lt;login-module code="org.exoplatform.services.security.j2ee.JbossLoginModule" flag="required"&gt;
    &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
    &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
  &lt;/login-module&gt;
&lt;/authentication&gt;
</pre></li><li><p>
								If you are running GateIn 3.2 in Tomcat, edit $GATEIN_HOME/conf/jaas.conf and uncomment this section
							</p><pre class="programlisting">org.gatein.sso.agent.login.SSOLoginModule required;
org.exoplatform.services.security.j2ee.TomcatLoginModule required
portalContainerName=portal
realmName=gatein-domain;
</pre></li></ul></div><p>
						At this point the installation can be tested:
					</p><div class="procedure"><ol class="1"><li><p>
								Access GateIn 3.2 by going to <a class="ulink" href="http://localhost:8888/opensso/UI/Login?realm=gatein">http://localhost:8888/opensso/UI/Login?realm=gatein</a> (assuming that the OpenSSO server using Tomcat is still running).
							</p></li><li><p>
								Login with the username <code class="literal">root</code> and the password <code class="literal">gtn</code> or any account created through the portal.
							</p></li></ol></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-OpenSSO_The_Open_Web_SSO_project-Setup_the_portal_to_redirect_to_OpenSSO"/>6.6.4.3. Setup the portal to redirect to OpenSSO</h4></div></div></div><p>
				The next part of the process is to redirect all user authentication to the OpenSSO server.
			</p><p>
				Information about where the OpenSSO server is hosted must be properly configured within the Enterprise Portal Platform instance. The required configuration is done by modifying three files:
				</p><div class="itemizedlist"><ul><li><p>
						In the <code class="filename">gatein.ear/web.war/groovy/groovy/webui/component/UIBannerPortlet.gtml</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a class="Login" onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a class="Login" href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;

</pre><p>
						</p></li><li><p>
						In the <code class="filename">gatein.ear/web.war/groovy/portal/webui/component/UILogoPortlet.gtmpl</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt; 

</pre><p>
						</p></li><li><p>
							Replace the entire contents of <code class="filename">gatein.ear/02portal.war/login/jsp/login.jsp</code> with:
						</p><pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;script type="text/javascript"&gt;
     window.location = '/portal/sso';
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></li><li><p>
							Add the following Filters at the top of the filter chain in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>:


</p><pre class="programlisting">

  &lt;filter&gt;
      &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
      &lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
      &lt;init-param&gt;                                 
	&lt;!-- This should point to your SSO authentication server --&gt;                                                                                              
	&lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;                                                                                                
	&lt;param-value&gt;http://localhost:8888/opensso/UI/Login?realm=gatein&amp;amp;goto=http://localhost:8080
	/portal/private/classic&lt;/param-value&gt;                                                                                                         
      &lt;/init-param&gt;
  &lt;/filter&gt;
  &lt;filter&gt;	
      &lt;filter-name&gt;OpenSSOLogoutFilter&lt;/filter-name&gt;                                                                                              
      &lt;filter-class&gt;org.gatein.sso.agent.filter.OpenSSOLogoutFilter&lt;/filter-class&gt;                                                      
      &lt;init-param&gt;                                 
        &lt;!-- This should point to your OpenSSO authentication server --&gt;                                                                                              
        &lt;param-name&gt;LOGOUT_URL&lt;/param-name&gt;                                                                                                
        &lt;param-value&gt;http://localhost:8888/opensso/UI/Logout&lt;/param-value&gt;                                                                                                         
      &lt;/init-param&gt;                                                                                                                              
  &lt;/filter&gt;   
  
  &lt;!-- place the filters at the top of the filter chain --&gt;
  &lt;filter-mapping&gt;
	  &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
	  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;	         
  &lt;/filter-mapping&gt;
  &lt;filter-mapping&gt;
     &lt;filter-name&gt;OpenSSOLogoutFilter&lt;/filter-name&gt;
     &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
 
</pre><p>
						</p></li><li><p>
						Replace the <code class="literal">InitiateLoginServlet</code> declaration in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code> with:
						</p><pre class="programlisting">&lt;servlet&gt;
  &lt;servlet-name&gt;InitiateLoginServlet&lt;/servlet-name&gt;
  &lt;servlet-class&gt;org.gatein.sso.agent.GenericSSOAgent&lt;/servlet-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;ssoServerUrl&lt;/param-name&gt;
    &lt;param-value&gt;http://localhost:8888/opensso&lt;/param-value&gt;
  &lt;/init-param&gt; 
  &lt;init-param&gt;
    &lt;param-name&gt;ssoCookieName&lt;/param-name&gt;
    &lt;param-value&gt;iPlanetDirectoryPro&lt;/param-value&gt;
  &lt;/init-param&gt;   
&lt;/servlet&gt;
</pre></li></ul></div><p>
			</p><p>
				From now on, all links redirecting to the user authentication pages will redirect to the OpenSSO centralized authentication form.
			</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="Single_Sign_On-SPNEGO"/>6.6.5. SPNEGO</h3></div></div></div><p>SPNEGO (Simple and Protected GSSAPI Negotiation Mechanism) is
			used to authenticate transparently through the web browser after the
			user has been authenticated when logging-in his session.</p><p>A typical use case is the following:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Users logs into his desktop (Such as a Windows machine).</p></li><li><p>The desktop login is governed by Active Directory domain.</p></li><li><p>User then uses his browser (IE/Firefox) to access a web
					application (that uses JBoss Negotiation) hosted on JBoss EPP.</p></li><li><p>The Browser transfers the desktop sign on information to the
					web application.</p></li><li><p>JBoss EAP/AS uses background GSS messages with the Active
					Directory (or any Kerberos Server) to validate the user.</p></li><li><p>The User has seamless SSO into the web application.</p></li></ol></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="SPNEGO_server_configuration"/>6.6.5.1. SPNEGO Server Configuration</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Information stated here only describes basic steps for you to configure the SPNEGO server. If you are already familiar with SPNEGO, jump to the <a class="xref" href="#Single_Sign_On-SPNEGO-GateIn_Configuration" title="6.6.5.2. GateIn 3.2 Configuration">Section 6.6.5.2, “GateIn 3.2 Configuration”</a> to see how to integrate SPNEGO with GateIn 3.2.</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Correct the setup of network on the machine. For example, if you are using the "server.local.network" domain as your machine where Kerberos and GateIn 3.2 are localed,
          add the line containing the machine's IP address to the <span class="bold"><strong>/etc/host </strong></span> file.
          </p><pre class="programlisting">
192.168.1.88  server.local.network
          </pre><div class="note"><h2>Note</h2><p>It is not recommended you use loopback addresses.</p></div></li><li><p>Install Kerberos with these packages: krb5-admin-server, krb5-kdc, krb5-config, krb5-user, krb5-clients, and krb5-rsh-server.
          </p></li><li><p>Edit the Kerberos configuration file at <span class="bold"><strong>/etc/krb5.config</strong></span>, including:
          </p><div class="itemizedlist"><ul><li><p>Uncomment on these lines:</p><pre class="programlisting">
default_tgs_enctypes = des3-hmac-sha1
default_tkt_enctypes = des3-hmac-sha1
permitted_enctypes = des3-hmac-sha1
</pre></li><li><p>Add <span class="bold"><strong>local.network</strong></span> as a default realm and it is also added to the list of realms and remove the remains of realms. The content looks like:
              </p><pre class="programlisting">
[libdefaults]
    default_realm = LOCAL.NETWORK
 
# The following krb5.conf variables are only for MIT Kerberos.
    krb4_config = /etc/krb.conf
    krb4_realms = /etc/krb.realms
    kdc_timesync = 1
    ccache_type = 4
    forwardable = true
    proxiable = true
 
# The following encryption type specification will be used by MIT Kerberos
# if uncommented.  In general, the defaults in the MIT Kerberos code are
# correct and overriding these specifications only serves to disable new
# encryption types as they are added, creating interoperability problems.
#
# Thie only time when you might need to uncomment these lines and change
# the enctypes is if you have local software that will break on ticket
# caches containing ticket encryption types it doesn't know about (such as
# old versions of Sun Java).
 
    default_tgs_enctypes = des3-hmac-sha1
    default_tkt_enctypes = des3-hmac-sha1
    permitted_enctypes = des3-hmac-sha1
 
# The following libdefaults parameters are only for Heimdal Kerberos.
    v4_instance_resolve = false
    v4_name_convert = {
        host = {
            rcmd = host
            ftp = ftp
        }
        plain = {
            something = something-else
        }
    }
    fcc-mit-ticketflags = true
 
[realms]
    LOCAL.NETWORK = {
        kdc = server.local.network
        admin_server = server.local.network
    }
 
[domain_realm]
    .local.network = LOCAL.NETWORK
    local.network = LOCAL.NETWORK
 
[login]
    krb4_convert = true
    krb4_get_tickets = false
</pre></li></ul></div></li><li><p>Edit the KDC configuraton file at <span class="bold"><strong>/etc/krb5kdc/kdc.conf</strong></span> that looks like.
          </p><pre class="programlisting">
[kdcdefaults]
    kdc_ports = 750,88
 
[realms]
    LOCAL.NETWORK = {
        database_name = /home/gatein/krb5kdc/principal
        admin_keytab = FILE:/home/gatein/krb5kdc/kadm5.keytab
        acl_file = /home/gatein/krb5kdc/kadm5.acl
        key_stash_file = /home/gatein/krb5kdc/stash
        kdc_ports = 750,88
        max_life = 10h 0m 0s
        max_renewable_life = 7d 0h 0m 0s
        master_key_type = des3-hmac-sha1
        supported_enctypes = aes256-cts:normal arcfour-hmac:normal des3-hmac-sha1:normal des-cbc-crc:normal des:normal des:v4 des:norealm des:onlyrealm des:afs3
        default_principal_flags = +preauth
    }
 
[logging]
        kdc = FILE:/home/gatein/krb5logs/kdc.log
        admin_server = FILE:/home/gatein/krb5logs/kadmin.log
</pre><div class="itemizedlist"><ul><li><p>Create krb5kdc and krb5logs directory for Kerberos database as shown in the configuration file above.</p></li><li><p>Next, create a KDC database using the following command.</p><pre class="programlisting">
sudo krb5_newrealm
</pre></li><li><p>Start the KDC and Kerberos admin servers using these commands:</p><pre class="programlisting">
sudo /etc/init.d/krb5-kdc restart
sudo /etc/init.d/krb-admin-server restart
</pre></li></ul></div></li><li><p>Add Principals and create Keys.</p><div class="itemizedlist"><ul><li><p>Start an interactive 'kadmin' session and create the necessary Principals.</p><pre class="programlisting">
sudo kadmin.local
</pre></li><li><p>Add the GateIn 3.2 machine and keytab file that need to be authenticated.</p><pre class="programlisting">
addprinc -randkey HTTP/server.local.network@LOCAL.NETWORK
ktadd HTTP/server.local.network@LOCAL.NETWORK
</pre></li><li><p>Add the default GateIn 3.2 user accounts and enter the password for each created user that will be authenticated.</p><pre class="programlisting">
addprinc john
addprinc demo
addprinc root
</pre></li></ul></div></li><li><p>Test your changed setup by using the command.</p><pre class="programlisting">
kinit -A demo
</pre><div class="itemizedlist"><ul><li><p>If the setup works well, you are required to enter the password created for this user in Step 5.</p></li><li><p>If you want to login with another user, use this command.</p><pre class="programlisting">
kdestroy
</pre></li></ul></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="Single_Sign_On-SPNEGO-GateIn_Configuration"/>6.6.5.2. GateIn 3.2 Configuration</h4></div></div></div><p>GateIn 3.2 uses JBoss Negotiation to enable SPNEGO-based desktop
				SSO for the portal. Here are the steps to integrate SPNEGO with
				GateIn 3.2.
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
						Activate the Host authentication under the <span class="bold"><strong>conf/login-config.xml </strong></span> file adding the following host login module:
          </p>
						
						Under conf/login-config.xml, add the following host login module:
						<pre class="programlisting">&lt;!-- SPNEGO domain --&gt;
&lt;application-policy name="host"&gt;
  &lt;authentication&gt;
      &lt;login-module code="com.sun.security.auth.module.Krb5LoginModule"
         flag="required"&gt;
         &lt;module-option name="storeKey"&gt;true&lt;/module-option&gt;
         &lt;module-option name="useKeyTab"&gt;true&lt;/module-option&gt;
         &lt;module-option name="principal"&gt;HTTP/server.local.network@LOCAL.NETWORK&lt;/module-option&gt;
      &lt;module-option name="keyTab"&gt;/etc/krb5.keytab&lt;/module-option&gt;
      &lt;module-option name="doNotPrompt"&gt;true&lt;/module-option&gt;
      &lt;module-option name="debug"&gt;true&lt;/module-option&gt;
    &lt;/login-module&gt;
  &lt;/authentication&gt;
 &lt;/application-policy&gt;
</pre><p>The 'keyTab' value should point to the keytab file that was
						generated by the kadmin kerberos tool. See the <a class="xref" href="#SPNEGO_server_configuration" title="6.6.5.1. SPNEGO Server Configuration">Section 6.6.5.1, “SPNEGO Server Configuration”</a> section for more details.
            </p></li><li><p>
						Extend the core authentication mechanisms to support SPNEGO under
						<span class="bold"><strong>deployers/jbossweb.deployer/META-INF/war-deployers-jboss-beans.xml</strong></span> by
						adding the 'SPNEGO' authenticators property.
          </p><pre class="programlisting">

&lt;property name="authenticators"&gt;
         &lt;map keyClass="java.lang.String" valueClass="java.lang.String"&gt;
            &lt;entry&gt;
               &lt;key&gt;BASIC&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.BasicAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;CLIENT-CERT&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.SSLAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;DIGEST&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.DigestAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;FORM&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.FormAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;NONE&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.NonLoginAuthenticator&lt;/value&gt;
            &lt;/entry&gt;

        &lt;!-- Add this entry --&gt;
        &lt;entry&gt;
          &lt;key&gt;SPNEGO&lt;/key&gt;
          &lt;value&gt;org.jboss.security.negotiation.NegotiationAuthenticator&lt;/value&gt;
        &lt;/entry&gt;
         &lt;/map&gt;
&lt;/property&gt;

</pre></li><li><p>Add the GateIn SSO module binaries by copying <span class="bold"><strong>$GATEIN_SSO_HOME/spnego/gatein.ear/lib/sso-agent.jar</strong></span>, and <span class="bold"><strong>$GATEIN_SSO_HOME/spnego/gatein.ear/lib/sso-spnego.jar</strong></span> to the <span class="bold"><strong>deploy/gatein.ear/lib</strong></span> directory.
          </p></li><li><p>
						Modify the <span class="bold"><strong>deploy/gatein.ear/META-INF/gatein-jboss-beans.xml</strong></span> file as below, then comment on other parts.
          </p><pre class="programlisting">
&lt;login-module code="org.gatein.sso.spnego.SPNEGOLoginModule" flag="required"&gt;
  &lt;module-option name="password-stacking"&gt;useFirstPass&lt;/module-option&gt;
  &lt;module-option name="serverSecurityDomain"&gt;host&lt;/module-option&gt;
&lt;/login-module&gt;
&lt;login-module code="org.gatein.sso.agent.login.SPNEGORolesModule" flag="required"&gt;
  &lt;module-option name="password-stacking"&gt;useFirstPass&lt;/module-option&gt;
  &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
  &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
&lt;/login-module&gt;
</pre></li><li><p>
						Modify <span class="bold"><strong>gatein.ear/02portal.war/WEB-INF/web.xml</strong></span> as below.</p><pre class="programlisting">
&lt;!--
&lt;login-config&gt;
  &lt;auth-method&gt;FORM&lt;/auth-method&gt;
  &lt;realm-name&gt;gatein-domain&lt;/realm-name&gt;
  &lt;form-login-config&gt;
    &lt;form-login-page&gt;/initiatelogin&lt;/form-login-page&gt;
    &lt;form-error-page&gt;/errorlogin&lt;/form-error-page&gt;
  &lt;/form-login-config&gt;
&lt;/login-config&gt;
--&gt;
 
&lt;login-config&gt;
  &lt;auth-method&gt;SPNEGO&lt;/auth-method&gt;
  &lt;realm-name&gt;SPNEGO&lt;/realm-name&gt;
&lt;/login-config&gt;
</pre><p>This integrates SPNEGO support into the Portal web archive by switching the authentication mechanism from the default "FORM"-based to "SPNEGO"-based authentication.</p></li><li><p>Integrate the request pre-processing needed for SPNEGO via filters by adding the following filters to the <span class="bold"><strong>web.xml </strong></span> at the top of the Filter chain.</p><pre class="programlisting">
&lt;filter&gt;
  &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
  &lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
  &lt;init-param&gt;
  &lt;!-- This should point to your SSO authentication server --&gt;
    &lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;
    &lt;param-value&gt;/portal/private/classic&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/filter&gt;
&lt;filter&gt;
  &lt;filter-name&gt;SPNEGOFilter&lt;/filter-name&gt;
  &lt;filter-class&gt;org.gatein.sso.agent.filter.SPNEGOFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
  &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
  &lt;filter-name&gt;SPNEGOFilter&lt;/filter-name&gt;
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</pre></li><li><p>
						Start the GateIn 3.2 portal using the command below.</p><pre class="programlisting">sudo ./run.sh -Djava.security.krb5.realm=LOCAL.NETWORK -Djava.security.krb5.kdc=server.local.network -c PROFILE -b server.local.network</pre><p>The PROFILE parameter in the above command should be replaced with the server profile modified in the above configuration. For example, if you are configuring the default profile, your command will be.</p><pre class="programlisting">sudo ./run.sh -Djava.security.krb5.realm=LOCAL.NETWORK -Djava.security.krb5.kdc=server.local.network -c default -b server.local.network</pre></li><li><p>Login to Kerberos with the command.</p><pre class="programlisting">kinit -A demo</pre><p>You should be able to click the 'Sign In' link on the GateIn 3.2 portal
						and the 'demo' user from the GateIn 3.2 portal should be automatically
						logged in.</p></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="Single_Sign_On-CAS_Central_Clients"/>6.6.5.3. Clients</h4></div></div></div><p>After performing all configurations above, you need to enable the <span class="bold"><strong>Negotiate authentication </strong></span> of Firefox in clients so that clients could be authenticated by GateIn 3.2 as follows:
          </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Start Firefox, then enter the command: <span class="bold"><strong>about:config </strong></span> into the address field.</p></li><li><p>Enter <span class="bold"><strong>network.negotiate-auth</strong></span> and set the value as below:</p><pre class="programlisting">
network.negotiate-auth.allow-proxies = true
network.negotiate-auth.delegation-uris = .local.network
network.negotiate-auth.gsslib (no-value)
network.negotiate-auth.trusted-uris = .local.network
network.negotiate-auth.using-native-gsslib = true
</pre></li></ol></div></div></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="wsrp"/>Chapter 7. Web Services for Remote Portlets (WSRP)</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#d0e4855">7.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#wsrp_support">7.2. Level of support in GateIn 3.2</a></span></dt><dt><span class="sect1"><a href="#d0e4902">7.3. Deploying GateIn's WSRP services</a></span></dt><dd><dl><dt><span class="sect2"><a href="#wsrp-ports">7.3.1. Considerations to use WSRP when running GateIn on a non-default port or hostname</a></span></dt><dt><span class="sect2"><a href="#d0e4985">7.3.2. Considerations to use WSRP with SSL</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e4996">7.4. Making a portlet remotable</a></span></dt><dt><span class="sect1"><a href="#d0e5076">7.5. Consuming GateIn's WSRP portlets from a remote Consumer</a></span></dt><dt><span class="sect1"><a href="#consumer_configuration">7.6. Consuming remote WSRP portlets in GateIn</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5097">7.6.1. Overview</a></span></dt><dt><span class="sect2"><a href="#d0e5104">7.6.2. Configuring a remote producer walk-through</a></span></dt><dt><span class="sect2"><a href="#d0e5228">7.6.3. Configuring access to remote producers via XML</a></span></dt><dt><span class="sect2"><a href="#d0e5325">7.6.4. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e5353">7.7. Consumers maintenance</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5356">7.7.1. Modifying a currently held registration</a></span></dt><dt><span class="sect2"><a href="#d0e5443">7.7.2. Consumer operations</a></span></dt><dt><span class="sect2"><a href="#d0e5480">7.7.3. Importing and exporting portlets</a></span></dt><dt><span class="sect2"><a href="#d0e5573">7.7.4. Erasing local registration data</a></span></dt></dl></dd><dt><span class="sect1"><a href="#producer_config">7.8. Configuring GateIn's WSRP Producer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e5592">7.8.1. Overview</a></span></dt><dt><span class="sect2"><a href="#d0e5603">7.8.2. Default configuration</a></span></dt><dt><span class="sect2"><a href="#registration-configuration">7.8.3. Registration configuration</a></span></dt><dt><span class="sect2"><a href="#strict-mode">7.8.4. WSRP validation mode</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4855"/>7.1. Introduction</h2></div></div></div><p>The Web Services for Remote Portlets specification defines a web service interface for accessing and
         interacting with interactive presentation-oriented web services. It has been produced through the efforts of
         the Web Services for Remote Portlets (WSRP) OASIS Technical Committee. It is based on the requirements
         gathered and on the concrete proposals made to the committee.
      </p><p>Scenarios that motivate WSRP functionality include:
         </p><div class="itemizedlist"><ul><li><p>Content hosts, such as portal servers, providing Portlets as presentation-oriented web services
                  that can be used by aggregation engines.
               </p></li><li><p>Aggregating frameworks, including portal servers, consuming presentation-oriented web services
                  offered by content providers and integrating them into the framework.
               </p></li></ul></div><p>
      </p><p>More information on WSRP can be found on the
         <a class="ulink" href="http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=wsrp">official website for WSRP</a>.
         We suggest reading the
         <a class="ulink" href="http://www.oasis-open.org/committees/download.php/10539/wsrp-primer-1.0.html">primer</a>
         for a good, albeit technical, overview of WSRP.
      </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="wsrp_support"/>7.2. Level of support in GateIn 3.2</h2></div></div></div><p>The WSRP Technical Committee defined
         <a class="ulink" href="http://www.oasis-open.org/committees/download.php/3073">WSRP Use Profiles</a>
         to help with WSRP interoperability. We will refer to terms defined in that document in
         this section.
      </p><p>GateIn provides a Simple level of support for our WSRP Producer except that out-of-band registration
         is not currently handled. We support in-band registration and persistent local state (which are
         defined at the Complex level).
      </p><p>On the Consumer side, GateIn provides a Medium level of support for WSRP, except that we only handle
         HTML markup (as GateIn itself doesn't handle other markup types). We do support explicit portlet
         cloning and we fully support the PortletManagement interface.
      </p><p>As far as caching goes, we have Level 1 Producer and Consumer. We support Cookie handling properly on the
         Consumer and our Producer requires initialization of cookies (as we have found that it improved interoperabilty
         with some consumers). We don't support custom window states or modes, as GateIn doesn't either. We do,
         however, support CSS on both the Producer (though it's more a function of the portlets than inherent Producer
         capability) and Consumer.
      </p><p>While we provide a complete implementation of WSRP 1.0, we do need to go through the
         <a class="ulink" href="http://www.oasis-open.org/committees/download.php/6018">Conformance statements</a>
         and perform more interoperability testing (an area that needs to be better supported by the WSRP Technical
         Committee and Community at large).
      </p><p>New for 3.2 of GateIn is support of WSRP 2.0 with a complete implementation of
         the non-optional features. The only thing that we have not implemented is support for lifetimes and leasing
         support.
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>As of version 3.2 of GateIn, WSRP is only activated and supported
            when GateIn is deployed on JBoss Application Server.
         </p></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4902"/>7.3. Deploying GateIn's WSRP services</h2></div></div></div><p>
         GateIn provides a complete support of WSRP 1.0 standard interfaces and offers both consumer and
         producer services. WSRP support is provided by the following files, assuming
         <code class="code">$GATEIN_HOME</code>
         is
         where GateIn has been installed,
         <code class="code">$WSRP_VERSION</code>
         (at the time of the writing, it was 2.0.0-GA)
         is the version of the WSRP component and
         <code class="code">$PORTAL_VERSION</code>
         (at the time of the writing, it was 3.2.0-GA)
         is the current GateIn version:
         </p><div class="itemizedlist"><ul><li><p>
                  <code class="filename">$GATEIN_HOME/wsrp-admin-gui.war</code>, which contains the WSRP Configuration portlet
                  with which you can configure consumers to access remote servers and how the WSRP producer is
                  configured.
               </p></li><li><p><code class="filename">$GATEIN_HOME/wsrp-producer.war</code>, which contains the WSRP producer web
                  application.
               </p></li><li><p><code class="filename">$GATEIN_HOME/lib/wsrp-common-$WSRP_VERSION.jar</code>, which contains common classes
                  needed by the different WSRP libraries.
               </p></li><li><p>
                  <code class="filename">$GATEIN_HOME/lib/wsrp-consumer-$WSRP_VERSION.jar</code>, which contains the WSRP
                  consumer.
               </p></li><li><p>
                  <code class="filename">$GATEIN_HOME/lib/wsrp-integration-api-$WSRP_VERSION.jar</code>, which contains the
                  API classes needed to integrate the WSRP component into portals.
               </p></li><li><p>
                  <code class="filename">$GATEIN_HOME/lib/wsrp-producer-lib-$WSRP_VERSION.jar</code>, which contains the classes
                  needed by the WSRP producer.
               </p></li><li><p>
                  <code class="filename">$GATEIN_HOME/lib/wsrp-wsrp1-ws-$WSRP_VERSION.jar</code>, which contains the generated
                  JAX-WS classes for WSRP version 1.
               </p></li><li><p>
                  <code class="filename">$GATEIN_HOME/lib/wsrp-wsrp2-ws-$WSRP_VERSION.jar</code>, which contains the generated
                  JAX-WS classes for WSRP version 2.
               </p></li><li><p>
                  <code class="filename">$GATEIN_HOME/lib/gatein.portal.component.wsrp-$PORTAL_VERSION.jar</code>, which
                  contains the code to integrate the WSRP service into GateIn.
               </p></li></ul></div><p>
         If you're not going to use WSRP in GateIn, it won't adversely affect your installation to leave it
         as-is. Please see the
         <a class="ulink" href="http://community.jboss.org/wiki/WSRPserviceremovalprocedure">WSRP service removal procedure</a>
         for a complete guide on how to remove the WSRP service.
      </p><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="wsrp-ports"/>7.3.1. Considerations to use WSRP when running GateIn on a non-default port or hostname</h3></div></div></div><p>
            JBoss WS (the web service stack that GateIn uses) should take care of the details of updating the
            port and host name used in WSDL. See the
            <a class="ulink" href="http://community.jboss.org/wiki/JBossWS-UserGuide#Configuration">JBoss WS user guide on that
               subject
            </a>
            for more details.
         </p><p>
            Of course, if you have modified you have modified the host name and port on which your server runs, you will
            need to
            update the configuration for the consumer used to consume GateIn's 'self' producer. Please refer to
            the
            <a class="xref" href="#consumer_configuration" title="7.6. Consuming remote WSRP portlets in GateIn">Section 7.6, “Consuming remote WSRP portlets in GateIn”</a>
            to learn how to do so.
         </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4985"/>7.3.2. Considerations to use WSRP with SSL</h3></div></div></div><p>It is possible to use WSRP over SSL for secure exchange of data. Please refer to the
            <a class="ulink" href="http://community.jboss.org/wiki/ConfiguringWSRPforuseoverSSL">instructions</a>
            on how to do so from
            <a class="ulink" href="http://community.jboss.org/wiki/GateIn">GateIn's wiki</a>.
         </p></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4996"/>7.4. Making a portlet remotable</h2></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
            Only JSR-286 (Portlet 2.0) portlets can be made remotable as the mechanism to expose a portlet to WSRP
            relies on a JSR-286-only functionality.
         </p></div><p>GateIn does
         <span class="bold"><strong>NOT</strong></span>, by default, expose local portlets for consumption
         by remote WSRP consumers. In order to make a portlet remotely available, it must be made "remotable" by marking
         it as such in the associated
         <code class="filename">portlet.xml</code>. This is accomplished by using a specific
         <code class="code">org.gatein.pc.remotable container-runtime-option</code>. Setting its value to
         <code class="code">true</code>
         makes the portlet available for remote consumption, while setting its value to
         <code class="code">false</code>
         will not publish it remotely. As specifying the remotable status for a portlet is optional, you do not need to
         do anything if you don't need your portlet to be available remotely.
      </p><p>In the following example, the "BasicPortlet" portlet is specified as being remotable.
      </p><div class="example"><a id="d0e5021"/><p class="title"><b>Example 7.1. </b></p><div class="example-contents"><p>
            </p><pre class="programlisting">
&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;portlet-app xmlns="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
             version="2.0"&gt;
&lt;portlet-app&gt;
   &lt;portlet&gt;
      &lt;portlet-name&gt;BasicPortlet&lt;/portlet-name&gt;

      ...

      &lt;container-runtime-option&gt;
         &lt;name&gt;org.gatein.pc.remotable&lt;/name&gt;
         &lt;value&gt;true&lt;/value&gt;
      &lt;/container-runtime-option&gt;
   &lt;/portlet&gt;
&lt;/portlet-app&gt;</pre><p>
         </p></div></div><br class="example-break"/><p>
         It is also possible to specify that all the portlets declared within a given portlet application to be
         remotable by default. This is done by specifying the
         <code class="code">
            container-runtime-option
         </code>
         at the
         <code class="code">portlet-app</code>
         element level. Individual portlets can override that value to not be remotely exposed. Let's look at an
         example:
      </p><div class="example"><a id="d0e5035"/><p class="title"><b>Example 7.2. </b></p><div class="example-contents"><p>
            </p><pre class="programlisting">
&lt;?xml version="1.0" standalone="yes"?&gt;
&lt;portlet-app xmlns="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd"
             version="2.0"&gt;
&lt;portlet-app&gt;

   &lt;portlet&gt;
      &lt;portlet-name&gt;RemotelyExposedPortlet&lt;/portlet-name&gt;
      ...
   &lt;/portlet&gt;
   &lt;portlet&gt;
      &lt;portlet-name&gt;NotRemotelyExposedPortlet&lt;/portlet-name&gt;
      ...
      &lt;container-runtime-option&gt;
         &lt;name&gt;org.gatein.pc.remotable&lt;/name&gt;
         &lt;value&gt;false&lt;/value&gt;
      &lt;/container-runtime-option&gt;
   &lt;/portlet&gt;

   &lt;container-runtime-option&gt;
      &lt;name&gt;org.gatein.pc.remotable&lt;/name&gt;
      &lt;value&gt;true&lt;/value&gt;
   &lt;/container-runtime-option&gt;
&lt;/portlet-app&gt;
            </pre><p>
         </p></div></div><br class="example-break"/><p>
         In the example above, we defined two portlets. The
         <code class="code">org.gatein.pc.remotable container-runtime-option</code>
         being set to
         <code class="code">true</code>
         at the
         <code class="code">portlet-app</code>
         level, all portlets defined in this particular portlet application are exposed remotely by GateIn's
         WSRP
         producer.
         Note, however, that it is possible to override the default behavior: specifying a value for the
         <code class="code">org.gatein.pc.remotable container-runtime-option</code>
         at the
         <code class="code">portlet</code>
         level will take precedence over the default. In the example above, the
         <code class="varname">RemotelyExposedPortlet</code>
         inherits the remotable status defined at the
         <code class="code">portlet-app</code>
         level since it does not specify a value for the<code class="code">org.gatein.pc.remotable container-runtime-option</code>.
         The<code class="varname">NotRemotelyExposedPortlet</code>, however, overrides the default behavior and is not remotely
         exposed. Note that in the absence of a top-level
         <code class="code">org.gatein.pc.remotable container-runtime-option</code>
         value set to<code class="code">true</code>, portlets are NOT remotely exposed.
      </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5076"/>7.5. Consuming GateIn's WSRP portlets from a remote Consumer</h2></div></div></div><p>WSRP Consumers vary a lot as far as how they are configured. Most of them require that you specify
         the URL for the Producer's WSDL definition. Please refer to your Consumer's documentation for specific
         instructions. For instructions on how to do so in GateIn, please
         refer to
         <a class="xref" href="#consumer_configuration" title="7.6. Consuming remote WSRP portlets in GateIn">Section 7.6, “Consuming remote WSRP portlets in GateIn”</a>.
      </p><p>
         GateIn's Producer is automatically set up when you deploy a portal instance with the WSRP service.
         You can access the WSDL file at
         <code class="filename">http://{hostname}:{port}/wsrp-producer/v2/MarkupService?wsdl</code>. If you wish to use only the
         WSRP 1 compliant version of the producer, please use the WSDL file found at
         <code class="filename">http://{hostname}:{port}/wsrp-producer/v1/MarkupService?wsdl</code>.
         The default hostname is
         <code class="literal">localhost</code>
         and the default port is 8080.
      </p></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="consumer_configuration"/>7.6. Consuming remote WSRP portlets in GateIn</h2></div></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5097"/>7.6.1. Overview</h3></div></div></div><p>
            To be able to consume WSRP portlets exposed by a remote producer, GateIn's WSRP consumer needs to
            know how to access that remote producer. One can configure access to a remote producer using WSRP Producer
            descriptors. Alternatively, a portlet is provided to configure remote producers.
         </p><p>
            Once a remote producer has been configured, the portlets that it exposes are then available in the
            Application Registry to be added to categories and then to pages.
         </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5104"/>7.6.2. Configuring a remote producer walk-through</h3></div></div></div><p>
            Let's work through the steps of defining access to a remote producer so that its portlets can be
            consumed within GateIn. We will configure access to Oracle's public WSRP producer. We will first
            examine how to do so using the configuration portlet. We will then show how the same result can be
            accomplished with a producer descriptor, though it is far easier to do so via the configuration portlet.
         </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
               Some WSRP producers do not support chunked encoding that is activated by default by JBoss WS. If your
               producer does not support chunked encoding, your consumer will not be able to properly connect to the
               producer. This will manifest itself with the following error:
               <code class="code">Caused by: org.jboss.ws.WSException: Invalid HTTP server response [503] - Service
                  Unavailable</code>.
               Please see this GateIn's
               <a class="ulink" href="http://community.jboss.org/wiki/Workaroundwhenchunkedencodingisnotsupported">wiki page</a>
               for more details.
            </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="consumer_gui"/>7.6.2.1. Using the configuration portlet</h4></div></div></div><p>
               GateIn provides a portlet to configure access (among other functions) to remote WSRP Producers
               grahically. Starting with 3.2, the WSRP configuration portlet is installed by default. You
               can find it at
               <a class="ulink" href="http://localhost:8080/portal/login?initialURI=%2Fportal%2Fprivate%2Fclassic%2FwsrpConfiguration&amp;username=root&amp;password=gtn">
                  http://localhost:8080/portal/login?initialURI=%2Fportal%2Fprivate%2Fclassic%2FwsrpConfigurationp&amp;username=root&amp;password=gtn
               </a>
            </p><p>
               You should see a screen similar to:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/config_init.png" align="middle"/></div><p>
               This screen presents all the configured Consumers associated with their status and possible actions on
               them. A Consumer can be active or inactive. Activating a Consumer means that it is ready to act as a
               portlet provider. Note also that a Consumer can be marked as requiring refresh meaning that the
               information held about it might not be up to date and refreshing it from the remote Producer might be a
               good idea. This can happen for several reasons: the service description for that remote Producer has not
               been fetched yet, the cached version has expired or modifications have been made to the configuration
               that could potentially invalidate it, thus requiring re-validation of the information.
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                  The WSRP configuration didn't use to be installed by default in previous versions of GateIn.
                  We include here the legacy instructions on how to install this portlet in case you ever need to
                  re-install it.
               </p><p>
                  Use the usual procedure to log in as a Portal administrator and go to the Application
                  Registry. With the default install, you can just go to
                  <a class="ulink" href="http://localhost:8080/portal/login?initialURI=%2Fportal%2Fprivate%2Fclassic%2Fadministration%2Fregistry&amp;username=root&amp;password=gtn">
                     http://localhost:8080/portal/login?initialURI=%2Fportal%2Fprivate%2Fclassic%2Fadministration%2Fregistry&amp;username=root&amp;password=gtn
                  </a>
                  Add the WSRP Configuration portlet to the Administration category. If you use the Import Applications
                  functionality, the WSRP Configuration portlet will be automatically added to the Administration
                  category.
               </p><p>
                  Now that the portlet is added to a category, it can be added to a page and used. We recommend adding
                  it to the same page as the Application Registry as operations relating to WSRP and adding portlets to
                  categories are somewhat related as we will see. Go ahead and add the WSRP Configuration portlet to the
                  page using the standard procedure.
               </p></div><p>
               Next, we create a new Consumer which we will call <code class="literal">oracle</code>. Type
               "<code class="literal">oracle</code>" in
               the "Create a consumer named:" field then click on "Create consumer":
               </p><div class="mediaobject" align="center"><img src="images/WSRP/config_create.png" align="middle"/></div><p>
               You should now see a form allowing you to enter/modify the information about the Consumer.
               Set the cache expiration value to 300 seconds, leave the default timeout value for web services (WS)
               operations and enter the WSDL URL for the producer in the text field
               and press the "Refresh &amp; Save" button:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/config_wsdl.png" align="middle"/></div><p>
               This will retrieve the service description associated with the Producer which WSRP interface is described
               by the WSDL file found at the URL you just entered. In our case, querying the service description will
               allow us to learn that the Producer requires registration but didn't request any registration property:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/config_refresh.png" align="middle"/></div><p>
               The Consumer for the
               <code class="literal">oracle</code>
               Producer should now be available as a portlet provider and be ready to be used.
            </p><p>
               Now, assuming that the producer required a value for an
               <code class="literal">email</code>
               registration property, GateIn's WSRP consumer would have informed you that you were missing some
               information:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/config_missing.png" align="middle"/></div><p>
               </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>At this point, there is no automated way to learn about which possible values (if any) are
                     expected by the remote Producer. Sometimes, the possible values will be indicated in the
                     registration
                     property description but this is not always the case... Please refer to the specific Producer's
                     documentation.
                  </p></div><p>
               If you entered "<code class="literal">example@example.com</code>" as the value for the registration property and
               press "Save &amp;
               Refresh" once more, you would have seen something similar to:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/config_end.png" align="middle"/></div><p>
            </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e5185"/>7.6.2.2. Using XML</h4></div></div></div><p>While we recommend you use the WSRP Configuration portlet to configure Consumers, we provide an
               alternative way to configure consumers by editing the XML file located at
               <code class="filename">$GATEIN_HOME/lib/wsrp-consumer-$WSRP_VERSION.jar/conf/wsrp-consumers-config.xml</code>.
            </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version='1.0'&nbsp;encoding='UTF-8'&nbsp;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">deployments</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_wsrp_consumer_1_0&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.gatein.org/xml/ns/gatein_wsrp_consumer_1_0&nbsp;http://www.jboss.org/portal/xsd/gatein_wsrp_consumer_1_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">deployment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">wsrp-producer</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;self&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expiration-cache</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;300&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">ws-timeout</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;30000&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">endpoint-wsdl-url</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">http://localhost:8080/wsrp-producer/v2/MarkupService?wsdl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">endpoint-wsdl-url</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">registration-data</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">email</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">lang</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">en</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">lang</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">example@example.com</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">registration-data</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">wsrp-producer</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">deployment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">deployment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">wsrp-producer</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;oracle&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">expiration-cache</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;300&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">endpoint-wsdl-url</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">http://portalstandards.oracle.com/portletapp/portlets?WSDL</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">endpoint-wsdl-url</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">registration-data</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">wsrp-producer</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">deployment</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">deployments</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>
               The file as shown above specifies access to two producers:
               <code class="literal">self</code>, which consumes GateIn's own WSRP producer albeit in a version that
               assumes that the producer requires a value for an
               <code class="literal">email</code>
               registration property, and
               <code class="literal">oracle</code>, which consumes Oracle's public producer, both in configurations as shown in
               the walk-through above.
            </p><p>We will look at the details of the meaning of elements later on.</p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e5208"/>7.6.2.3. Adding remote portlets to categories</h4></div></div></div><p>
               If we go back to the Application Registry and examine the available portlets by clicking on the
               Portlet link, you will now be able to see the remote portlets if you click on the REMOTE tab in the left
               column:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/remote_portlets.png" align="middle"/></div><p>
            </p><p>
               These portlets are, of course, available to be used such as regular portlets: they can be used in
               categories and added to pages. If you use the Import Applications functionality, they will also be
               automatically imported in categories based on the keywords they define.
            </p><p>
               More specifically, if you want to add a WSRP portlet to a category, you can access these portlets by
               selecting
               <code class="literal">wsrp</code>
               in the Application Type drop-down menu:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/remote_portlets_category.png" align="middle"/></div><p>
            </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5228"/>7.6.3. Configuring access to remote producers via XML</h3></div></div></div><p>While we recommend you use the WSRP Configuration portlet to configure Consumers, we provide an
            alternative way to configure consumers by editing the XML file located at
            <code class="filename">$GATEIN_HOME/lib/wsrp-consumer-$WSRP_VERSION.jar/conf/wsrp-consumers-config.xml</code>.
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>An XML Schema defining which elements are available to configure Consumers via XML can be found
                  in
                  <code class="filename">
                     $GATEIN_HOME/lib/wsrp-integration-api-$WSRP_VERSION.jar/xsd/gatein_wsrp_consumer_1_0.xsd
                  </code>
               </p></div><p>
            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>It is important to note how the XML consumers configuration file is processed. It is read the first
                  time the WSRP service starts and the associated information is then put under control of JCR (Java
                  Content Repository). Subsequent launches of the WSRP service will use the JCR-stored information for
                  all producers already known to GateIn. More specifically, the
                  <code class="filename">wsrp-consumers-config.xml</code>
                  file is scanned for producer identifiers.
                  Any identifier that is already known will be bypassed and the JCR information associated with this
                  remote producer will be used. The information defined at the XML level is only processed for producer
                  definition for which no information is already present in JCR. Therefore, if you wish to delete a
                  producer configuration, you need to delete the associated information in the database (this can be
                  accomplished using the configuration portlet as we saw in
                  <a class="xref" href="#consumer_gui" title="7.6.2.1. Using the configuration portlet">Section 7.6.2.1, “Using the configuration portlet”</a>)
                  <span class="emphasis"><em>AND</em></span>
                  remove the associated information in
                  <code class="filename">wsrp-consumers-config.xml</code>
                  (if such information exists) as the producer will be re-created the next time the WSRP is launched if
                  that information is not removed.
               </p></div><p>
         </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e5258"/>7.6.3.1. Required configuration information</h4></div></div></div><p>Let's now look at which information needs to be provided to configure access to a remote producer.
            </p><p>First, we need to provide an identifier for the producer we are configuring so that we can refer to it
               afterwards. This is accomplished via the mandatory
               <code class="literal">id</code>
               attribute of the
               <code class="literal">&lt;wsrp-producer&gt;</code>
               element.
            </p><p>GateIn also needs to learn about the remote producer's endpoints to be able to connect to the
               remote web services and perform WSRP invocations. This is accomplished by specifying the URL for the
               WSDL description for the remote WSRP service, using the
               <code class="literal">&lt;endpoint-wsdl-url&gt;</code>
               element.
            </p><p>Both the
               <code class="literal">id</code>
               attribute and
               <code class="literal">&lt;endpoint-wsdl-url&gt;</code>
               elements are required for a functional remote producer configuration.
            </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e5284"/>7.6.3.2. Optional configuration</h4></div></div></div><p>It is also possible to provide addtional configuration, which, in some cases, might be important to
               establish a proper connection to the remote producer.
            </p><p>One such optional configuration concerns caching. To prevent useless roundtrips between the local
               consumer and the remote producer, it is possible to cache some of the information sent by the producer
               (such as the list of offered portlets) for a given duration. The rate at which the information is
               refreshed is
               defined by the
               <code class="literal">expiration-cache</code>
               attribute of the
               <code class="literal">&lt;wsrp-producer&gt;</code>
               element which specifies the refreshing period in seconds. For example, providing a value of 120 for
               expiration-cache means that the producer information will not be refreshed for 2 minutes after it has
               been somehow accessed. If no value is provided, GateIn will always access the remote producer
               regardless of whether the remote information has changed or not. Since, in most instances, the
               information provided by the producer does not change often, we recommend that you use this caching
               facility to minimize bandwidth usage.
            </p><p>It is also possible to define a timeout after which WS operations are considered as failed. This is
               helpful to avoid blocking the WSRP service, waiting forever on the service that doesn't answer. Use the
               <code class="literal">ws-timeout</code>
               attribute of the
               <code class="literal">&lt;wsrp-producer&gt;</code>
               element to specify how many milliseconds the WSRP service will wait for a response from the remote
               producer before timing out and giving up.
            </p><p>Additionally, some producers require consumers to register with them before authorizing them to access
               their offered portlets. If you know that information beforehand, you can provide the required
               registration information in the producer configuration so that the consumer can register with the remote
               producer when required.
               </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>At this time, though, only simple String properties are supported and it is not possible to
                     configure complex registration data. This should, however, be sufficient for most cases.
                  </p></div><p>
            </p><p>Registration configuration is done via the
               <code class="literal">&lt;registration-data&gt;</code>
               element. Since GateIn can generate the mandatory information for you, if the remote producer does
               not require any registration properties, you only need to provide an empty
               <code class="literal">&lt;registration-data&gt;</code>
               element. Values for the registration properties
               required by the remote producer can be provided via
               <code class="literal">&lt;property&gt;</code>
               elements. See the example below for more details. Additionally, you can override the default consumer
               name automatically provided by GateIn via the
               <code class="literal">&lt;consumer-name&gt;</code>
               element. If you choose to provide a consumer name, please remember that this should uniquely identify
               your consumer.
            </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5325"/>7.6.4. Examples</h3></div></div></div><p>
            Here is the configuration of the
            <code class="literal">selfv1</code> and <code class="literal">selfv2</code>
            consumers as found in
            <code class="filename">$GATEIN_HOME/lib/wsrp-consumer-$WSRP_VERSION.jar/conf/wsrp-consumers-config.xml</code>
            with a cache expiring every 500 seconds and with a 50 second timeout for web service operations.
         </p><div class="example"><a id="d0e5339"/><p class="title"><b>Example 7.3. </b></p><div class="example-contents"><p>
               </p><pre class="programlisting">
&lt;?xml version='1.0' encoding='UTF-8' ?&gt;
&lt;deployments xmlns="http://www.gatein.org/xml/ns/gatein_wsrp_consumer_1_0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.gatein.org/xml/ns/gatein_wsrp_consumer_1_0 http://www.jboss.org/portal/xsd/gatein_wsrp_consumer_1_0.xsd"&gt;
   &lt;deployment&gt;
      &lt;wsrp-producer id="selfv1" expiration-cache="500" ws-timeout="50000"&gt;
         &lt;endpoint-wsdl-url&gt;http://localhost:8080/wsrp-producer/v1/MarkupService?wsdl&lt;/endpoint-wsdl-url&gt;
         &lt;registration-data/&gt;
      &lt;/wsrp-producer&gt;
   &lt;/deployment&gt;
   &lt;deployment&gt;
      &lt;wsrp-producer id="selfv2" expiration-cache="500" ws-timeout="50000"&gt;
         &lt;endpoint-wsdl-url&gt;http://localhost:8080/wsrp-producer/v2/MarkupService?wsdl&lt;/endpoint-wsdl-url&gt;
         &lt;registration-data/&gt;
      &lt;/wsrp-producer&gt;
   &lt;/deployment&gt;
&lt;/deployments&gt;
               </pre><p>
            </p></div></div><br class="example-break"/><p>Here is an example of a WSRP descriptor with registration data and cache expiring every minute:
         </p><div class="example"><a id="d0e5347"/><p class="title"><b>Example 7.4. </b></p><div class="example-contents"><p>
               </p><pre class="programlisting">
&lt;?xml version='1.0' encoding='UTF-8' ?&gt;
&lt;deployments xmlns="http://www.gatein.org/xml/ns/gatein_wsrp_consumer_1_0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.gatein.org/xml/ns/gatein_wsrp_consumer_1_0 http://www.jboss.org/portal/xsd/gatein_wsrp_consumer_1_0.xsd"&gt;
&lt;deployments&gt;
   &lt;deployment&gt;
      &lt;wsrp-producer id="AnotherProducer" expiration-cache="60"&gt;
         &lt;endpoint-wsdl-url&gt;http://example.com/producer/producer?WSDL&lt;/endpoint-wsdl-url&gt;
         &lt;registration-data&gt;
            &lt;property&gt;
               &lt;name&gt;property name&lt;/name&gt;
               &lt;lang&gt;en&lt;/lang&gt;
               &lt;value&gt;property value&lt;/value&gt;
            &lt;/property&gt;
         &lt;/registration-data&gt;
      &lt;/wsrp-producer&gt;
   &lt;/deployment&gt;
&lt;/deployments&gt;</pre><p>
            </p></div></div><br class="example-break"/></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e5353"/>7.7. Consumers maintenance</h2></div></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5356"/>7.7.1. Modifying a currently held registration</h3></div></div></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e5359"/>7.7.1.1. Registration modification for service upgrade</h4></div></div></div><p>
               Producers often offer several levels of service depending on consumers' subscription levels (for
               example). This is implemented at the WSRP level with the registration concept: producers can assert which
               level of service to provide to consumers based on the values of given registration properties.
            </p><p>
               There might also be cases where you just want to update the registration information because it has
               changed. For example, the producer required you to provide a valid email and the previously email
               address is not valid anymore and needs to be updated.
            </p><p>
               It is therefore sometimes necessary to modify the registration that concretizes the service agreement
               between a consumer and a producer. Let's take the example of the producer requiring an email we
               configured in
               <a class="xref" href="#consumer_gui" title="7.6.2.1. Using the configuration portlet">Section 7.6.2.1, “Using the configuration portlet”</a>.
               If you recall, the producer was requiring registration and required a value to be provided for the
               <code class="literal">email</code>
               property.
            </p><p>
               Suppose now that we would like to update the email address that we provided to the remote producer. We
               will need to tell the producer that our registration data has been modified. Let's see how to do this.
               Assuming you
               have configured access to the producer as previously described, please go to the configuration screen for
               the
               <code class="literal">self</code>
               producer and modify the value of
               <code class="literal">email</code>
               to
               <code class="literal">foo@example.com</code>
               instead of<code class="literal">example@example.com</code>:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/modify_reg_start.png" align="middle"/></div><p>
               Now click on "Update properties" to save the change. A "Modify registration" button should now appear to
               let you send this new data to the remote producer:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/modify_reg_modify.png" align="middle"/></div><p>
               Click on this new button and, if everything went well and your updated registration has been accepted by
               the remote producer, you should see something similar to:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/modify_reg_end.png" align="middle"/></div><p>
            </p></div><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="reg_mod_error"/>7.7.1.2. Registration modification on producer error</h4></div></div></div><p>
               It can also happen that a producer administrator decided to change its requirement forregistered
               consumers. In this case, invoking operations on the producer will fail with an
               <code class="exceptionname">OperationFailedFault</code>. GateIn will attempt to help you in this
               situation. Let's walk through an example using the
               <code class="literal">self</code>
               producer. Let's assume that
               registration is requiring a valid value for an
               <code class="literal">email</code>
               registration property (as we have seen so far). If you go to the configuration screen for this producer,
               you should see:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/config_self.png" align="middle"/></div><p>

               Now suppose that the administrator of the producer now additionaly requires a value to be provided for a
               <code class="literal">name</code>
               registration property. We will actually see how to do perform this operation
               in GateIn when we examine how to configure GateIn's producer in
               <a class="xref" href="#producer_config" title="7.8. Configuring GateIn's WSRP Producer">Section 7.8, “Configuring GateIn's WSRP Producer”</a>.
               Operations with this producer will now fail. If you suspect that a registration modification is required,
               you should go to the configuration screen for this remote producer and refresh the information held by
               the consumer by pressing "Refresh &amp; Save":
               </p><div class="mediaobject" align="center"><img src="images/WSRP/modify_reg_self.png" align="middle"/></div><p>

               As you can see, the configuration screen now shows the currently held registration information and
               the expected information from the producer. Enter a value for the
               <code class="literal">name</code>
               property
               and then click on "Modify registration". If all went well and the producer accepted your new registration
               data, you should see something similar to:
               </p><div class="mediaobject" align="center"><img src="images/WSRP/modify_reg_self_end.png" align="middle"/></div><p>

               </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>WSRP 1 makes it rather difficult to ascertain for sure what caused an
                     <code class="exceptionname">OperationFailedFault</code>
                     as it is the generic exception returned by
                     producers if something didn't quite happen as expected during a method invocation. This means that
                     <code class="exceptionname">OperationFailedFault</code>
                     can be caused by several different reasons, one
                     of them being a request to modify the registration data. Please take a look at the log files to see
                     if you can gather more information as to what happened. WSRP 2 introduces an exception that is
                     specific to a request to modify registrations thus reducing the ambiguity that currently exists.
                  </p></div><p>
            </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5443"/>7.7.2. Consumer operations</h3></div></div></div><p>
            Several operations are available from the consumer list view of the WSRP configuration portlet:
            </p><div class="mediaobject" align="center"><img src="images/WSRP/consumer_operations.png" align="middle"/></div><p>
         </p><p>
            The available operations are:
            </p><div class="itemizedlist"><ul><li><p>Configure: displays the consumer details and allows user to edit them</p></li><li><p>Refresh: forces the consumer to retrieve the service description from the remote producer to
                     refresh
                     the local information (offered portlets, registration information, etc.)
                  </p></li><li><p>Activate/Deactivate: activates/deactivates a consumer, governing whether it will be available to
                     provide portlets and receive portlet invocations
                  </p></li><li><p>Register/Deregister: registers/deregisters a consumer based on whether registration is required
                     and/or acquired
                  </p></li><li><p>Delete: destroys the consumer, after deregistering it if it was registered</p></li><li><p>Export: exports some or all of the consumer's portlets to be able to later import them in a
                     different context
                  </p></li><li><p>Import: imports some or all of previously exported portlets</p></li></ul></div><p>
         </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Import/Export functionalities are only available to WSRP 2 consumers. Import functionality is only
               available if portlets had previously been exported.
            </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5480"/>7.7.3. Importing and exporting portlets</h3></div></div></div><p>Import and export are new functionalities added in WSRP 2. Exporting a portlet allows a consumer to get
            an opaque representation of the portlet which can then be use by the corresponding import operation to
            reconstitute it. It is mostly used in migration scenarios during batch operations. Since GateIn
            does not currently support automated migration of portal data, the functionality that we provide as part of
            WSRP 2 is necessarily less complete than it could be with full portal support.
         </p><p>The import/export implementation in GateIn 3.2 allows users to export portlets from a given consumer.
            These portlets can then be used to replace existing content on pages. This is accomplished by assiging
            previously exported portlets to replace the content displayed by windows on the portal's pages. Let us walk
            through an example to make things clearer.
         </p><p>Clicking on the "Export" action for a given consumer will display the list of portlets currently made
            available by this specific consumer. An example of such a list is shown below:
         </p><div class="mediaobject" align="center"><img src="images/WSRP/export_portlet_list.png" align="middle"/></div><p>Once portlets have been selected, they can be exported by clicking on the "Export" button thus making
            them available for later import:
         </p><div class="mediaobject" align="center"><img src="images/WSRP/export_done.png" align="middle"/></div><p>You can re-import the portlets directly by pressing the "Use for import" button or, on the Consumers list
            page, using the "Import" action for a given consumer. Let's assume that you used that second option and that
            you currently have several available sets of previously exported portlets to import from. After clicking the
            action link, you should see a screen similar to the one below:</p><div class="mediaobject" align="center"><img src="images/WSRP/export_list.png" align="middle"/></div><p>As you can see this screen presents the list of available exports with available operations for each.
            </p><div class="itemizedlist"><ul><li><p>View: displays the export details as previously seen when the export was first performed</p></li><li><p>Delete: deletes the selected export, asking you for confirmation first</p></li><li><p>Use for import: selects the export to import portlets from</p></li></ul></div><p>
         </p><p>Once you've selected an export to import from, you will see a screen similar to the one below:</p><div class="mediaobject" align="center"><img src="images/WSRP/import_start.png" align="middle"/></div><p>The screen displays the list of available exported portlets for the previously selected export. You can
            select which portlet you want to import by checking the checkbox next to its name. Next, you need to select
            the content of which window the imported portlet will replace. This process is done in three steps. Let's
            assume in this example that you have the following page called
            <code class="literal">page1</code>
            and containing two windows called
            <code class="literal">NetUnity WSRP 2 Interop - Cache Markup (remote)</code>
            and
            <code class="literal">/samples-remotecontroller-portlet.RemoteControl (remote)</code>
            as shown below:</p><div class="mediaobject" align="center"><img src="images/WSRP/import_original_page.png" align="middle"/></div><p>In this example, we want to replace the content of the
            <code class="literal">/samples-remotecontroller-portlet.RemoteControl (remote)</code>
            by the content of the
            <code class="literal">/ajaxPortlet.JSFAJAXPortlet</code>
            portlet that we previously exported. To do so, we will check the checkbox next to the
            <code class="literal">/ajaxPortlet.JSFAJAXPortlet</code>
            portlet name to indicate that we want to import its data and then select the
            <code class="literal">page1</code>
            in the list of available pages. The screen will then refresh to display the list of available windows on
            that page, similar to the one seen below:
         </p><div class="mediaobject" align="center"><img src="images/WSRP/import_selected_page.png" align="middle"/></div><p>Note that, at this point, we still need to select the window which content we want to replace before
            being able to complete the import operation. Let's select the
            <code class="literal">/samples-remotecontroller-portlet.RemoteControl (remote)</code>
            window, at which point the "Import" button will become enabled, indicating that we now have all the
            necessary data to perform the import. If all goes well, pressing that button should result in a screen
            similar to the one below:
         </p><div class="mediaobject" align="center"><img src="images/WSRP/import_success.png" align="middle"/></div><p>If you now take a look at the
            <code class="literal">page1</code>
            page, you should now see that the content
            <code class="literal">/samples-remotecontroller-portlet.RemoteControl (remote)</code>
            window has been replaced by the content of the
            <code class="literal">/ajaxPortlet.JSFAJAXPortlet</code>
            imported portlet and the window renamed appropriately:
         </p><div class="mediaobject" align="center"><img src="images/WSRP/import_modified_page.png" align="middle"/></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5573"/>7.7.4. Erasing local registration data</h3></div></div></div><p>
            There are rare cases where it might be required to erase the local information without being able to
            deregister first. This is the case when a consumer is registered with a producer that has been modified by
            its administrator to not require registration anymore. If that ever was to happen (most likely, it won't),
            you can erase the local registration information from the consumer so that it can resume interacting with
            the remote producer. To do so, click on "Erase local registration" button next to the registration context
            information on the consumer configuration screen:
         </p><div class="mediaobject" align="center"><img src="images/WSRP/erase_registration.png" align="middle"/></div><p>
            <span class="emphasis"><em>Warning:</em></span>
            This operation is dangerous as it can result in inability to interact with the remote producer if invoked
            when not required. A warning screen will be displayed to give you a chance to change your mind:
         </p><div class="mediaobject" align="center"><img src="images/WSRP/erase_registration_warning.png" align="middle"/></div></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="producer_config"/>7.8. Configuring GateIn's WSRP Producer</h2></div></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5592"/>7.8.1. Overview</h3></div></div></div><p>
            You can configure the behavior of Portal's WSRP Producer by using the WSRP administration interface, which
            is the preferred way, or by editing the
            <code class="filename">$GATEIN_HOME/wsrp-producer.war/WEB-INF/conf/producer/config.xml</code>
            file. Several aspects can be modified with respects to whether registration is required for consumers to
            access the Producer's services. An XML Schema for the configuration format is available at
            <code class="filename">
               $GATEIN_HOME/lib/wsrp-integration-api-$WSRP_VERSION.jar/xsd/gatein_wsrp_producer_1_0.xsd
            </code>.
         </p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e5603"/>7.8.2. Default configuration</h3></div></div></div><p>
            The default producer configuration is to require that consumers register with it before providing access its
            services but does not require any specific registration properties (apart from what is mandated by the
            WSRP standard). It does, however, require consumers to be registered before sending them a full service
            description. This means that our WSRP producer will not provide the list of offered portlets and other
            capabilities to unregistered consumers. The producer also uses the default
            <code class="classname">RegistrationPolicy</code>
            paired with the default
            <code class="classname">RegistrationPropertyValidator</code>. We will look into property
            validators in greater detail later in<a class="xref" href="#registration-configuration" title="7.8.3. Registration configuration">Section 7.8.3, “Registration configuration”</a>. Suffice to say for now
            that this allows users to customize how Portal's WSRP Producer decides whether a given registration property
            is valid or not.
         </p><p>
            GateIn provides a web interface to configure the producer's behavior. You can access it
            by clicking on the "Producer Configuration" tab of the "WSRP" page of the "admin" portal. Here's what you
            should see with the default configuration:
            </p><div class="mediaobject" align="center"><img src="images/WSRP/producer_default.png" align="middle"/></div><p>
            As would be expected, you can specify whether or not the producer will send the full service description to
            unregistered consumers, and, if it requires registration, which
            <code class="classname">RegistrationPolicy</code>
            to use (and, if needed, which
            <code class="classname">RegistrationPropertyValidator</code>), along with required
            registration property description for which consumers must provide acceptable values to successfully
            register.
         </p><p>New in GateIn 3.2, we now display the WSDL URLs to access GateIn's WSRP producer either in WSRP 1
            or WSRP 2 mode.</p></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="registration-configuration"/>7.8.3. Registration configuration</h3></div></div></div><p>
            In order to require consumers to register with Portal's producer before interacting with it, you need to
            configure Portal's behavior with respect to registration. Registration is optional, as are registration
            properties. The producer can require registration without requiring consumers to pass any registration
            properties as is the case in the default configuration. Let's configure our producer starting with a blank
            state:
            </p><div class="mediaobject" align="center"><img src="images/WSRP/producer_blank.png" align="middle"/></div><p>
            We will allow unregistered consumers to see the list of offered portlets so we leave the first checkbox
            ("Access to full service description requires consumers to be registered.") unchecked. We will, however,
            specify that consumers will need to be registered to be able to interact with our producer. Check the second
            checkbox ("Requires registration. Modifying this information will trigger invalidation of consumer
            registrations."). The screen should now refresh and display:
            </p><div class="mediaobject" align="center"><img src="images/WSRP/producer_registration.png" align="middle"/></div><p>
            You can specify the fully-qualified name for your
            <code class="classname">RegistrationPolicy</code>
            and
            <code class="classname">RegistrationPropertyValidator</code>
            there. We will keep the default value. See
            <a class="xref" href="#custom_registration" title="7.8.3.1. Customization of Registration handling behavior">Section 7.8.3.1, “Customization of Registration handling behavior”</a>
            for more details. Let's add, however, a registration property called
            <code class="literal">email</code>. Click "Add property" and enter the appropriate information in the fields,
            providing a description for the registration property that can be used by consumers to figure out its
            purpose:
            </p><div class="mediaobject" align="center"><img src="images/WSRP/producer_email.png" align="middle"/></div><p>
            Press "Save" to record your modifications.

            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>At this time, only String (xsd:string) properties are supported. If your application requires more
                  complex properties, please let us know.
               </p></div><p>

            </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>If consumers are already registered with the producer, modifying the configuration of required
                  registration
                  information will trigger the invalidation of held registrations, requiring consumers to modify their
                  registration before being able to access the producer again. We saw the consumer side of that process
                  in
                  <a class="xref" href="#reg_mod_error" title="7.7.1.2. Registration modification on producer error">Section 7.7.1.2, “Registration modification on producer error”</a>.
               </p></div><p>
         </p><div class="sect3" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="custom_registration"/>7.8.3.1. Customization of Registration handling behavior</h4></div></div></div><p>
               Registration handling behavior can be customized by users to suit their Producer needs. This is
               accomplished by providing an implementation of the
               <code class="classname">RegistrationPolicy</code>
               interface. This interface defines methods that are called by Portal's Registration service so that
               decisions can be made appropriately. A default registration policy that provides basic
               behavior is provided and should be enough for most user needs.
            </p><p>
               While the default registration policy provides default behavior for most registration-related aspects,
               there is still one aspect that requires configuration: whether a given value for a registration property
               is acceptable by the WSRP Producer. This is accomplished by plugging a
               <code class="classname">RegistrationPropertyValidator</code>
               in the default registration policy. This allows users to define their own validation mechanism.
            </p><p>
               Please refer to the
               <span class="trademark">Javadoc</span>™
               for
               <code class="classname">org.gatein.registration.RegistrationPolicy</code>
               and
               <code class="classname">org.gatein.registration.policies.RegistrationPropertyValidator</code>
               for more
               details on what is expected of each method.
            </p><p>Defining a registration policy is required for the producer to be correctly configured. This is
               accomplished by specifying the qualified class name of the registration policy. Since we anticipate that
               most users will use the default registration policy, it is possible to provide the class
               name of your custom property validator instead to customize the default registration policy behavior.
               Note that property validators are only used by the default policy.

               </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Since the policy or the validator are defined via their class name and dynamically loaded, it is
                     important that you make sure that the identified class is available to the application server. One
                     way
                     to accomplish that is to deploy your policy implementation as JAR file in your AS instance deploy
                     directory. Note also that, since both policies and validators are dynamically instantiated, they
                     must
                     provide a default, no-argument constructor.
                  </p></div><p>
            </p></div></div><div class="sect2" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="strict-mode"/>7.8.4. WSRP validation mode</h3></div></div></div><p>The lack of conformance kit and the wording of the WSRP specification leaves room for differing
            interpretations, resulting in interoperability issues. It is therefore possible to encounter issues when
            using consumers from different vendors. We have experienced such issues and have introduced a way to relax
            the validation that our WSRP producer performs on the data provided by consumers to help with
            interoperability by accepting data that would normally be invalid. Note that we only relax our validation
            algorithm on aspects of the specification that are deemed harmless such as invalid language codes.
         </p><p>
            By default, the WSRP producer is configured in strict mode. If you experience issues with a given consumer,
            you might want to try to relax the validation mode. This is accomplished by unchecking the "Use strict WSRP
            compliance." checkbox on the Producer configuration screen.
         </p></div></div></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Advanced"/>Chapter 8. Advanced Development</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-Reference_Guide-Foundations">8.1. Foundations</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Kernel">8.1.1. GateIn Kernel</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Configuring_services">8.1.2. Configuring services</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Configuration_syntax">8.1.3. Configuration syntax</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Init_params">8.1.4. InitParams configuration object</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Configuring_portal">8.1.5. Configuring a portal container</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Extension_mechanism">8.1.6. GateIn Extension Mechanism, and Portal Extensions</a></span></dt><dt><span class="section"><a href="#sect-Reference_Guide-Foundations-Multiple_portals">8.1.7. Running Multiple Portals</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Foundations"/>8.1. Foundations</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Foundations-Kernel"/>8.1.1. GateIn Kernel</h3></div></div></div><p>
         GateIn 3.2 is built as a set of services on top of a dependency injection kernel. The kernel provides configuration, lifecycle handling, component scopes, and some core services.
      </p><p>
         Service components exist in two scopes. First scope is represented by <span class="bold"><strong>RootContainer</strong></span> - it contains services that exist independently of any portal, and can be
         accessed by all portals.
      </p><p>
         Second scope is portal-private in the form of <span class="bold"><strong>PortalContainer</strong></span>. Each portal lives in an instance of PortalContainer.
         This scope contains services that are common for a set of portals, and services which should not be shared by all portals.
      </p><p>
         </p><div class="mediaobject" align="center"><img src="images/Advanced/Foundations/PortalContainers.png" align="middle"/></div><p>
      </p><p>
         Whenever a specific service is looked up through PortalContainer, and the service is not available, the lookup is
         delegated further up to RootContainer. We can therefore have default instance of a certain component in
         RootContainer, and portal specific instances in some or all PortalContainers, that override the default
         instance.
      </p><p>
         Whenever your portal application has to be integrated more closely with GateIn services, the way to do it is by
         looking up these services through PortalContainer. Be careful though - only officially documented services
         should be accessed this way, and used according to documentation, as most of the services are an implementation
         detail of GateIn, and subject to change without notice.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Foundations-Configuring_services"/>8.1.2. Configuring services</h3></div></div></div><p>GateIn Kernel uses dependency injection to create services based on <span class="bold"><strong>configuration.xml</strong></span> configuration files.
         The location of the configuration files determines if services are placed into RootContainer scope, or into PortalContainer scope.
         All configuration.xml files located at <span class="bold"><strong>conf/configuration.xml</strong></span> in the classpath (any directory, or any jar in the classpath) will have their
      services configured at RootContainer scope.
      All configuration.xml files located at <span class="bold"><strong>conf/portal/configuration.xml</strong></span> in the classpath will have their services configured at PortalContainer scope.
      Additionally, <span class="bold"><strong>portal extensions</strong></span> can contain configuration in <span class="bold"><strong>WEB-INF/conf/configuration.xml</strong></span>, and will also have their services configured at PortalContainer scope.
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Portal extensions are described later on.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Foundations-Configuration_syntax"/>8.1.3. Configuration syntax</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Foundations-Configuration_syntax-Component"/>8.1.3.1. Components</h4></div></div></div><p>A service component is defined in <span class="bold"><strong>configuration.xml</strong></span> by using <span class="bold"><strong>&lt;component&gt;</strong></span> element.</p><p>There is only one required information when defining a service - the service implementation class, specified using <span class="bold"><strong>&lt;type&gt;</strong></span></p><p>Every component has a <span class="bold"><strong>&lt;key&gt;</strong></span> that identifies it. If not explicitly set, a key defaults to the value of &lt;type&gt;.
         If key can be loaded as a class, a Class object is used as a key, otherwise a String is used.</p><p>The usual approach is to specify an interface as a key.</p><div class="example"><a id="d0e5786"/><p class="title"><b>Example 8.1. Example of service component configuration:</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;ISO-8859-1&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">configuration</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.database.HibernateService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.database.impl.HibernateServiceImpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Foundations-Configuration_syntax-External_plugins"/>8.1.3.2. External Plugins</h4></div></div></div><p>GateIn Kernel supports non-component objects that can be configured, instantiated, and injected into registered components, using method calls.
         The mechanism is called 'plugins', and allows portal extensions to add additional configurations to core services.</p><p>External plugin is defined by using <span class="bold"><strong>&lt;external-component-plugins&gt;</strong></span> wrapper element which contains one or more
            <span class="bold"><strong>&lt;component-plugin&gt;</strong></span> definitions. &lt;external-component-plugins&gt; uses <span class="bold"><strong>&lt;target-component&gt;</strong></span> to specify a target service component that will receive injected objects.</p><p>Every &lt;component-plugin&gt; defines an implementation type, and a method on target component
            to use for injection (<span class="bold"><strong>&lt;set-method&gt;</strong></span>). </p><p>A plugin implementation class has to implement <span class="bold"><strong>org.exoplatform.container.component. ComponentPlugin</strong></span> interface.</p><p>In the following example <span class="bold"><strong>PortalContainerDefinitionPlugin</strong></span> implements ComponentPlugin:</p><div class="example"><a id="d0e5822"/><p class="title"><b>Example 8.2. PortalContainerDefinitionPlugin</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">configuration</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">external-component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">target-component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.container.definition.PortalContainerConfig</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">target-component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;plugin&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Add&nbsp;PortalContainer&nbsp;Definitions</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;method&nbsp;to&nbsp;call&nbsp;on&nbsp;the&nbsp;PortalContainerConfig</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;order&nbsp;to&nbsp;register&nbsp;the&nbsp;PortalContainerDefinitions&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">registerPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;fully&nbsp;qualified&nbsp;name&nbsp;of&nbsp;the&nbsp;PortalContainerDefinitionPlugin&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.container.definition.PortalContainerDefinitionPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">external-component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Foundations-Configuration_syntax-Includes"/>8.1.3.3. Includes, and special URLs</h4></div></div></div><p>It is possible to break <span class="bold"><strong>configuration.xml</strong></span> file into many smaller files, that are then included into a 'master' configuration file.
         The included files are complete configuration xml documents by themselves - they are not fragments of text.</p><p>An example configuration.xml that 'outsources' its content into several files:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">configuration</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/sample-ext/jcr/jcr-configuration.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">war:/conf/sample-ext/portal/portal-configuration.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">import</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>We see a special URL being used to reference another configuration file.
            URL schema <span class="bold"><strong>'war:'</strong></span> means, that the path that follows is resolved relative to current PortalContainer's servlet context resource path, starting at <span class="bold"><strong>WEB-INF</strong></span> as a root.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Current PortalContainer is really a newly created PortalContainer, as war: URLs only make sense for PortalContainer scoped configuration.</p></div><p>Also, thanks to extension mechanism, the servlet context used for resource loading is a <span class="bold"><strong>unified servlet context</strong></span> (as explaned in a later section).</p><p>To have include path resolved relative to current classpath (context classloader), use <span class="bold"><strong>'jar:'</strong></span> URL schema.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Foundations-Configuration_syntax-Special_vars"/>8.1.3.4. Special variables</h4></div></div></div><p>Configuration files may contain a <span class="bold"><strong>special variable</strong></span> reference <span class="emphasis"><em>${container.name.suffix}</em></span>. This variable resolves to the name of the current portal container, prefixed by underscore (_).
         This facilitates reuse of configuration files in situations where portal specific unique names need to be assigned to some resources
         (i.e. JNDI names, Database / DataSource names, JCR repository names, etc ...).</p><p>This variable is only defined when there is a current PortalContainer available - only for PortalContainer scoped services.</p><p>A good example for this is <span class="bold"><strong>HibernateService</strong></span>:</p><div class="example"><a id="sect-Reference_Guide-Foundations-Configuration_syntax-Special_vars-Example"/><p class="title"><b>Example 8.3. HibernateService using variables</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;ISO-8859-1&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">configuration</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.database.HibernateService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jmx-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">database:type=HibernateService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jmx-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.database.impl.HibernateServiceImpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernate.properties</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Default&nbsp;Hibernate&nbsp;Service</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.show_sql&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.cglib.use_reflection_optimizer&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.connection.url&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jdbc:hsqldb:file:../temp/data/exodb${container.name.suffix}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.connection.driver_class&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hsqldb.jdbcDriver&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.connection.autocommit&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.connection.username&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sa&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.connection.password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.dialect&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.dialect.HSQLDialect&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.c3p0.min_size&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;5&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.c3p0.max_size&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;20&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.c3p0.timeout&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1800&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hibernate.c3p0.max_statements&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;50&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Foundations-Init_params"/>8.1.4. InitParams configuration object</h3></div></div></div><p>
         <code class="literal">InitParams</code> is a configuration object that is essentially a map of key-value pairs,
         where key is always a <code class="literal">String</code>, and value can be any type that can be described
         using kernel configuration xml.
      </p><p>
         Service components that form the GateIn 3.2 insfrastructure use <code class="literal">InitParams</code> object to configure themselves.
         A component can have one instance of InitParams injected at most. If the service component's constructor takes InitParams
         as any of the parameters it will automatically be injected at component instantiation time. The xml configuration
         for a service component that expects InitParams object must include &lt;init-params&gt; element (even if an empty one).
      </p><p>
         Let's use an example to see how the kernel xml configuration syntax looks for creating <code class="literal">InitParams</code> instances.
      </p><div class="example"><a id="d0e5904"/><p class="title"><b>Example 8.4. InitParams - properties-param</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.naming.InitialContextInitializer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.naming.InitialContextInitializer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default-properties</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Default&nbsp;initial&nbsp;context&nbsp;properties</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.naming.factory.initial&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.naming.SimpleContextFactory&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/><p>
         InitParams object description begins with &lt;init-params&gt; element. It can have zero or more children elements
         each of which is one of &lt;value-param&gt;, &lt;values-param&gt;, &lt;properties-param&gt;, or &lt;object-param&gt;.
         Each of these child elements takes a &lt;name&gt; that serves as a map entry key, and an optional &lt;description&gt;.
         It also takes a type-specific value specification.
      </p><p>
         For &lt;properties-param&gt; the value specification is in the form of one or more &lt;property&gt; elements,
         each of which specifies two strings - a property name, and a property value. Each &lt;properties-params&gt;
         defines one <code class="literal">java.util.Properties</code> instance. Also see
         <a class="xref" href="#sect-Reference_Guide-Foundations-Configuration_syntax-Special_vars-Example" title="Example 8.3. HibernateService using variables">Example 8.3, “HibernateService using variables”</a> for an example.
      </p><div class="example"><a id="d0e5918"/><p class="title"><b>Example 8.5. InitParams - value-param</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.transaction.TransactionService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.transaction.impl.jotm.TransactionServiceJotmImpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">timeout</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">5</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/><p>
         For &lt;value-param&gt; the value specification is in the form of &lt;value&gt; element, which defines
         one <code class="literal">String</code> instance.         
      </p><div class="example"><a id="d0e5928"/><p class="title"><b>Example 8.6. InitParams - values-param</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.resources.ResourceBundleService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.resources.impl.SimpleResourceBundleService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">classpath.resources</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;resources&nbsp;&nbsp;that&nbsp;start&nbsp;with&nbsp;the&nbsp;following&nbsp;package&nbsp;name&nbsp;should&nbsp;be&nbsp;load&nbsp;from&nbsp;file&nbsp;system</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">locale.portlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">init.resources</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Store&nbsp;the&nbsp;following&nbsp;resources&nbsp;into&nbsp;the&nbsp;db&nbsp;for&nbsp;&nbsp;the&nbsp;first&nbsp;launch&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">locale.test.resources.test</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal.resource.names</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;properties&nbsp;files&nbsp;of&nbsp;&nbsp;the&nbsp;portal&nbsp;,&nbsp;&nbsp;those&nbsp;file&nbsp;will&nbsp;be&nbsp;merged</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;one&nbsp;ResourceBundle&nbsp;properties&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">local.portal.portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">local.portal.custom</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">values-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/><p>
      For &lt;values-param&gt; the value specification is in the form of one or more &lt;value&gt; elements,
         each of which represents one <code class="literal">String</code> instance, where all the <code class="literal">String</code> values
         are then collected into a <code class="literal">java.util.List</code> instance.
      </p><div class="example"><a id="d0e5944"/><p class="title"><b>Example 8.7. InitParams - object-param</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.cache.CacheService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">key</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jmx-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">cache:type=CacheService</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jmx-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.cache.impl.CacheServiceImpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">cache.config.default</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">The&nbsp;default&nbsp;cache&nbsp;configuration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.cache.ExoCacheConfig&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;maxSize&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">int</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">300</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">int</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;liveTime&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">long</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">300</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">long</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;distributed&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">boolean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">boolean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;implementation&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.cache.concurrent.ConcurrentFIFOExoCache</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/><p>
         For &lt;object-param&gt; in our case, the value specification comes in a form of &lt;object&gt; element, which is
         used for POJO style object specification (you specify an implementation class - &lt;type&gt;, and property values - &lt;field&gt;).
      </p><p>
         Also see <a class="xref" href="#sect-Reference_Guide-Foundations-Configuring_portal_Container_declaration_example" title="Example 8.8. Portal container declaration example">Example 8.8, “Portal container declaration example”</a>
         for an example of specifying a field of <code class="literal">Collection</code> type. 
      </p><p>
      The <code class="literal">InitParams</code> structure - the names and types of entries is specific for each service,
         as it is the code inside service components's class that decides what entry names to look up and what types
         it expects to find.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Foundations-Configuring_portal"/>8.1.5. Configuring a portal container</h3></div></div></div><p>
         A <span class="bold"><strong>portal container</strong></span> is defined by several attributes.
      </p><p>
         First, there is a <span class="bold"><strong>portal container name</strong></span>, which is always equal to URL context to which the current portal is bound.
      </p><p>
         Second, there is a <span class="bold"><strong>REST context name</strong></span>, which is used for REST access to portal application - every portal has
         exactly one (unique) REST context name.
      </p><p>
         Then, there is a <span class="bold"><strong>realm name</strong></span> which is the name of security realm used for authentication when users log into the
         portal.
      </p><p>
         Finally, there is a list of <span class="bold"><strong>Dependencies</strong></span> - other web applications, whose resources are visible to current
         portal (via extension mechanism described later), and are searched in the specified order.
      </p><div class="example"><a id="sect-Reference_Guide-Foundations-Configuring_portal_Container_declaration_example"/><p class="title"><b>Example 8.8. Portal container declaration example</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">configuration</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd</span><br />
<span class="xml_attribute_value">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.exoplaform.org/xml/ns/kernel_1_0.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">external-component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;full&nbsp;qualified&nbsp;name&nbsp;of&nbsp;the&nbsp;PortalContainerConfig&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">target-component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.container.definition.PortalContainerConfig</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">target-component</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;plugin&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Add&nbsp;PortalContainer&nbsp;Definitions</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;method&nbsp;to&nbsp;call&nbsp;on&nbsp;the&nbsp;PortalContainerConfig</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;order&nbsp;to&nbsp;register&nbsp;the&nbsp;PortalContainerDefinitions&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">registerPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;full&nbsp;qualified&nbsp;name&nbsp;of&nbsp;the&nbsp;PortalContainerDefinitionPlugin&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.container.definition.PortalContainerDefinitionPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.container.definition.PortalContainerDefinition&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;portal&nbsp;container&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;context&nbsp;name&nbsp;of&nbsp;the&nbsp;rest&nbsp;web&nbsp;application&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;restContextName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">rest</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;realm&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;realmName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo-domain</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;All&nbsp;the&nbsp;dependencies&nbsp;of&nbsp;the&nbsp;portal&nbsp;container&nbsp;ordered&nbsp;by&nbsp;loading&nbsp;priority&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dependencies&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">eXoResources</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">dashboard</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exoadmin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">eXoGadgets</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">eXoGadgetServer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">rest</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">web</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">wsrp-producer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;The&nbsp;sample-ext&nbsp;has&nbsp;been&nbsp;added&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;dependency&nbsp;list</span><span class="xml_plain"></span><br />
<span class="xml_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;order&nbsp;to&nbsp;have&nbsp;the&nbsp;highest&nbsp;priority&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sample-ext</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">external-component-plugins</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Dependencies are part of the extension mechanism.</p></div><p>
         Every <span class="bold"><strong>portal container</strong></span> is represented by a <span class="bold"><strong>PortalContainer instance</strong></span>, which contains:
         </p><div class="itemizedlist"><ul><li><p>associated <span class="bold"><strong>ExoContainerContext</strong></span>, which contains information about the portal</p></li><li><p><span class="bold"><strong>unified servlet context</strong></span>, for web-archive-relative resource loading</p></li><li><p><span class="bold"><strong>unified classloader</strong></span>, for classpath based resource loading</p></li><li><p>methods for retrieving services</p></li></ul></div><p>
      </p><p>
         <span class="bold"><strong>Unified servlet context</strong></span>, and <span class="bold"><strong>unified classloader</strong></span> are part of the <span class="bold"><strong>extension mechanism</strong></span> (explained in next section),
         and provide standard API (ServletContext, ClassLoader) with specific resource loading behavior - visibility into associated web application archives,
         configured with Dependencies property of PortalContainerDefinition. Resources from other web applications are queried in the order specified by Dependencies.
         The later entries in the list override the previous ones.
      </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Foundations-Extension_mechanism"/>8.1.6. GateIn Extension Mechanism, and Portal Extensions</h3></div></div></div><p>
         <span class="bold"><strong>Extension mechanism</strong></span> is a functionality that makes it possible to override portal resources in an almost
         plug-and-play fashion - just drop in a .war archive with the resources, and configure its position on the portal's
         classpath.
         This way any customizations of the portal don't have to involve unpacking and repacking the original portal
         .war archives. Instead, you create your own .war archive with changed resources, that override the resources in
         the original archive.
      </p><p>
         A web archive packaged in a way to be used through extension mechanism is called <span class="bold"><strong>portal extension</strong></span>.
      </p><p>
         There are two steps necessary to create a portal extension.
      </p><p>
         First, declare <span class="bold"><strong>PortalConfigOwner</strong></span> servlet context listener in web.xml of your web application.
      </p><div class="example"><a id="d0e6059"/><p class="title"><b>Example 8.9. Example of a portal extension called sample-ext:</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;ISO-8859-1&quot;&nbsp;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">web-app</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain">&nbsp;-//</span><span class="xml_attribute_name">Sun</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">Microsystems</span><span class="xml_plain">,&nbsp;</span><span class="xml_attribute_name">Inc.</span><span class="xml_plain">//</span><span class="xml_attribute_name">DTD</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">Web</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">Application</span><span class="xml_plain">&nbsp;2.3//</span><span class="xml_attribute_name">EN</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">http:</span><span class="xml_plain">//</span><span class="xml_attribute_name">java.sun.com</span><span class="xml_plain">/</span><span class="xml_attribute_name">dtd</span><span class="xml_plain">/</span><span class="xml_attribute_name">web-app_2_3.dtd</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web-app</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sample-ext</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.container.web.PortalContainerConfigOwner</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener-class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">listener</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">web-app</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div></div><br class="example-break"/><p>
         Then, add the servlet context name of this web application in proper place in the list of Dependencies of the PortalContainerDefinition
         of all the portal containers that you want to have access to its resources.
      </p><p>
         After this step your web archive will be on portal's unified classpath, and unified servlet context resource path.
         The later in the Dependencies list your application is, the higher priority it has when resources are loaded by portal.
      </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>See 'Configuring a portal' section for example of PortalContainerDefinition, that has sample-ext at the end of its list of Dependencies.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Foundations-Multiple_portals"/>8.1.7. Running Multiple Portals</h3></div></div></div><p>
         It is possible to run several independent portal containers - each bound to a different URL context - within
         the same JVM instance. This kind of setup is very efficient from administration and resource consumption
         aspect. The most elegant way to <span class="bold"><strong>reuse</strong></span> configuration for different coexisting portals is by way of extension
         mechanism - by <span class="bold"><strong>inheriting</strong></span> resources and configuration from existing web archives, and just <span class="bold"><strong>adding</strong></span> extra resources to it,
         and <span class="bold"><strong>overriding</strong></span> those that need to be changed by including modified copies.
      </p><p>
         In order for a portal application to correctly function when deployed in multiple portals, the application may
         have to dynamically query the information about the current portal container. The application should not make
         any assumptions about the name, and other information of the current portal, as there are now multiple different portals in play.
      </p><p>
         At any point during request processing, or lifecycle event processing, your application can retrieve this
         information through <span class="bold"><strong>org.exoplatform.container. ExoContainerContext</strong></span>.
         Sometimes your application needs to make sure that the proper <span class="bold"><strong>PortalContainer</strong></span>
         - the source of <span class="bold"><strong>ExoContainerContext</strong></span> - is associated with the current call.
      </p><p>
         If you ship servlets or servlet filters as part of your portal application, and if you need to access portal
         specific resources at any time during the processing of the servlet or filter request, then you need to make
         sure the servlet/filter is associated with the current container.
      </p><p>
         The proper way to do that is to make your servlet extend <span class="bold"><strong>org.exoplatform.container.web. AbstractHttpServlet</strong></span>
         class.
         This will not only properly initialize current <span class="bold"><strong>PortalContainer</strong></span> for you, but will also set the current thread's
         context classloader to one that looks for resources in associated web applications in the order specified by
         <span class="bold"><strong>Dependencies</strong></span> configuration (as explained in Extension mechanism section).
      </p><p>
         Similarly for filters, make sure your filter class extends <span class="bold"><strong>org.exoplatform.container.web. AbstractFilter</strong></span>.
         Both <span class="bold"><strong>AbstractHttpServlet</strong></span>, and <span class="bold"><strong>AbstractFilter</strong></span> have a method <span class="bold"><strong>getContainer()</strong></span>,
         which returns the current <span class="bold"><strong>PortalContainer</strong></span>.

         If your servlet handles the requests by implementing a <span class="bold"><strong>service()</strong></span> method, you need to rename that method to match
         the following signature:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_javadoc_comment">/**</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*&nbsp;Use&nbsp;this&nbsp;method&nbsp;instead&nbsp;of&nbsp;Servlet.service()</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*/</span>
<!--  --><br/><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onService</span><span class="java_separator">(</span><span class="java_type">ExoContainer</span><span class="java_plain">&nbsp;container</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">HttpServletRequest</span><span class="java_plain">&nbsp;req</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">HttpServletResponse</span><span class="java_plain">&nbsp;res</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">IOException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
         The reason is that AbstractHttpServlet implements service() to perform its interception, and you don't want to
         overwrite (by overriding) this functionality.
         </p></div><p>
         You may also need to access portal information within your <span class="bold"><strong>HttpSessionListener</strong></span>. Again, make sure to extend the
         provided abstract class - <span class="bold"><strong>org.exoplatform.container.web. AbstractHttpSessionListener</strong></span>.
         Also, modify your method signatures as follows:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_javadoc_comment">/**</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*&nbsp;Use&nbsp;this&nbsp;method&nbsp;instead&nbsp;of&nbsp;HttpSessionListener.sessionCreated()</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*/</span>
<!--  --><br/><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onSessionCreated</span><span class="java_separator">(</span><span class="java_type">ExoContainer</span><span class="java_plain">&nbsp;container</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">HttpSessionEvent</span><span class="java_plain">&nbsp;event</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_javadoc_comment">/**</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*&nbsp;Use&nbsp;this&nbsp;method&nbsp;instead&nbsp;of&nbsp;HttpSessionListener.sessionDestroyed()</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*/</span>
<!--  --><br/><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;onSessionDestroyed</span><span class="java_separator">(</span><span class="java_type">ExoContainer</span><span class="java_plain">&nbsp;container</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">HttpSessionEvent</span><span class="java_plain">&nbsp;event</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
         There is another method you have to implement in this case:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_javadoc_comment">/**</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*&nbsp;Method&nbsp;should&nbsp;return&nbsp;true&nbsp;if&nbsp;unified&nbsp;servlet&nbsp;context,</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*&nbsp;and&nbsp;unified&nbsp;classloader&nbsp;should&nbsp;be&nbsp;made&nbsp;available</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;*/</span>
<!--  --><br/><span class="java_keyword">protected</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;requirePortalEnvironment</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
         If this method returns true, current thread's context classloader is set up according to <span class="bold"><strong>Dependencies</strong></span>
         configuration, and availability of the associated web applications. If it returns false, the standard
         application separation rules are used for resource loading (effectively turning off the
         extension mechanism). This method exists on <span class="bold"><strong>AbstractHttpServlet</strong></span> and <span class="bold"><strong>AbstractFilter</strong></span> as well, where there is a
         default implementation that automatically returns true, when it detects there is a current PortalContainer
         present, otherwise it returns false.

      </p><p>
         We still have to explain how to properly perform <span class="bold"><strong>ServletContextListener</strong></span> based initialization, when you need
         access to current PortalContainer.
      </p><p>
         GateIn has no direct control over the deployment of application archives (.war, .ear files) - it is the
         application server that performs the deployment. For <span class="bold"><strong>extension mechanism</strong></span> to work properly, the applications,
         associated with the portal via <span class="bold"><strong>Dependencies</strong></span> configuration, have to be deployed before the portal, that depends
         on them, is initialized. On the other hand, these applications may require an already initialized PortalContainer
         to properly initialize themselves - we have a recursive dependency problem. To resolve this problem, a
         mechanism of <span class="bold"><strong>initialization tasks</strong></span>, and <span class="bold"><strong>task queues</strong></span>, was put in place. Web applications that depend on current
         PortalContainer for their initialization have to avoid performing their initialization directly in some
         ServletContextListener executed during their deployment (before any PortalContainer was initialized). Instead,
         a web application should package its initialization logic into an init task of appropriate type, and only use
         ServletContextListener to insert the init task instance into the proper init tasks queue.
      </p><p>An example of this is Gadgets application which registers Google gadgets with the current PortalContainer:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">GadgetRegister</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">ServletContextListener</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;contextInitialized</span><span class="java_separator">(</span><span class="java_type">ServletContextEvent</span><span class="java_plain">&nbsp;event</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Create</span><span class="java_plain">&nbsp;a&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;post</span><span class="java_operator">-</span><span class="java_plain">init&nbsp;task</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">PortalContainerPostInitTask</span><span class="java_plain">&nbsp;task&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">PortalContainerPostInitTask</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;execute</span><span class="java_separator">(</span><span class="java_type">ServletContext</span><span class="java_plain">&nbsp;context</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">PortalContainer</span><span class="java_plain">&nbsp;portalContainer</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SourceStorage</span><span class="java_plain">&nbsp;sourceStorage&nbsp;</span><span class="java_operator">=</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">(</span><span class="java_type">SourceStorage</span><span class="java_separator">)</span><span class="java_plain">&nbsp;portalContainer</span><span class="java_separator">.</span><span class="java_plain">getComponentInstanceOfType</span><span class="java_separator">(</span><span class="java_type">SourceStorage</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">RuntimeException</span><span class="java_plain">&nbsp;e</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;e</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;e</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">RuntimeException</span><span class="java_separator">(</span><span class="java_literal">&quot;Initialization&nbsp;failed:&nbsp;&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;e</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">};</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Add</span><span class="java_plain">&nbsp;post</span><span class="java_operator">-</span><span class="java_plain">init&nbsp;task&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;execution&nbsp;on&nbsp;all&nbsp;the&nbsp;portal&nbsp;containers</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;that&nbsp;depend&nbsp;on&nbsp;the&nbsp;given&nbsp;</span><span class="java_type">ServletContext</span><span class="java_plain">&nbsp;according&nbsp;to&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">PortalContainerDefinitions</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">via&nbsp;</span><span class="java_type">Dependencies</span><span class="java_plain">&nbsp;configuration</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">PortalContainer</span><span class="java_separator">.</span><span class="java_plain">addInitTask</span><span class="java_separator">(</span><span class="java_plain">event</span><span class="java_separator">.</span><span class="java_plain">getServletContext</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;task</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
         The above example uses <span class="bold"><strong>PortalContainerPostInitTask</strong></span>, which gets executed after the portal container has been
         initialized. In some situations you may want to execute initialization after portal container was instantiated,
         but before it was initialized - use <span class="bold"><strong>PortalContainerPreInitTask</strong></span> in that case. Or, you may want to execute
         initialization after all the post-init tasks have been executed - use <span class="bold"><strong>PortalContainerPostCreateTask</strong></span> in that case.
      </p><p>
         One more area that may need your attention are <span class="bold"><strong>LoginModules</strong></span>. If you use custom LoginModules, that require
         current ExoContainer, make sure they extend <span class="bold"><strong>org.exoplatform.services.security.jaas.AbstractLoginModule</strong></span> for
         proper initialization. AbstractLoginModule also takes care of the basic configuration - it recognizes two
         initialization options - <span class="bold"><strong>portalContainerName</strong></span>, and <span class="bold"><strong>realmName</strong></span> whose values you can access via protected fields of
         the same name.
      </p></div></div></div></div></body></html>