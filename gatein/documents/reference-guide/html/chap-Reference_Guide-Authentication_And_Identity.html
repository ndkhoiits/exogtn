<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 6. Authentication and Identity</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="GateIn Reference Guide"/><link rel="up" href="index.html" title="GateIn Reference Guide"/><link rel="prev" href="chap-Reference_Guide-Gadget_development.html" title="Chapter 5. Gadget development"/><link rel="next" href="wsrp.html" title="Chapter 7. Web Services for Remote Portlets (WSRP)"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="chap-Reference_Guide-Gadget_development.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="wsrp.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Authentication_And_Identity"/>Chapter 6. Authentication and Identity</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Predefined_User_Configuration">6.1. Predefined User Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Predefined_User_Configuration-Overview">6.1.1. Overview</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_adding_users_groups_and_membership_types">6.1.2. Plugin for adding users, groups and membership types</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Predefined_User_Configuration-Membership_types">6.1.3. Membership types</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Predefined_User_Configuration-Groups">6.1.4. Groups</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Predefined_User_Configuration-Users">6.1.5. Users</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_monitoring_user_creation">6.1.6. Plugin for monitoring user creation</a></span></dt></dl></dd><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Authentication_Token_Configuration">6.2. Authentication Token Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Authentication_Token_Configuration-What_is_token_service">6.2.1. What is Token Service?</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Authentication_Token_Configuration-Implement_token_services_API">6.2.2. Implementing the Token Service API</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Authentication_Token_Configuration-Configure_token_services">6.2.3. Configuring token services</a></span></dt></dl></dd><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-PicketLink_IDM_integration">6.3. PicketLink IDM integration</a></span></dt><dd><dl><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-PicketLink_IDM_integration-Configuration_files">6.3.1. Configuration files</a></span></dt></dl></dd><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-APIs-Organization_API">6.4. Organization API</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Accessing_User_Profile">6.5. Accessing User Profile</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#chap-Reference_Guide-SSO_Single_Sign_On">6.6. Single-Sign-On (SSO)</a></span></dt><dd><dl><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Single_Sign_On-Overview">6.6.1. Overview</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Single_Sign_On-CAS_Central_Authentication_Service">6.6.2. Central Authentication Service (CAS)</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Single_Sign_On-JOSSO">6.6.3. JOSSO</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#sect-Reference_Guide-Single_Sign_On-OpenSSO_The_Open_Web_SSO_project">6.6.4. OpenSSO - The Open Web SSO project</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Authentication_And_Identity.html#Single_Sign_On-SPNEGO">6.6.5. SPNEGO</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration"/>6.1. Predefined User Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Overview"/>6.1.1. Overview</h3></div></div></div><p>
			To specify the initial Organization configuration, the content of <code class="literal">02portal.war:/WEB-INF/conf/organization/organization-configuration.xml </code> should be edited. This file uses the portal XML configuration schema. It lists several configuration plugins.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_adding_users_groups_and_membership_types"/>6.1.2. Plugin for adding users, groups and membership types</h3></div></div></div><p>
			The plugin of type <code class="literal">org.exoplatform.services.organization.OrganizationDatabaseInitializer</code> is used to specify a list of membership types, a list of groups, and a list of users to be created.
		</p><p>
			The <span class="bold"><strong>checkDatabaseAlgorithm</strong></span> initialization parameter determines how the database update is performed.
		</p><p>
			If its value is set to <span class="bold"><strong>entry</strong></span> it means that each user, group and membership listed in the configuration is checked each time GateIn 3.2 is started.
         If the entry doesn't yet exist in the database, it is created. If <span class="bold"><strong>checkDatabaseAlgorithm</strong></span> parameter value is set to <span class="bold"><strong>empty</strong></span>,
         the configuration data will be updated to the database only if the database is empty.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Membership_types"/>6.1.3. Membership types</h3></div></div></div><p>
			The predefined membership types are specified in the <span class="bold"><strong>membershipType</strong></span> field of the <span class="bold"><strong>OrganizationConfig</strong></span> plugin parameter.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
            See <code class="literal">02portal.war:/WEB-INF/conf/organization/organization-configuration.xml</code> for the full content.
         </p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;membershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$MembershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member&nbsp;membership&nbsp;type</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$MembershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">owner</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">owner&nbsp;membership&nbsp;type</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$MembershipType&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">validator</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">validator&nbsp;membership&nbsp;type</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Groups"/>6.1.4. Groups</h3></div></div></div><p>
			The predefined groups are specified in the <span class="bold"><strong>group</strong></span> field of the <span class="bold"><strong>OrganizationConfig</strong></span> plugin parameter.
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$Group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;parentId&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hierachy</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">the&nbsp;/portal&nbsp;group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$Group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;name&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">community</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;parentId&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/portal</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;type&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hierachy</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;description&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">the&nbsp;/portal/community&nbsp;group</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Users"/>6.1.5. Users</h3></div></div></div><p>
			The predefined users are specified in the <span class="bold"><strong>membershipType</strong></span> field of the <span class="bold"><strong>OrganizationConfig</strong></span> plugin parameter.
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;user&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$User&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;email&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exoadmin@localhost</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;groups&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member:/admin,member:/user,owner:/portal/admin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.OrganizationConfig$User&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;userName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;firstName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">site</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;lastName&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">site</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;email&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo@localhost</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;groups&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member:/user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Predefined_User_Configuration-Plugin_for_monitoring_user_creation"/>6.1.6. Plugin for monitoring user creation</h3></div></div></div><p>
			The plugin of type <code class="literal">org.exoplatform.services.organization.impl.NewUserEventListener </code> specifies
         which groups all the newly created users should become members of. It specifies the groups and the memberships to use
         (while group is just a set of users, a membership type represents a user's role within a group).
         It also specifies a list of users that should not be processed (i.e. administrative users like 'root').
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>The terms 'membership' and 'membership type' refer to the same thing, and are used interchangeably.</p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">new.user.event.listener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">addListenerPlugin</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">set-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.exoplatform.services.organization.impl.NewUserEventListener</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">this&nbsp;listener&nbsp;assign&nbsp;group&nbsp;and&nbsp;membership&nbsp;to&nbsp;a&nbsp;new&nbsp;created&nbsp;user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">configuration</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">description</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.impl.NewUserConfig&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;group&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.ArrayList&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">object</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.exoplatform.services.organization.impl.NewUserConfig$JoinGroup&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;groupId&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">/user</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;membership&quot;</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">member</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">field</span><span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ignoredUser&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java.util.HashSet&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">exo</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">root</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">company</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;&lt;</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">community</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">string</span><span class="xml_tag_symbols">&gt;&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">field</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">object-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">init-params</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">component-plugin</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration"/>6.2. Authentication Token Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration-What_is_token_service"/>6.2.1. What is Token Service?</h3></div></div></div><p>
			<span class="emphasis"><em>Token Service</em></span> is used in authentication.
		</p><p>
			The token system prevents user account information being sent in clear text mode within inbound requests. This increases authentication security.
		</p><p>
			Token service allows administrators to create, delete, retrieve and clean tokens as required.
         The service also defines a validity period of any given token. The token becomes invalid once this period expires.
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration-Implement_token_services_API"/>6.2.2. Implementing the Token Service API</h3></div></div></div><p>
			All token services used in GateIn 3.2 authentication must be implemented by subclassing an <span class="bold"><strong>AbstractTokenService</strong></span> abstract class.
         The following <span class="bold"><strong>AbstractTokenService</strong></span> methods represent the contract between authentication runtime, and a token service implementation.
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Token</span><span class="java_plain">&nbsp;getToken</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PathNotFoundException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">RepositoryException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Token</span><span class="java_plain">&nbsp;deleteToken</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">PathNotFoundException</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">RepositoryException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getAllTokens</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;getNumberTokens</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;createToken</span><span class="java_separator">(</span><span class="java_type">Credentials</span><span class="java_plain">&nbsp;credentials</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">IllegalArgumentException</span><span class="java_separator">,</span><span class="java_type">NullPointerException</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Credentials</span><span class="java_plain">&nbsp;validateToken</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;tokenKey</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;remove</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">NullPointerException</span><span class="java_separator">;</span>
</pre><p>
		</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Authentication_Token_Configuration-Configure_token_services"/>6.2.3. Configuring token services</h3></div></div></div><p>
			Token services configuration includes specifying the token validity period. The token service is configured as a portal component (in portal scope, as opposed to root scope - more about that in Foundations chapter).
		</p><p>
			In the example below, <span class="emphasis"><em>CookieTokenService</em></span> is a subclass of <span class="bold"><strong>AbstractTokenService</strong></span> so it has a property which specifies the validity period of the token.
		</p><p>
			The token service will initialize this validity property by looking for an <em class="parameter"><code>init-param</code></em> named <span class="bold"><strong>service.configuration</strong></span>.
		</p><p>
			This property must have three values.
		</p><div class="programlistingco"><pre class="programlisting">&lt;component&gt;
  &lt;key&gt;org.exoplatform.web.security.security.CookieTokenService&lt;/key&gt;
  &lt;type&gt;org.exoplatform.web.security.security.CookieTokenService&lt;/type&gt;
  &lt;init-params&gt;
  	&lt;values-param&gt;
      &lt;name&gt;service.configuration&lt;/name&gt;
      &lt;value&gt;j<span xmlns="" class="co" id="area-Reference_Guide-Authentication_Token_Configuration-Configure_token_services-name"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>cr-token&lt;/value&gt;
      &lt;value&gt;7<span xmlns="" class="co" id="area-Reference_Guide-Authentication_Token_Configuration-Configure_token_services-time"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>&lt;/value&gt;
      &lt;value&gt;D<span xmlns="" class="co" id="area-Reference_Guide-Authentication_Token_Configuration-Configure_token_services-unit"><img src="images/gatein/docbook/callouts/3.png" alt="(3)"/></span>AY&lt;/value&gt;
    &lt;/values-param&gt;    	
  &lt;/init-params&gt;
&lt;/component&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
						Service name
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
						Amount of time
					</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/3.png" alt="3" border="0"/></p></td><td valign="top" align="left"><p>
						Unit of time
					</p></td></tr></table></div></div><p>
			In this case, the service name is <span class="bold"><strong>jcr-token</strong></span> and the token expiration time is one week.
		</p><p>
			GateIn 3.2 supports <span class="emphasis"><em>four</em></span> time units:
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>
					<em class="parameter"><code>SECOND</code></em>
				</p></li><li><p>
					<em class="parameter"><code>MINUTE</code></em>
				</p></li><li><p>
					<em class="parameter"><code>HOUR</code></em>
				</p></li><li><p>
					<em class="parameter"><code>DAY</code></em>
				</p></li></ol></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-PicketLink_IDM_integration"/>6.3. PicketLink IDM integration</h2></div></div></div><p>
		GateIn 3.2 uses PicketLink IDM component to keep the necessary identity information (users, groups, memberships, etc.).
      While legacy interfaces are still used (org.exoplatform.services.organization) for identity management,
      there is a wrapper implementation that delegates to PicketLink IDM framework.
	</p><p>
		This section doesn't provide information about PicketLink IDM and its configuration. Please, refer to the appropriate project documentation (<a class="ulink" href="http://jboss.org/picketlink/IDM.html">http://jboss.org/picketlink/IDM.html</a>) for further information.
	</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
			It is important to fully understand the concepts behind this framework design before changing the default configuration.
		</p></div><p>
		The identity model represented in '<span class="bold"><strong>org.exoplatform.services.organization</strong></span>' interfaces and the one used in <span class="bold"><strong>PicketLink IDM</strong></span> have some major differences.
	</p><p>TODO: tell more about org.exoplatform.services.organization</p><p>
		For example: <span class="bold"><strong>PicketLink IDM</strong></span> provides greater abstraction. It is possible for groups in <span class="bold"><strong>IDM</strong></span> framework to form memberships with many parents (which requires recursive ID translation),
      while GateIn model allows only pure tree-like membership structures.
	</p><p>
		Additionally, GateIn <span class="emphasis"><em>membership</em></span> concept needs to be translated into the IDM <span class="emphasis"><em>Role</em></span> concept. Therefore <span class="bold"><strong>PicketLink IDM</strong></span> model is used in a limited way. All these translations are applied by the integration layer.
	</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-PicketLink_IDM_integration-Configuration_files"/>6.3.1. Configuration files</h3></div></div></div><p>
			The main configuration file is <span class="bold"><strong>idm-configuration.xml</strong></span>:
		</p><div class="programlistingco"><pre class="programlisting">&lt;configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd"
               xmlns="http://www.exoplaform.org/xml/ns/kernel_1_2.xsd"&gt;
 
   &lt;component&gt;<span xmlns="" class="co" id="area-Reference_Guide-PicketLink_IDM_integration-Configuration_files-JBossIDMServiceImpl"><img src="images/gatein/docbook/callouts/1.png" alt="(1)"/></span>
        &lt;key&gt;org.exoplatform.services.organization.idm.PicketLinkIDMService&lt;/key&gt;
      &lt;type&gt;org.exoplatform.services.organization.idm.PicketLinkIDMServiceImpl&lt;/type&gt;
      &lt;init-params&gt;
         &lt;value-param&gt;
            &lt;name&gt;config&lt;/name&gt;
            &lt;value&gt;war:/conf/organization/idm-config.xml&lt;/value&gt;
         &lt;/value-param&gt;
         &lt;value-param&gt;
            &lt;name&gt;portalRealm&lt;/name&gt;
            &lt;value&gt;realm${container.name.suffix}&lt;/value&gt;
         &lt;/value-param&gt;
       &lt;/init-params&gt;
   &lt;/component&gt;
 
 
   &lt;component&gt;
      &lt;key&gt;org<span xmlns="" class="co" id="area-Reference_Guide-PicketLink_IDM_integration-Configuration_files-JBossIDMOrganizationServiceImpl"><img src="images/gatein/docbook/callouts/2.png" alt="(2)"/></span>.exoplatform.services.organization.OrganizationService&lt;/key&gt;
      &lt;type&gt;org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl&lt;/type&gt;
      &lt;init-params&gt;
      &lt;object-param&gt;
        &lt;name&gt;configuration&lt;/name&gt;
        &lt;object type="org.exoplatform.services.organization.idm.Config"&gt;
          &lt;field name="useParentIdAsGroupType"&gt;
            &lt;boolean&gt;true&lt;/boolean&gt;
          &lt;/field&gt;
 
          &lt;field name="forceMembershipOfMappedTypes"&gt;
            &lt;boolean&gt;true&lt;/boolean&gt;
          &lt;/field&gt;
 
          &lt;field name="pathSeparator"&gt;
            &lt;string&gt;.&lt;/string&gt;
          &lt;/field&gt;
 
          &lt;field name="rootGroupName"&gt;
            &lt;string&gt;GTN_ROOT_GROUP&lt;/string&gt;
          &lt;/field&gt;
 
          &lt;field name="groupTypeMappings"&gt;
            &lt;map type="java.util.HashMap"&gt;
              &lt;entry&gt;
                &lt;key&gt;&lt;string&gt;/&lt;/string&gt;&lt;/key&gt;
                &lt;value&gt;&lt;string&gt;root_type&lt;/string&gt;&lt;/value&gt;
              &lt;/entry&gt;
 
              &lt;!-- Sample mapping --&gt;
              &lt;!--
              &lt;entry&gt;
                &lt;key&gt;&lt;string&gt;/platform/*&lt;/string&gt;&lt;/key&gt;
                &lt;value&gt;&lt;string&gt;platform_type&lt;/string&gt;&lt;/value&gt;
              &lt;/entry&gt;
              &lt;entry&gt;
                &lt;key&gt;&lt;string&gt;/organization/*&lt;/string&gt;&lt;/key&gt;
                &lt;value&gt;&lt;string&gt;organization_type&lt;/string&gt;&lt;/value&gt;
              &lt;/entry&gt;
              --&gt;
 
            &lt;/map&gt;
          &lt;/field&gt;
 
          &lt;field name="associationMembershipType"&gt;
            &lt;string&gt;member&lt;/string&gt;
          &lt;/field&gt;
 
          &lt;field name="ignoreMappedMembershipType"&gt;
            &lt;boolean&gt;false&lt;/boolean&gt;
          &lt;/field&gt;
        &lt;/object&gt;
      &lt;/object-param&gt;
    &lt;/init-params&gt;
 
 
   &lt;/component&gt;
 
&lt;/configuration&gt;
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/1.png" alt="1" border="0"/></p></td><td valign="top" align="left"><p>
						The <span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMServiceImpl</strong></span> service has the following options:
					</p><div class="variablelist"><dl><dt><span class="term">config</span></dt><dd><p>
								(value-param)
							</p><p>
								PicketLink IDM configuration file
							</p></dd><dt><span class="term">hibernate.properties</span></dt><dd><p>
								(properties-param)
							</p><p>
								A list of hibernate properties used to create SessionFactory that will be injected to JBoss Identity IDM configuration registry.
							</p></dd><dt><span class="term">hibernate.annotations</span></dt><dd><p>
								A list of annotated classes that will be added to Hibernate configuration.
							</p></dd><dt><span class="term">hibernate.mappings</span></dt><dd><p>
								A list of xml files that will be added to hibernate configuration as mapping files.
							</p></dd><dt><span class="term">jndiName</span></dt><dd><p>
								(value-param)
							</p><p>
								If the 'config' parameter is not provided, this parameter will be used to perform JNDI lookup for IdentitySessionFactory
							</p></dd><dt><span class="term">portalRealm</span></dt><dd><p>
								(value-param)
							</p><p>
								The realm name that should be used to obtain proper IdentitySession. The default is 'PortalRealm'.
							</p></dd></dl></div></td></tr><tr><td width="5%" valign="top" align="left"><p><img src="images/gatein/docbook/callouts/2.png" alt="2" border="0"/></p></td><td valign="top" align="left"><p>
						The <span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl</strong></span>
            key is a main entrypoint implementing <span class="bold"><strong>org.exoplatform.services.organization.OrganizationService</strong></span>
            and is dependant on <span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMService</strong></span>
					</p><p>
						<span class="bold"><strong>org.exoplatform.services.organization.idm.PicketLinkIDMOrganizationServiceImpl</strong></span>
            service has the following options defined as fields of object-param of type
            <span class="bold"><strong>org.exoplatform.services.organization.idm.Config</strong></span>:
					</p><div class="variablelist"><dl><dt><span class="term">defaultGroupType</span></dt><dd><p>
								The name of the PicketLink IDM GroupType that will be used to store groups. The default is 'GTN_GROUP_TYPE'.
							</p></dd><dt><span class="term">rootGroupName</span></dt><dd><p>
									 The name of the PicketLink IDM Group that will be used as a root parent. The default is 'GTN_ROOT_GROUP'
								</p></dd><dt><span class="term">passwordAsAttribute</span></dt><dd><p>
									This parameter specifies if a password should be stored using PicketLink IDM Credential object or as a plain attribute. The default is false.
								</p></dd><dt><span class="term">useParentIdAsGroupType</span></dt><dd><p>
								This parameter stores the parent ID path as a group type in PicketLink IDM for any IDs not mapped with a specific type in 'groupTypeMappings'.
                        If this option is set to false, and no mappings are provided under 'groupTypeMappings', then only one group with the given name can exist in the GateIn 3.2 group tree.
							</p></dd><dt><span class="term">pathSeparator</span></dt><dd><p>
									When 'userParentIdAsGroupType is set to true, this value will be used to replace all "/" characters in IDs. The "/" character is not allowed to be used in group type name in PicketLink IDM.
								</p></dd><dt><span class="term">associationMembershipType</span></dt><dd><p>
									If this option is used, then each Membership, created with MembrshipType that is equal to the value specified here, will be stored in PicketLink IDM as simple Group-User association.
								</p></dd><dt><span class="term">groupTypeMappings</span></dt><dd><p>
									This parameter maps groups added with GateIn 3.2 API as children of a given group ID, and stores them with a given group type name in PicketLink IDM.
								</p><p>
									If the parent ID ends with "/*", then all child groups will have the mapped group type. Otherwise, only direct (first level) children will use this type. 
								</p><p>
									This can be leveraged by LDAP if LDAP DN is configured in PicketLink IDM to only store a specific group type. This will then store the given branch in GateIn 3.2 group tree, while all other groups will remain in the database.
								</p></dd><dt><span class="term">forceMembershipOfMappedTypes</span></dt><dd><p>
									Groups stored in PicketLink IDM with a type mapped in 'groupTypeMappings' will automatically be members under the mapped parent. Group relationships linked by PicketLink IDM group association will not be necessary.
								</p><p>
									This parameter can be set to false if all groups are added via GateIn 3.2 APIs. This may be useful with LDAP configuration as, when set to true, it will make every entry added to LDAP appear in GateIn 3.2. This, however, is not true for entries added via GateIn 3.2 management UI.
								</p></dd><dt><span class="term">ignoreMappedMembershipType</span></dt><dd><p>
									If "associationMembershipType" option is used, and this option is set to true, then Membership with MembershipType configured to be stored as PicketLink IDM association will not be stored as PicketLink IDM Role.
								</p></dd></dl></div><p>
						Additionally, <span class="bold"><strong>JBossIDMOrganizationServiceImpl</strong></span> uses those defaults to perform identity management operations
					</p><div class="itemizedlist"><ul><li><p>
								GateIn 3.2 User interface properties fields are persisted in JBoss Identity IDM using those attributes names: firstName, lastName, email, createdDate, lastLoginTime, organizationId, password (if password is configured to be stored as attribute)
							</p></li><li><p>
								GateIn 3.2 Group interface properties fields are persisted in JBoss Identity IDM using those attributes names: label, description
							</p></li><li><p>
								GateIn 3.2 MembershipType interface properties fields are persisted in JBoss Identity IDM using those RoleType properties: description, owner, create_date, modified_date
							</p></li></ul></div></td></tr></table></div></div><p>
			A sample <span class="bold"><strong>PicketLink IDM</strong></span> configuration file is shown below. To understand all the options it contains, please refer to the PicketLink IDM Reference Guide
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jboss-identity</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;urn:jboss:identity:idm:config:v1_0_beta&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;urn:jboss:identity:idm:config:v1_0_alpha&nbsp;identity-config.xsd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">realms</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">realm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PortalRealm</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repository-id-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PortalRepository</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repository-id-ref</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-type-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">user-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">USER</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">user-mapping</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-type-mappings</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">realm</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">realms</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repositories</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">repository</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PortalRepository</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.identity.idm.impl.repository.WrapperIdentityStoreRepository</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">external-config</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">default-identity-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">HibernateStore</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">default-identity-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">default-attribute-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">HibernateStore</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">default-attribute-store-id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repository</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">repositories</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute-stores</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-store</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">HibernateStore</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.jboss.identity.idm.impl.store.hibernate.HibernateIdentityStoreImpl</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">class</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">external-config</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">supported-relationship-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">JBOSS_IDENTITY_MEMBERSHIP</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">JBOSS_IDENTITY_ROLE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">relationship-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">supported-relationship-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">supported-identity-object-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">identity-object-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">USER</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">relationships</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">credentials</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">credential-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">PASSWORD</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">credential-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">credentials</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attributes</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">options</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-object-type</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">supported-identity-object-types</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">options</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernateSessionFactoryRegistryName</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernateSessionFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">allowNotDefinedIdentityObjectTypes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">populateRelationshipTypes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">populateIdentityObjectTypes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">allowNotDefinedAttributes</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">isRealmAware</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">options</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-store</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">identity-stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">stores</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jboss-identity</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-APIs-Organization_API"/>6.4. Organization API</h2></div></div></div><p>
		The
		<code class="literal">exo.platform.services.organization</code>
		package has five main components: user, user profile, group,
		membership type and membership.
		There is an additional component that serves as an entry point into
		Organization API -
		<code class="literal">OrganizationService</code>
		component,
		that provides handling functionality for the five components.
	</p><p>
		</p><div class="mediaobject" align="center"><img src="images/AuthenticationAndIdentity/OrganizationServiceClassDiagram.png" align="middle"/></div><p>
	</p><p>
		The
		<code class="literal">User</code>
		component contains basic information about a user - such as
		username, password, first name, last name, and email. The
		<code class="literal">User Profile</code>
		component contains extra information about a user, such as user's
		personal information, and business information.
		You can also add additional information about a user if your application
		requires it.
		The
		<code class="literal">Group</code>
		component contains a group graph. The
		<code class="literal">Membership Type</code>
		component
		contains a list of predefined membership types.
		Finally, the
		<code class="literal">Membership</code>
		component connects a User, a Group and a Membership Type.
	</p><p>
		A user can have one or more memberships within a group, for example:
		user A can have the 'member' and 'admin' memberships in group /user.
		A user belongs to a group if he has at least one membership in that
		group.
      </p><p>
		Exposing the Organization API to developers the OrganizationService component
		provides developers with access
		to handler objects for managing each of the five components -
		UserHandler, UserProfileHandler, GroupHandler, MembershipTypeHandler,
		and MembershipHandler.
      </p><p>
		The five central API components are really designed like persistent
		entities, and handlers are really specified like data access objects
		(DAO).
      </p><p>
		Organization API simply describes a contract, meaning it is not a concrete
		implementation. The described components are interfaces,
		allowing for different concrete implementations. In practial terms that means,
		you can replace the existing implementation with a different one.
	</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Accessing_User_Profile"/>6.5. Accessing User Profile</h2></div></div></div><p>
		The following code retrieves the details for a logged-in user:
	</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Alternative</span><!-- <br/> --><span class="java_plain">&nbsp;context</span><!-- <br/> --><span class="java_operator">:</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">WebuiRequestContext</span><!-- <br/> --><span class="java_plain">&nbsp;context&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">WebuiRequestContext</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">getCurrentInstance</span><!-- <br/> --><span class="java_separator">()</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">;</span>
<!--  --><br/><span class="java_type">PortalRequestContext</span><span class="java_plain">&nbsp;context&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">PortalRequestContext</span><span class="java_separator">.</span><span class="java_plain">getCurrentInstance</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Get</span><span class="java_plain">&nbsp;the&nbsp;id&nbsp;of&nbsp;the&nbsp;user&nbsp;logged</span>
<!--  --><br/><span class="java_type">String</span><span class="java_plain">&nbsp;userId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;context</span><span class="java_separator">.</span><span class="java_plain">getRemoteUser</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Request</span><span class="java_plain">&nbsp;the&nbsp;information&nbsp;from&nbsp;</span><span class="java_type">OrganizationService</span><span class="java_operator">:</span>
<!--  --><br/><span class="java_type">OrganizationService</span><span class="java_plain">&nbsp;orgService&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;getApplicationComponent</span><span class="java_separator">(</span><span class="java_type">OrganizationService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">userId&nbsp;</span><span class="java_operator">!=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;orgService</span><span class="java_separator">.</span><span class="java_plain">getUserHandler</span><span class="java_separator">().</span><span class="java_plain">findUserByName</span><span class="java_separator">(</span><span class="java_plain">userId</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">user&nbsp;</span><span class="java_operator">!=</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getFirstName</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getLastName</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;email&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span><span class="java_plain">getEmail</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span>
</pre><p>
		Below are two alternatives for retrieving the Organization Service:
	</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_plain">&nbsp;service&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">ExoContainerContext</span><span class="java_separator">.</span><span class="java_plain">getCurrentContainer</span><span class="java_separator">().</span><span class="java_plain">getComponentInstanceOfType</span><span class="java_separator">(</span><span class="java_type">OrganizationService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
</pre></li><li><pre xmlns="" class="JAVA"><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_plain">&nbsp;service&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_type">OrganizationService</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_type">PortalContainer</span><span class="java_separator">.</span><span class="java_plain">getInstance</span><span class="java_separator">().</span><span class="java_plain">getComponentInstanceOfType</span><span class="java_separator">(</span><span class="java_type">OrganizationService</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
</pre></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-SSO_Single_Sign_On"/>6.6. Single-Sign-On (SSO)</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-Overview"/>6.6.1. Overview</h3></div></div></div><p>
            GateIn 3.2 provides some form of Single Sign On (<code class="literal">SSO</code>) as an integration and aggregation platform.
        </p><p>
            When logging into the portal users gain access to many systems through portlets using a single identity. In many cases, however, the portal infrastructure must be integrated with other SSO enabled systems. There are many different Identity Management solutions available. In most cases each SSO framework provides a unique way to plug into a Java EE application.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-Overview_of_SSO-Prerequisite"/>6.6.1.1. Prerequisites</h4></div></div></div><p>
                In this tutorial, the SSO server is installed in a Tomcat installation. Tomcat can be obtained from <a class="ulink" href="http://tomcat.apache.org">http://tomcat.apache.org</a>.
            </p><p>
                All the packages required for setup can be found in a zip file located at: <a class="ulink" href="https://repository.jboss.org/nexus/content/groups/public/org/gatein/sso/sso-packaging/1.0.1-GA/sso-packaging-1.0.1-GA.zip">https://repository.jboss.org/nexus/content/groups/public/org/gatein/sso/sso-packaging/1.0.1-GA/sso-packaging-1.0.1-GA.zip</a>. In this document we will call $GATEIN_SSO_HOME the directory where the file is extracted.
            </p><p>
                Users are advised to not run any portal extensions that could override the data when manipulating the <code class="filename">gatein.ear</code> file directly.
            </p><p>
                Remove <code class="literal">$JBOSS_HOME/server/default/deploy/gatein-sample-extension.ear</code> and <code class="literal">$JBOSS_HOME/server/default/deploy/gatein-sample-portal.ear</code> which are packaged by default with GateIn 3.2.
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-CAS_Central_Authentication_Service"/>6.6.2. Central Authentication Service (CAS)</h3></div></div></div><p>
            This Single Sign On plugin enables seamless integration between GateIn 3.2 and the CAS Single Sign On Framework. Details about CAS can be found <a class="ulink" href="http://www.ja-sig.org/products/cas/">here</a>.
        </p><p>
            The integration consists of two parts; the first part consists of installing or configuring a CAS server, the second part consists of setting up the portal to use the CAS server.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-CAS_Central_Authentication_Service-CAS_server"/>6.6.2.1. CAS server</h4></div></div></div><p>
                First, set up the server to authenticate against the portal login module. In this example the CAS server will be installed on Tomcat.
            </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-CAS_server-Obtaining_CAS"/>6.6.2.1.1. Obtaining CAS</h5></div></div></div><p>
                    CAS can be downloaded from <a class="ulink" href="http://www.jasig.org/cas/download">http://www.jasig.org/cas/download</a>.
                </p><p>
                    Extract the downloaded file into a suitable location. This location will be referred to as <code class="literal">$CAS_HOME</code> in the following example.
                </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-CAS_server-Modifying_CAS_server"/>6.6.2.1.2. Modifying the CAS server</h5></div></div></div><p>
                    To configure the web archive as desired, the simplest way is to make the necessary changes directly in CAS codebase.
                </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                  To complete these instructions, and perform the final build step, you will need the Apache Maven 2.
                  You can get it <a class="ulink" href="http://maven.apache.org/download.html">here</a>.
               </p></div><p>
                    First, we need to change the default authentication handler with the one provided by GateIn 3.2.
                </p><p>
                    The CAS Server Plugin makes secure authentication callbacks to a RESTful service installed on the remote GateIn server in order to authenticate a user.
                </p><p>
                    In order for the plugin to function correctly, it needs to be properly configured to connect to this service. This configuration is done via the <code class="filename">cas.war/WEB-INF/deployerConfigContext.xml </code> file.
                </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
                            Open <code class="filename">CAS_HOME/cas-server-webapp/src/main/webapp/WEB-INF/deployerConfigContext.xml</code>
                        </p></li><li><p>
                            Replace:
</p><pre class="programlisting"> &lt;!--
  | Whereas CredentialsToPrincipalResolvers identify who it is some Credentials might authenticate, 
  | AuthenticationHandlers actually authenticate credentials.  Here e declare the AuthenticationHandlers that
  | authenticate the Principals that the CredentialsToPrincipalResolvers identified.  CAS will try these handlers in turn
  | until it finds one that both supports the Credentials presented and succeeds in authenticating.
  +--&gt;
 &lt;property name="authenticationHandlers"&gt;
   &lt;list&gt;
     &lt;!--
      | This is the authentication handler that authenticates services by means of callback via SSL, thereby validating
      | a server side SSL certificate.
      +--&gt;
     &lt;bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
           p:httpClient-ref="httpClient" /&gt;
     &lt;!--
      | This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS 
      | into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials
      | where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your
      | local authentication strategy.  You might accomplish this by coding a new such handler and declaring
      | edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.
      +--&gt;
     <span class="bold"><strong>&lt;bean
        class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" /&gt;</strong></span>
   &lt;/list&gt;
 &lt;/property&gt;
</pre><p>
                        </p></li><li><p>
                            With the following (Make sure to set the host, port and context with the values corresponding to your portal). Also available in <code class="filename">GATEIN_SSO_HOME/cas/plugin/WEB-INF/deployerConfigContext.xml</code>.
                        </p><p>

</p><pre class="programlisting">&lt;!--
 | Whereas CredentialsToPrincipalResolvers identify who it is some Credentials might authenticate, 
 | AuthenticationHandlers actually authenticate credentials.  Here we declare the AuthenticationHandlers that
 | authenticate the Principals that the CredentialsToPrincipalResolvers identified.  CAS will try these handlers in turn
 | until it finds one that both supports the Credentials presented and succeeds in authenticating.
 +--&gt;
 &lt;property name="authenticationHandlers"&gt;
   &lt;list&gt;
     &lt;!--
      | This is the authentication handler that authenticates services by means of callback via SSL, thereby validating
      | a server side SSL certificate.
      +--&gt;
     &lt;bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
           p:httpClient-ref="httpClient" /&gt;
     &lt;!--
      | This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS 
      | into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials
      | where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your
      | local authentication strategy.  You might accomplish this by coding a new such handler and declaring
      | edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.
      +--&gt;
     &lt;!-- Integrates with the Gatein Authentication Service to perform authentication --&gt;
     &lt;!--
      | Note: Modify the Plugin Configuration based on the actual information of a GateIn instance.
      | The instance can be anywhere on the internet...Not necessarily on localhost where CAS is running 
      +--&gt;
     <span class="bold"><strong>&lt;bean class="org.gatein.sso.cas.plugin.AuthenticationPlugin"&gt;
        &lt;property name="gateInHost"&gt;&lt;value&gt;localhost&lt;/value&gt;&lt;/property&gt;
        &lt;property name="gateInPort"&gt;&lt;value&gt;8080&lt;/value&gt;&lt;/property&gt;
        &lt;property name="gateInContext"&gt;&lt;value&gt;portal&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;</strong></span>
   &lt;/list&gt;
 &lt;/property&gt;
</pre><p>
                        </p></li><li><p>
                            Copy <code class="filename">GATEIN_SSO_HOME/cas/plugin/WEB-INF/lib/sso-cas-plugin-&lt;VERSION&gt;.jar</code> and <code class="filename">GATEIN_SSO_HOME/cas/plugin/WEB-INF/lib/commons-httpclient-&lt;VERSION&gt;.jar</code> into the <code class="filename">CAS_HOME/cas-server-webapp/src/main/webapp/WEB-INF/lib</code> created directory.
                        </p></li><li><p>
                            Get an installation of Tomcat and extract it into a suitable location (which will be called <code class="filename">TOMCAT_HOME</code> for these instructions). 
                        </p><p>
                            Change the default port to avoid a conflict with the default GateIn 3.2 (for testing purposes). Edit <code class="filename">TOMCAT_HOME/conf/server.xml</code> and replace the 8080 port to 8888.
                            </p><div class="note"><h2>Note</h2><p>
                                    If GateIn 3.2 is running on the same machine as Tomcat, other ports need to be changed in addition to 8080 in order to avoid port conflicts.
                           They can be changed to any free port. For example, you can change admin port from 8005 to 8805, and AJP port from 8009 to 8809.
                                </p></div><p>
                        </p></li><li><p>
                            Go to <code class="filename">CAS_HOME/cas-server-webapp</code> and execute the command:
</p><pre class="programlisting">mvn install
</pre><p>
                        </p></li><li><p>
                            Copy <code class="filename">CAS_HOME/cas-server-webapp/target/cas.war</code> into <code class="filename">TOMCAT_HOME/webapps</code>.
                        </p><p>
                            Tomcat should start and be accessible at <a class="ulink" href="http://localhost:8888/cas">http://localhost:8888/cas</a>. Note that at this stage login won't be available.
                        </p><div class="mediaobject"><img src="images/AuthenticationAndIdentity/SSO/cas.png"/></div></li></ol></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
                  By default on logout the CAS server will display the CAS logout page with a link to return to the portal. To make the CAS server redirect to the portal page after a logout, modify the 
                                  <code class="filename">cas.war/WEB-INF/cas-servlet.xml</code> to include the follow line :
                </p><pre class="programlisting">
        &lt;bean id="logoutController" class="org.jasig.cas.web.LogoutController"
                  p:centralAuthenticationService-ref="centralAuthenticationService"
                  p:logoutView="casLogoutView"
                  p:warnCookieGenerator-ref="warnCookieGenerator"
                  p:ticketGrantingTicketCookieGenerator-ref="ticketGrantingTicketCookieGenerator"
                <span class="bold"><strong>p:followServiceRedirects="true"/&gt;</strong></span>

                </pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-CAS_Central_Authentication_Service-Setup_the_CAS_client"/>6.6.2.2. Setup the CAS client</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
                        Copy all libraries from <code class="filename">GATEIN_SSO_HOME/cas/gatein.ear/lib</code> into <code class="filename">JBOSS_HOME/server/default/deploy/gatein.ear/lib</code> (Or in Tomcat, into $<code class="filename">GATEIN_HOME/lib</code>)
                    </p></li><li><div class="itemizedlist"><ul><li><p>
                            In JBoss AS, edit <code class="filename">gatein.ear/META-INF/gatein-jboss-beans.xml</code> and uncomment this section:
                            </p><pre class="programlisting">&lt;authentication&gt;
  &lt;login-module code="org.gatein.sso.agent.login.SSOLoginModule" flag="required"&gt;
  &lt;/login-module&gt;      
  &lt;login-module code="org.exoplatform.services.security.j2ee.JbossLoginModule" flag="required"&gt;
    &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
    &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
  &lt;/login-module&gt;
&lt;/authentication&gt;
</pre></li><li><p>
                            In Tomcat, edit <code class="filename">GATEIN_HOME/conf/jaas.conf</code> and uncomment this section:
                            </p><pre class="programlisting">org.gatein.sso.agent.login.SSOLoginModule required;
org.exoplatform.services.security.j2ee.TomcatLoginModule required
portalContainerName=portal
realmName=gatein-domain;
</pre></li></ul></div></li><li><p>
                        The installation can be tested at this point:
                    </p><div class="procedure"><ol class="1"><li><p>
                                Start (or restart) GateIn 3.2, and (assuming the CAS server on Tomcat is running) direct your browser to <a class="ulink" href="http://localhost:8888/cas">http://localhost:8888/cas</a>.
                            </p></li><li><p>
                                Login with the username <code class="literal">root</code> and the password <code class="literal">gtn</code> (or any account created through the portal).
                            </p></li></ol></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-CAS_Central_Authentication_Service-Redirect_to_CAS"/>6.6.2.3. Redirect to CAS</h4></div></div></div><p>
                To utilize the Central Authentication Service, GateIn 3.2 needs to redirect all user authentication to the CAS server.
            </p><p>
                Information about where the CAS is hosted must be properly configured within the GateIn 3.2 instance. The required configuration is done by modifying three files:
                </p><div class="itemizedlist"><ul><li><p>
                        In the <code class="filename">gatein.ear/web.war/groovy/groovy/webui/component/UIBannerPortlet.gtml</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a class="Login" onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a class="Login" href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;

</pre><p>
                        </p></li><li><p>
                        In the <code class="filename">gatein.ear/web.war/groovy/portal/webui/component/UILogoPortlet.gtmpl</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt; 

</pre><p>
                        </p></li><li><p>
                            Replace the entire contents of <code class="filename">gatein.ear/02portal.war/login/jsp/login.jsp</code> with:
                        </p><pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;script type="text/javascript"&gt;
     window.location = '/portal/sso';
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></li><li><p>
                            Add the following Filters at the top of the filter chain in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>:


</p><pre class="programlisting">

    &lt;filter&gt;
        &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
        &lt;init-param&gt;                                 
          &lt;!-- This should point to your SSO authentication server --&gt;                                                                                              
          &lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;   
          &lt;!--
              If casRenewTicket param value of InitiateLoginServlet is:  not specified or false
          --&gt;
          &lt;param-value&gt;http://localhost:8888/cas/login?service=
          http://localhost:8080/portal/initiatessologin&lt;/param-value&gt;
          &lt;!--
              If casRenewTicket param value of InitiateLoginServlet is : true
          --&gt;
          &lt;!--
          &lt;param-value&gt;http://localhost:8888/cas/login?
          service=http://localhost:8080/portal/initiatessologin&amp;amp;renew=true&lt;/param-value&gt;
          --&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;CASLogoutFilter&lt;/filter-name&gt;                                                                                              
        &lt;filter-class&gt;org.gatein.sso.agent.filter.CASLogoutFilter&lt;/filter-class&gt;                                                      
        &lt;init-param&gt;                                 
          &lt;!-- This should point to your JOSSO authentication server --&gt;                                                                                              
          &lt;param-name&gt;LOGOUT_URL&lt;/param-name&gt;                                                                                                
          &lt;param-value&gt;http://localhost:8888/cas/logout&lt;/param-value&gt;                                                                                                         
        &lt;/init-param&gt;                                                                                                                              
    &lt;/filter&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.gatein.sso.agent.filter.InitiateLoginFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
          &lt;param-name&gt;ssoServerUrl&lt;/param-name&gt;
          &lt;param-value&gt;http://localhost:8888/cas&lt;/param-value&gt;
        &lt;/init-param&gt;    
        &lt;init-param&gt;
          &lt;param-name&gt;casRenewTicket&lt;/param-name&gt;
          &lt;param-value&gt;false&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
          &lt;param-name&gt;casServiceUrl&lt;/param-name&gt;
          &lt;param-value&gt;http://localhost:8080/portal/initiatessologin&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
          &lt;param-name&gt;loginUrl&lt;/param-name&gt;
          &lt;param-value&gt;http://localhost:8080/portal/dologin&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    
    &lt;!-- Mapping the filters at the very top of the filter chain --&gt;
    &lt;filter-mapping&gt;
      &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;          
    &lt;/filter-mapping&gt;
    &lt;filter-mapping&gt;
      &lt;filter-name&gt;CASLogoutFilter&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/initiatessologin&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
  
</pre><p>
                        </p></li></ul></div><p>
            </p><p>
                Once these changes have been made, all links to the user authentication pages will redirect to the CAS centralized authentication form.
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-JOSSO"/>6.6.3. JOSSO</h3></div></div></div><p>
            This Single Sign On plugin enables seamless integration between GateIn 3.2 and the JOSSO Single Sign On Framework. Details about JOSSO can be found <a class="ulink" href="http://www.josso.org">here</a>.
        </p><p>
            Setting up this integration involves two steps. The first step is to install or configure a JOSSO server, and the second is to set up the portal to use the JOSSO server.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JOSSO-JOSSO_server"/>6.6.3.1. JOSSO server</h4></div></div></div><p>
                This section details setting up the JOSSO server to authenticate against the GateIn 3.2 login module.
            </p><p>
                In this example the JOSSO server will be installed on Tomcat.
            </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JOSSO_server-Obtaining_JOSSO"/>6.6.3.1.1. Obtaining JOSSO</h5></div></div></div><p>
                    JOSSO can be downloaded from <a class="ulink" href="http://sourceforge.net/projects/josso/files/">http://sourceforge.net/projects/josso/files/</a>. Use the package that embeds Apache Tomcat.
                </p><p>
                    Once downloaded, extract the package into what will be called <code class="filename">JOSSO_HOME</code> in this example.
                </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>The steps described later are only correct in case of JOSSO v.1.8.1.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-JOSSO_server-Modifying_JOSSO_server"/>6.6.3.1.2. Modifying the JOSSO server</h5></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
                            Copy the files from <code class="filename">GATEIN_SSO_HOME/josso/plugin</code> into the Tomcat directory (<code class="filename">JOSSO_HOME</code>).
                        </p><p>
                            This action should replace or add the following files to the <code class="filename">JOSSO_HOME/webapps/josso/WEB-INF/lib</code> directory:
                        </p><div class="itemizedlist"><ul><li><p>
                                    <code class="filename">JOSSO_HOME/lib/josso-gateway-config.xml</code>
                                </p></li><li><p>
                                    <code class="filename">JOSSO_HOME/lib/josso-gateway-gatein-stores.xml</code>
                                </p></li></ul></div><p>
                            and
                        </p><div class="itemizedlist"><ul><li><p>
                                    <code class="filename">JOSSO_HOME/webapps/josso/WEB-INF/classes/gatein.properties</code>
                                </p></li></ul></div></li><li><p>
                            Edit <code class="filename">TOMCAT_HOME/conf/server.xml</code> and replace the 8080 port to 8888 to change the default Tomcat port and avoid a conflict with the default GateIn 3.2 port (for testing purposes).
                            </p><div class="note"><h2>Port Conflicts</h2><p>
                           If GateIn 3.2 is running on the same machine as Tomcat, other ports need to be changed in addition to 8080 in order to avoid port conflicts.
                           They can be changed to any free port. For example, you can change admin port from 8005 to 8805, and AJP port from 8009 to 8809.
                                </p></div><p>
                        </p></li><li><p>
                            Tomcat should now start and allow access to <a class="ulink" href="http://localhost:8888/josso/signon/login.do">http://localhost:8888/josso/signon/login.do</a> but at this stage login will not be available.
                        </p><div class="mediaobject"><img src="images/AuthenticationAndIdentity/SSO/opensso.png"/></div></li></ol></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JOSSO-Setup_the_JOSSO_client"/>6.6.3.2. Setup the JOSSO client</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
                        Copy the library files from <code class="filename">GATEIN_SSO_HOME/josso/gatein.ear/lib</code> into <code class="filename">gatein.ear/lib</code> (or into <code class="filename">GATEIN_HOME/lib</code> if GateIn 3.2 is  running in Tomcat)
                    </p></li><li><p>
                  Copy the file <code class="filename">GATEIN_SSO_HOME/josso/gatein.ear/portal.war/WEB-INF/classes/josso-agent-config.xml</code> into <code class="filename">gatein.ear/02portal.war/WEB-INF/classes</code> (or into <code class="filename">GATEIN_HOME/webapps/portal.war/WEB-INF/classes</code>, or <code class="filename">GATEIN_HOME/conf</code> if GateIn 3.2 is  running in Tomcat)
               </p></li><li><div class="itemizedlist"><ul><li><p>
                                In JBoss AS, edit <code class="filename">gatein.ear/META-INF/gatein-jboss-beans.xml</code> and uncomment this section:
                            </p><pre class="programlisting">&lt;authentication&gt;
  &lt;login-module code="org.gatein.sso.agent.login.SSOLoginModule" flag="required"&gt;
  &lt;/login-module&gt;      
  &lt;login-module code="org.exoplatform.services.security.j2ee.JbossLoginModule" flag="required"&gt;
    &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
    &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
  &lt;/login-module&gt;
&lt;/authentication&gt;
</pre></li><li><p>
                                In Tomcat, edit <code class="filename">GATEIN_HOME/conf/jaas.conf</code> and uncomment this section:
                            </p><pre class="programlisting">org.gatein.sso.agent.login.SSOLoginModule required;
org.exoplatform.services.security.j2ee.TomcatLoginModule requiredtm 
portalContainerName=portal
realmName=gatein-domain;
</pre></li></ul></div></li><li><p>
                        The installation can be tested at this point.
                    </p><div class="procedure"><ol class="1"><li><p>
                                Start (or restart) GateIn 3.2, and (assuming the JOSSO server on Tomcat is running) direct your browser to <a class="ulink" href="http://localhost:8888/josso/signon/login.do">http://localhost:8888/josso/signon/login.do</a>.
                            </p></li><li><p>
                                Login with the username <code class="literal">root</code> and the password <code class="literal">gtn</code> or any account created through the portal.
                            </p></li></ol></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-JOSSO-Setup_the_portal_to_redirect_to_JOSSO"/>6.6.3.3. Setup the portal to redirect to JOSSO</h4></div></div></div><p>
                The next part of the process is to redirect all user authentication to the JOSSO server.
            </p><p>
                Information about where the JOSSO server is hosted must be properly configured within the GateIn 3.2 instance. The required configuration is done by modifying four files:
                </p><div class="itemizedlist"><ul><li><p>
                        In the <code class="filename">gatein.ear/web.war/groovy/groovy/webui/component/UIBannerPortlet.gtml</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a class="Login" onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a class="Login" href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;

</pre><p>
                        </p></li><li><p>
                        In the <code class="filename">gatein.ear/web.war/groovy/portal/webui/component/UILogoPortlet.gtmpl</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt; 

</pre><p>
                        </p></li><li><p>
                            Replace the entire contents of <code class="filename">gatein.ear/02portal.war/login/jsp/login.jsp</code> with:
                        </p><pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;script type="text/javascript"&gt;
     window.location = '/portal/sso';
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></li><li><p>
                            Add the following Filters at the top of the filter chain in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>:


</p><pre class="programlisting">

  &lt;filter&gt;
    &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
          &lt;!-- This should point to your SSO authentication server --&gt;
          &lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;
          &lt;param-value&gt;http://localhost:8888/josso/signon/login.do?
          josso_back_to=http://localhost:8080/portal/initiatessologin&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/filter&gt;
  &lt;filter&gt;
    &lt;filter-name&gt;JOSSOLogoutFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.gatein.sso.agent.filter.JOSSOLogoutFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
      &lt;!-- This should point to your JOSSO authentication server --&gt;
      &lt;param-name&gt;LOGOUT_URL&lt;/param-name&gt;
      &lt;param-value&gt;http://localhost:8888/josso/signon/logout.do&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/filter&gt;
  &lt;filter&gt;
        &lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.gatein.sso.agent.filter.InitiateLoginFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
          &lt;param-name&gt;ssoServerUrl&lt;/param-name&gt;
          &lt;param-value&gt;http://localhost:8888/josso/signon/login.do&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
          &lt;param-name&gt;loginUrl&lt;/param-name&gt;
          &lt;param-value&gt;http://localhost:8080/portal/dologin&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
  
  &lt;!-- filters should be placed at the very top of the filter chain --&gt;
  &lt;filter-mapping&gt;
      &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;          
  &lt;/filter-mapping&gt; 
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;JOSSOLogoutFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/initiatessologin&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
 
</pre><p>
                        </p></li></ul></div><p>
            </p><p>
                From now on, all links redirecting to the user authentication pages will redirect to the JOSSO centralized authentication form.
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Single_Sign_On-OpenSSO_The_Open_Web_SSO_project"/>6.6.4. OpenSSO - The Open Web SSO project</h3></div></div></div><p>
            Setting up this integration involves two steps. The first step is to install or configure an OpenSSO server, and the second is to set up the portal to use the OpenSSO server.
        </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-OpenSSO_The_Open_Web_SSO_project-OpenSSO_server"/>6.6.4.1. OpenSSO server</h4></div></div></div><p>
                 This section details the setting up of OpenSSO server to authenticate against the GateIn 3.2 login module.
            </p><p>
                In this example the OpenSSO server will be installed on Tomcat.
            </p><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-OpenSSO_server-Obtaining_OpenSSO"/>6.6.4.1.1. Obtaining OpenSSO</h5></div></div></div><p>
                    OpenSSO must be purchased from <a class="ulink" href="http://www.oracle.com/technetwork/middleware/id-mgmt/overview/index.html">Oracle</a>.
                </p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h5 class="title"><a id="sect-Reference_Guide-OpenSSO_server-Modifying_OpenSSO_server"/>6.6.4.1.2. Modifying OpenSSO server</h5></div></div></div><p>
                     To configure the web server as desired, it is simpler to directly modify the sources. 
                </p><p>
                    The first step is to add the GateIn 3.2 Authentication Plugin:
                </p><p>
                    The plugin makes secure authentication callbacks to a RESTful service installed on the remote GateIn 3.2 server in order to authenticate a user.
                </p><p>
                    In order for the plugin to function correctly, it needs to be properly configured to connect to this service. This configuration is done via the <code class="filename">opensso.war/config/auth/default/AuthenticationPlugin.xml</code> file.
                </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
                            Obtain a copy of Tomcat and extract it into a suitable location (this location will be referred to as <code class="filename">TOMCAT_HOME</code> in this example).
                        </p></li><li><p>
                            Change the default port to avoid a conflict with the default GateIn 3.2 port (for testing purposes). Do this by editing <code class="filename">TOMCAT_HOME/conf/server.xml</code> and replacing the 8080 port to 8888.
                            </p><div class="note"><h2>Note</h2><p>
                           If GateIn 3.2 is running on the same machine as Tomcat, other ports need to be changed in addition to 8080 in order to avoid port conflicts.
                           They can be changed to any free port. For example, you can change admin port from 8005 to 8805, and AJP port from 8009 to 8809.
                                </p></div><p>
                        </p></li><li><p>
                            Ensure the <code class="filename">TOMCAT_HOME/webapps/opensso/config/auth/default/AuthenticationPlugin.xml</code> file looks like this:
</p><pre class="programlisting">
&lt;?xml version='1.0' encoding="UTF-8"?&gt;

&lt;!DOCTYPE ModuleProperties PUBLIC "=//iPlanet//Authentication Module Properties XML Interface 1.0 DTD//EN"
          "jar://com/sun/identity/authentication/Auth_Module_Properties.dtd"&gt;

&lt;ModuleProperties moduleName="AuthenticationPlugin" version="1.0" &gt;
  &lt;Callbacks length="2" order="1" timeout="60"
             header="GateIn OpenSSO Login" &gt;    
    &lt;NameCallback&gt;
      &lt;Prompt&gt;
        Username
      &lt;/Prompt&gt;
    &lt;/NameCallback&gt;
    &lt;PasswordCallback echoPassword="false" &gt;
      &lt;Prompt&gt;
        Password
      &lt;/Prompt&gt;
    &lt;/PasswordCallback&gt;
  &lt;/Callbacks&gt;
&lt;/ModuleProperties&gt;
</pre><p>
                        </p></li><li><p>
                            Copy <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/lib/sso-opensso-plugin-&lt;VERSION&gt;.jar</code>, <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/lib/commons-httpclient-&lt;VERSION&gt;.jar</code>, and <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/lib/commons-logging-&lt;VERSION&gt;.jar</code> into the Tomcat directory at <code class="filename">TOMCAT_HOME/webapps/opensso/WEB-INF/lib</code>.
                        </p></li><li><p>
                            Copy <code class="filename">GATEIN_SSO_HOME/opensso/plugin/WEB-INF/classes/gatein.properties</code> into <code class="filename">TOMCAT_HOME/webapps/opensso/WEB-INF/classes</code>
                        </p></li><li><p>
                            Tomcat should start and be able to access <a class="ulink" href="http://localhost:8888/opensso/UI/Login?realm=gatein">http://localhost:8888/opensso/UI/Login?realm=gatein</a>. Login will not be available at this point.
                        </p><div class="mediaobject"><img src="images/AuthenticationAndIdentity/SSO/opensso-shot.png"/></div></li></ol></div><p>Configure "gatein" realm:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Direct your browser to <a class="ulink" href="http://localhost:8888/opensso">http://localhost:8888/opensso</a></p></li><li><p>Create default configuration</p></li><li><p>Login as <code class="literal">amadmin</code> and then go to tab "Configuration" -&gt; tab "Authentication" -&gt; link "Core" -&gt;
                        add new value and fill in the class name "org.gatein.sso.opensso.plugin.AuthenticationPlugin".
                        This step is really important. Without it AuthenticationPlugin is not available among other OpenSSO authentication modules.
                     </p></li><li><p>Go to tab "Access control" and create new realm called "gatein".</p></li><li><p>Go to "gatein" realm and click on "Authentication" tab. At the bottom in the section "Authentication chaining" click on "ldapService".
                     Here change the selection from "Datastore", which is the default module in the authentication chain, to "AuthenticationPlugin".
                     This enables authentication of "gatein" realm by using GateIn REST service instead of the OpenSSO LDAP server.</p></li><li><p>
                     Go to "Advanced properties" and change UserProfile from "Required" to "Dynamic". This step is needed
                     because GateIn 3.2 users are not in OpenSSO Datastore (LDAP server), so their profiles can't be obtained
                     if "Required" is active. By using "Dynamic" all new users are automatically
                     created in OpenSSO datastore after successful authentication.
                  </p></li><li><p>
                     Increase the user privileges to allow REST access. Go to "Access control" -&gt;
                     Top level realm -&gt; "Privileges" tab -&gt; All authenticated users, and check the last two checkboxes:
                     </p><div class="itemizedlist"><ul><li><p>Read and write access only for policy properties</p></li><li><p>Read and write access to all realm and policy properties</p></li></ul></div><p>
                  </p></li><li><p>Do the same for "gatein" realm.</p></li></ol></div><p>Also, instead of configuring OpenSSO manually as above, you can refer to the available configuration files <a class="ulink" href="https://repository.jboss.org/nexus/content/groups/public/org/gatein/sso/sso-packaging/1.0.1-GA/sso-packaging-1.0.1-GA.zip">here</a>.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-OpenSSO_The_Open_Web_SSO_project-Setup_the_OpenSSO_client"/>6.6.4.2. Setup the OpenSSO client</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
                        Copy all libraries from <code class="filename">GATEIN_SSO_HOME/opensso/gatein.ear/lib</code> into <code class="filename">JBOSS_HOME/server/default/deploy/gatein.ear/lib</code> (Or, in Tomcat, into <code class="filename">GATEIN_HOME/lib</code>)
                    </p></li><li><div class="itemizedlist"><ul><li><p>
                                In JBoss AS, edit gatein.ear/META-INF/gatein-jboss-beans.xml and uncomment this section
                            </p><pre class="programlisting">&lt;authentication&gt;
  &lt;login-module code="org.gatein.sso.agent.login.SSOLoginModule" flag="required"&gt;
  &lt;/login-module&gt;      
  &lt;login-module code="org.exoplatform.services.security.j2ee.JbossLoginModule" flag="required"&gt;
    &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
    &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
  &lt;/login-module&gt;
&lt;/authentication&gt;
</pre></li><li><p>
                                If you are running GateIn 3.2 in Tomcat, edit $GATEIN_HOME/conf/jaas.conf and uncomment this section
                            </p><pre class="programlisting">org.gatein.sso.agent.login.SSOLoginModule required;
org.exoplatform.services.security.j2ee.TomcatLoginModule required
portalContainerName=portal
realmName=gatein-domain;
</pre></li></ul></div><p>
                        At this point the installation can be tested:
                    </p><div class="procedure"><ol class="1"><li><p>
                                Access GateIn 3.2 by going to <a class="ulink" href="http://localhost:8888/opensso/UI/Login?realm=gatein">http://localhost:8888/opensso/UI/Login?realm=gatein</a> (assuming that the OpenSSO server using Tomcat is still running).
                            </p></li><li><p>
                                Login with the username <code class="literal">root</code> and the password <code class="literal">gtn</code> or any account created through the portal.
                            </p></li></ol></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sect-Reference_Guide-OpenSSO_The_Open_Web_SSO_project-Setup_the_portal_to_redirect_to_OpenSSO"/>6.6.4.3. Setup the portal to redirect to OpenSSO</h4></div></div></div><p>
                The next part of the process is to redirect all user authentication to the OpenSSO server.
            </p><p>
                Information about where the OpenSSO server is hosted must be properly configured within the Enterprise Portal Platform instance. The required configuration is done by modifying three files:
                </p><div class="itemizedlist"><ul><li><p>
                        In the <code class="filename">gatein.ear/web.war/groovy/groovy/webui/component/UIBannerPortlet.gtml</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a class="Login" onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a class="Login" href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILoginForm.label.Signin")%&gt;&lt;/a&gt;

</pre><p>
                        </p></li><li><p>
                        In the <code class="filename">gatein.ear/web.war/groovy/portal/webui/component/UILogoPortlet.gtmpl</code> file modify the 'Sign In' link as follows:
</p><pre class="programlisting">

&lt;!--
&lt;a onclick="$signInAction"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt;
--&gt;
&lt;a href="/portal/sso"&gt;&lt;%=_ctx.appRes("UILogoPortlet.action.signin")%&gt;&lt;/a&gt; 

</pre><p>
                        </p></li><li><p>
                            Replace the entire contents of <code class="filename">gatein.ear/02portal.war/login/jsp/login.jsp</code> with:
                        </p><pre class="programlisting">&lt;html&gt;
  &lt;head&gt;
    &lt;script type="text/javascript"&gt;
     window.location = '/portal/sso';
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></li><li><p>
                            Add the following Filters at the top of the filter chain in <code class="filename">gatein.ear/02portal.war/WEB-INF/web.xml</code>:


</p><pre class="programlisting">

  &lt;filter&gt;
    &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;!-- This should point to your SSO authentication server --&gt;
        &lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;
        &lt;param-value&gt;http://localhost:8888/opensso/UI/Login?
        realm=gatein&amp;amp;goto=http://localhost:8080/portal/initiatessologin&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/filter&gt;
  &lt;filter&gt;  
    &lt;filter-name&gt;OpenSSOLogoutFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.gatein.sso.agent.filter.OpenSSOLogoutFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
      &lt;!-- This should point to your OpenSSO authentication server --&gt;
      &lt;param-name&gt;LOGOUT_URL&lt;/param-name&gt;
      &lt;param-value&gt;http://localhost:8888/opensso/UI/Logout&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/filter&gt;
  &lt;filter&gt;
        &lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.gatein.sso.agent.filter.InitiateLoginFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
          &lt;param-name&gt;ssoServerUrl&lt;/param-name&gt;
          &lt;param-value&gt;hhttp://localhost:8888/opensso&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
          &lt;param-name&gt;loginUrl&lt;/param-name&gt;
          &lt;param-value&gt;http://localhost:8080/portal/dologin&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
      &lt;param-name&gt;ssoCookieName&lt;/param-name&gt;
      &lt;param-value&gt;iPlanetDirectoryPro&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;/filter&gt;
  
  &lt;!-- place the filters at the top of the filter chain --&gt;
  &lt;filter-mapping&gt;
      &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;          
  &lt;/filter-mapping&gt;
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;OpenSSOLogoutFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;InitiateLoginFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/initiatessologin&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
 
</pre><p>
                        </p></li></ul></div><p>
            </p><p>
                From now on, all links redirecting to the user authentication pages will redirect to the OpenSSO centralized authentication form.
            </p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="Single_Sign_On-SPNEGO"/>6.6.5. SPNEGO</h3></div></div></div><p>SPNEGO (Simple and Protected GSSAPI Negotiation Mechanism) is
            used to authenticate transparently through the web browser after the
            user has been authenticated when logging-in his session.</p><p>A typical use case is the following:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Users logs into his desktop (Such as a Windows machine).</p></li><li><p>The desktop login is governed by Active Directory domain.</p></li><li><p>User then uses his browser (IE/Firefox) to access a web
                    application (that uses JBoss Negotiation) hosted on JBoss EPP.</p></li><li><p>The Browser transfers the desktop sign on information to the
                    web application.</p></li><li><p>JBoss EAP/AS uses background GSS messages with the Active
                    Directory (or any Kerberos Server) to validate the user.</p></li><li><p>The User has seamless SSO into the web application.</p></li></ol></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="SPNEGO_server_configuration"/>6.6.5.1. SPNEGO Server Configuration</h4></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Information stated here only describes basic steps for you to configure the SPNEGO server. If you are already familiar with SPNEGO, jump to the <a class="xref" href="chap-Reference_Guide-Authentication_And_Identity.html#Single_Sign_On-SPNEGO-GateIn_Configuration" title="6.6.5.2. GateIn 3.2 Configuration">Section 6.6.5.2, “GateIn 3.2 Configuration”</a> to see how to integrate SPNEGO with GateIn 3.2.</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Correct the setup of network on the machine. For example, if you are using the "server.local.network" domain as your machine where Kerberos and GateIn 3.2 are localed,
          add the line containing the machine's IP address to the <span class="bold"><strong>/etc/host </strong></span> file.
          </p><pre class="programlisting">
192.168.1.88  server.local.network
          </pre><div class="note"><h2>Note</h2><p>It is not recommended you use loopback addresses.</p></div></li><li><p>Install Kerberos with these packages: krb5-admin-server, krb5-kdc, krb5-config, krb5-user, krb5-clients, and krb5-rsh-server.
          </p></li><li><p>Edit the Kerberos configuration file at <span class="bold"><strong>/etc/krb5.config</strong></span>, including:
          </p><div class="itemizedlist"><ul><li><p>Uncomment on these lines:</p><pre class="programlisting">
default_tgs_enctypes = des3-hmac-sha1
default_tkt_enctypes = des3-hmac-sha1
permitted_enctypes = des3-hmac-sha1
</pre></li><li><p>Add <span class="bold"><strong>local.network</strong></span> as a default realm and it is also added to the list of realms and remove the remains of realms. The content looks like:
              </p><pre class="programlisting">
[libdefaults]
    default_realm = LOCAL.NETWORK
 
# The following krb5.conf variables are only for MIT Kerberos.
    krb4_config = /etc/krb.conf
    krb4_realms = /etc/krb.realms
    kdc_timesync = 1
    ccache_type = 4
    forwardable = true
    proxiable = true
 
# The following encryption type specification will be used by MIT Kerberos
# if uncommented.  In general, the defaults in the MIT Kerberos code are
# correct and overriding these specifications only serves to disable new
# encryption types as they are added, creating interoperability problems.
#
# Thie only time when you might need to uncomment these lines and change
# the enctypes is if you have local software that will break on ticket
# caches containing ticket encryption types it doesn't know about (such as
# old versions of Sun Java).
 
    default_tgs_enctypes = des3-hmac-sha1
    default_tkt_enctypes = des3-hmac-sha1
    permitted_enctypes = des3-hmac-sha1
 
# The following libdefaults parameters are only for Heimdal Kerberos.
    v4_instance_resolve = false
    v4_name_convert = {
        host = {
            rcmd = host
            ftp = ftp
        }
        plain = {
            something = something-else
        }
    }
    fcc-mit-ticketflags = true
 
[realms]
    LOCAL.NETWORK = {
        kdc = server.local.network
        admin_server = server.local.network
    }
 
[domain_realm]
    .local.network = LOCAL.NETWORK
    local.network = LOCAL.NETWORK
 
[login]
    krb4_convert = true
    krb4_get_tickets = false
</pre></li></ul></div></li><li><p>Edit the KDC configuraton file at <span class="bold"><strong>/etc/krb5kdc/kdc.conf</strong></span> that looks like.
          </p><pre class="programlisting">
[kdcdefaults]
    kdc_ports = 750,88
 
[realms]
    LOCAL.NETWORK = {
        database_name = /home/gatein/krb5kdc/principal
        admin_keytab = FILE:/home/gatein/krb5kdc/kadm5.keytab
        acl_file = /home/gatein/krb5kdc/kadm5.acl
        key_stash_file = /home/gatein/krb5kdc/stash
        kdc_ports = 750,88
        max_life = 10h 0m 0s
        max_renewable_life = 7d 0h 0m 0s
        master_key_type = des3-hmac-sha1
        supported_enctypes = aes256-cts:normal arcfour-hmac:normal des3-hmac-sha1:normal des-cbc-crc:normal des:normal des:v4 des:norealm des:onlyrealm des:afs3
        default_principal_flags = +preauth
    }
 
[logging]
        kdc = FILE:/home/gatein/krb5logs/kdc.log
        admin_server = FILE:/home/gatein/krb5logs/kadmin.log
</pre><div class="itemizedlist"><ul><li><p>Create krb5kdc and krb5logs directory for Kerberos database as shown in the configuration file above.</p></li><li><p>Next, create a KDC database using the following command.</p><pre class="programlisting">
sudo krb5_newrealm
</pre></li><li><p>Start the KDC and Kerberos admin servers using these commands:</p><pre class="programlisting">
sudo /etc/init.d/krb5-kdc restart
sudo /etc/init.d/krb-admin-server restart
</pre></li></ul></div></li><li><p>Add Principals and create Keys.</p><div class="itemizedlist"><ul><li><p>Start an interactive 'kadmin' session and create the necessary Principals.</p><pre class="programlisting">
sudo kadmin.local
</pre></li><li><p>Add the GateIn 3.2 machine and keytab file that need to be authenticated.</p><pre class="programlisting">
addprinc -randkey HTTP/server.local.network@LOCAL.NETWORK
ktadd HTTP/server.local.network@LOCAL.NETWORK
</pre></li><li><p>Add the default GateIn 3.2 user accounts and enter the password for each created user that will be authenticated.</p><pre class="programlisting">
addprinc john
addprinc demo
addprinc root
</pre></li></ul></div></li><li><p>Test your changed setup by using the command.</p><pre class="programlisting">
kinit -A demo
</pre><div class="itemizedlist"><ul><li><p>If the setup works well, you are required to enter the password created for this user in Step 5.</p></li><li><p>If you want to login with another user, use this command.</p><pre class="programlisting">
kdestroy
</pre></li></ul></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="Single_Sign_On-SPNEGO-GateIn_Configuration"/>6.6.5.2. GateIn 3.2 Configuration</h4></div></div></div><p>GateIn 3.2 uses JBoss Negotiation to enable SPNEGO-based desktop
                SSO for the portal. Here are the steps to integrate SPNEGO with
                GateIn 3.2.
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>
                        Activate the Host authentication under the <span class="bold"><strong>conf/login-config.xml </strong></span> file adding the following host login module:
          </p>
                        
                        Under conf/login-config.xml, add the following host login module:
                        <pre class="programlisting">&lt;!-- SPNEGO domain --&gt;
&lt;application-policy name="host"&gt;
  &lt;authentication&gt;
      &lt;login-module code="com.sun.security.auth.module.Krb5LoginModule"
         flag="required"&gt;
         &lt;module-option name="storeKey"&gt;true&lt;/module-option&gt;
         &lt;module-option name="useKeyTab"&gt;true&lt;/module-option&gt;
         &lt;module-option name="principal"&gt;HTTP/server.local.network@LOCAL.NETWORK&lt;/module-option&gt;
      &lt;module-option name="keyTab"&gt;/etc/krb5.keytab&lt;/module-option&gt;
      &lt;module-option name="doNotPrompt"&gt;true&lt;/module-option&gt;
      &lt;module-option name="debug"&gt;true&lt;/module-option&gt;
    &lt;/login-module&gt;
  &lt;/authentication&gt;
 &lt;/application-policy&gt;
</pre><p>The 'keyTab' value should point to the keytab file that was
                        generated by the kadmin kerberos tool. See the <a class="xref" href="chap-Reference_Guide-Authentication_And_Identity.html#SPNEGO_server_configuration" title="6.6.5.1. SPNEGO Server Configuration">Section 6.6.5.1, “SPNEGO Server Configuration”</a> section for more details.
            </p></li><li><p>
                        Extend the core authentication mechanisms to support SPNEGO under
                        <span class="bold"><strong>deployers/jbossweb.deployer/META-INF/war-deployers-jboss-beans.xml</strong></span> by
                        adding the 'SPNEGO' authenticators property.
          </p><pre class="programlisting">

&lt;property name="authenticators"&gt;
         &lt;map keyClass="java.lang.String" valueClass="java.lang.String"&gt;
            &lt;entry&gt;
               &lt;key&gt;BASIC&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.BasicAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;CLIENT-CERT&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.SSLAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;DIGEST&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.DigestAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;FORM&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.FormAuthenticator&lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
               &lt;key&gt;NONE&lt;/key&gt;
               &lt;value&gt;org.apache.catalina.authenticator.NonLoginAuthenticator&lt;/value&gt;
            &lt;/entry&gt;

        &lt;!-- Add this entry --&gt;
        &lt;entry&gt;
          &lt;key&gt;SPNEGO&lt;/key&gt;
          &lt;value&gt;org.jboss.security.negotiation.NegotiationAuthenticator&lt;/value&gt;
        &lt;/entry&gt;
         &lt;/map&gt;
&lt;/property&gt;

</pre></li><li><p>Add the GateIn SSO module binaries by copying <span class="bold"><strong>$GATEIN_SSO_HOME/spnego/gatein.ear/lib/sso-agent.jar</strong></span>, and <span class="bold"><strong>$GATEIN_SSO_HOME/spnego/gatein.ear/lib/sso-spnego.jar</strong></span> to the <span class="bold"><strong>deploy/gatein.ear/lib</strong></span> directory.
          </p></li><li><p>
                        Modify the <span class="bold"><strong>deploy/gatein.ear/META-INF/gatein-jboss-beans.xml</strong></span> file as below, then comment on other parts.
          </p><pre class="programlisting">
&lt;login-module code="org.gatein.sso.spnego.SPNEGOLoginModule" flag="required"&gt;
  &lt;module-option name="password-stacking"&gt;useFirstPass&lt;/module-option&gt;
  &lt;module-option name="serverSecurityDomain"&gt;host&lt;/module-option&gt;
&lt;/login-module&gt;
&lt;login-module code="org.gatein.sso.agent.login.SPNEGORolesModule" flag="required"&gt;
  &lt;module-option name="password-stacking"&gt;useFirstPass&lt;/module-option&gt;
  &lt;module-option name="portalContainerName"&gt;portal&lt;/module-option&gt;
  &lt;module-option name="realmName"&gt;gatein-domain&lt;/module-option&gt;
&lt;/login-module&gt;
</pre></li><li><p>
                        Modify <span class="bold"><strong>gatein.ear/02portal.war/WEB-INF/web.xml</strong></span> as below.</p><pre class="programlisting">
&lt;!--
&lt;login-config&gt;
  &lt;auth-method&gt;FORM&lt;/auth-method&gt;
  &lt;realm-name&gt;gatein-domain&lt;/realm-name&gt;
  &lt;form-login-config&gt;
    &lt;form-login-page&gt;/initiatelogin&lt;/form-login-page&gt;
    &lt;form-error-page&gt;/errorlogin&lt;/form-error-page&gt;
  &lt;/form-login-config&gt;
&lt;/login-config&gt;
--&gt;
 
&lt;login-config&gt;
  &lt;auth-method&gt;SPNEGO&lt;/auth-method&gt;
  &lt;realm-name&gt;SPNEGO&lt;/realm-name&gt;
&lt;/login-config&gt;
</pre><p>This integrates SPNEGO support into the Portal web archive by switching the authentication mechanism from the default "FORM"-based to "SPNEGO"-based authentication.</p></li><li><p>Integrate the request pre-processing needed for SPNEGO via filters by adding the following filters to the <span class="bold"><strong>web.xml </strong></span> at the top of the Filter chain.</p><pre class="programlisting">
&lt;filter&gt;
  &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
  &lt;filter-class&gt;org.gatein.sso.agent.filter.LoginRedirectFilter&lt;/filter-class&gt;
  &lt;init-param&gt;
    &lt;!-- This should point to your SSO authentication server --&gt;
    &lt;param-name&gt;LOGIN_URL&lt;/param-name&gt;
    &lt;param-value&gt;/portal/private/classic&lt;/param-value&gt;
   &lt;/init-param&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
  &lt;filter-name&gt;LoginRedirectFilter&lt;/filter-name&gt;
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</pre></li><li><p>
                        Start the GateIn 3.2 portal using the command below.</p><pre class="programlisting">sudo ./run.sh -Djava.security.krb5.realm=LOCAL.NETWORK -Djava.security.krb5.kdc=server.local.network -c PROFILE -b server.local.network</pre><p>The PROFILE parameter in the above command should be replaced with the server profile modified in the above configuration. For example, if you are configuring the default profile, your command will be.</p><pre class="programlisting">sudo ./run.sh -Djava.security.krb5.realm=LOCAL.NETWORK -Djava.security.krb5.kdc=server.local.network -c default -b server.local.network</pre></li><li><p>Login to Kerberos with the command.</p><pre class="programlisting">kinit -A demo</pre><p>You should be able to click the 'Sign In' link on the GateIn 3.2 portal
                        and the 'demo' user from the GateIn 3.2 portal should be automatically
                        logged in.</p></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="Single_Sign_On-CAS_Central_Clients"/>6.6.5.3. Clients</h4></div></div></div><p>After performing all configurations above, you need to enable the <span class="bold"><strong>Negotiate authentication </strong></span> of Firefox in clients so that clients could be authenticated by GateIn 3.2 as follows:
          </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li><p>Start Firefox, then enter the command: <span class="bold"><strong>about:config </strong></span> into the address field.</p></li><li><p>Enter <span class="bold"><strong>network.negotiate-auth</strong></span> and set the value as below:</p><pre class="programlisting">
network.negotiate-auth.allow-proxies = true
network.negotiate-auth.delegation-uris = .local.network
network.negotiate-auth.gsslib (no-value)
network.negotiate-auth.trusted-uris = .local.network
network.negotiate-auth.using-native-gsslib = true
</pre></li></ol></div></div></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="chap-Reference_Guide-Gadget_development.html"><strong>Prev</strong>Chapter 5. Gadget development</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="wsrp.html"><strong>Next</strong>Chapter 7. Web Services for Remote Portlets (WSRP)</a></li></ul></body></html>