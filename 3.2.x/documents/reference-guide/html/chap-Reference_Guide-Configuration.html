<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 2. Configuration</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="GateIn Reference Guide"/><link rel="up" href="index.html" title="GateIn Reference Guide"/><link rel="prev" href="chap-Reference_Guide-Introduction.html" title="Chapter 1. Introduction"/><link rel="next" href="chap-Reference_Guide-Development.html" title="Chapter 3. Portal Development"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="chap-Reference_Guide-Introduction.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="chap-Reference_Guide-Development.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Reference_Guide-Configuration"/>Chapter 2. Configuration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="chap-Reference_Guide-Configuration.html#sect-Reference_Guide-Database_Configuration">2.1. Database Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="chap-Reference_Guide-Configuration.html#sect-Reference_Guide-Database_Configuration-Overview">2.1.1. Overview</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Configuration.html#sect-Reference_Guide-Database_Configuration-JCR_database_configuration">2.1.2. Configure the database for JCR</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Configuration.html#sect-Reference_Guide-Database_Configuration-Database_for_default_identity_store">2.1.3. Configure the database for the default identity store</a></span></dt></dl></dd><dt><span class="section"><a href="chap-Reference_Guide-Configuration.html#sect-Reference_Guide-EMail_Service_Configuration">2.2. Email Service Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="chap-Reference_Guide-Configuration.html#sect-Reference_Guide-EMail_Service_Configuration-Overview">2.2.1. Overview</a></span></dt><dt><span class="section"><a href="chap-Reference_Guide-Configuration.html#sect-Reference_Guide-EMail_Service_Configuration-Parameters">2.2.2. Configure the outgoing e-mail account</a></span></dt></dl></dd></dl></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-Database_Configuration"/>2.1. Database Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Database_Configuration-Overview"/>2.1.1. Overview</h3></div></div></div><p>GateIn 3.2 has two different database dependencies. One is the
    identity service configuration, which depends on Hibernate. The other is the Java content repository (JCR) service, which
    depends on JDBC API and can integrate with any existing datasource implementation.</p><p>When you change the database configuration for the first time,
    GateIn will automatically generate the proper schema (assuming that the
    database user has the appropriate permissions).</p><p>GateIn 3.2 assumes the default encoding for your database is
    <span class="emphasis"><em>latin1</em></span>. You may need to change this parameter for
    your database so that GateIn 3.2 works properly.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Database_Configuration-JCR_database_configuration"/>2.1.2. Configure the database for JCR</h3></div></div></div><p>To configure the database used by JCR, edit the
    file:<span class="emphasis"><em>$JBOSS_HOME/server/default/conf/gatein/configuration.properties</em></span>.</p><p> For Tomcat, the file is located at <span class="emphasis"><em>$TOMCAT_HOME/gatein/conf/configuration.properties</em></span>.</p><p>Next, edit the values of driver, url, username and password with the
    values for your JDBC connection. To learn more, refer to your database JDBC driver
    documentation.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">gatein.jcr.datasource.driver=org.hsqldb.jdbcDriver</span><br />
<span class="xml_plain">gatein.jcr.datasource.url=jdbc:hsqldb:file:${gatein.db.data.dir}/data/jdbcjcr_${name}</span><br />
<span class="xml_plain">gatein.jcr.datasource.username=sa</span><br />
<span class="xml_plain">gatein.jcr.datasource.password=</span><br />
</pre><p>By default, the name of the database is "jdbcjcr_${name}" - ${name}
    should be a part of the database name, as it is dynamically replaced by the
    name of the portal container extension. For example,
    <span class="emphasis"><em>gatein-sample-portal.ear</em></span> defines "sample-portal" as the container name and the
    default portal defines "portal" as the container name.</p><p>In case of HSQL, the databases are created automatically. For any
    other databases, you need to create a database named "jdbcjcr_portal"
    (and "jdbcjcr_sample-portal" if you have <span class="emphasis"><em>gatein-sample-portal.ear</em></span> in
    <span class="emphasis"><em>$JBOSS_HOME/server/default/deploy</em></span>). Note that some databases do not accept '-'
    in the database name, so you may have to remove
    <span class="emphasis"><em>$JBOSS_HOME/server/default/deploy/gatein-sample-portal.ear</em></span>.</p><p>Make sure the user has rights to create tables on <span class="emphasis"><em>jdbcjcr_portal</em></span>, and
    to update them as they will be automatically created during the first startup.</p><p>Also, add your database's JDBC driver into the classpath - you can put it in
    <span class="emphasis"><em>$JBOSS_HOME/server/default/lib</em></span> (or <span class="emphasis"><em>$TOMCAT_HOME/lib</em></span>, if you are running on
    Tomcat).</p><p>MySQL example:</p><p>Configure the JCR to store data in MySQL and assume that you created a user named "gateinuser" with a password "gateinpassword". Next, create a database <span class="emphasis"><em>mygateindb_portal</em></span> (remember that portal is required),
    and assign the rights to create tables to the users.</p><p>Add the MySQL's JDBC driver to the classpath, and
    finally edit <span class="emphasis"><em>gatein.ear/02portal.war/WEB-INF/conf/jcr/jcr-configuration</em></span>
    to contain the following:</p><pre class="programlisting">gatein.jcr.datasource.driver=com.mysql.jdbc.Driver
gatein.jcr.datasource.url=jdbc:mysql://localhost:3306/mygateindb${container.name.suffix}
gatein.jcr.datasource.username=gateinuser
gatein.jcr.datasource.password=gateinpassword
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-Database_Configuration-Database_for_default_identity_store"/>2.1.3. Configure the database for the default identity store</h3></div></div></div><p>By default, users are stored in a database. To change the database where users are stored, you need to edit the file:</p><p><span class="emphasis"><em>$JBOSS_HOME/server/default/conf/gatein/configuration.properties</em></span>For
    Tomcat, the file is located at <span class="emphasis"><em>$TOMCAT_HOME/gatein/conf/configuration.properties</em></span></p><p>You will find the same type of configuration as in
    <span class="emphasis"><em>jcr-configuration.xml</em></span>:</p><pre class="programlisting">gatein.idm.datasource.driver=org.hsqldb.jdbcDriver
gatein.idm.datasource.url=jdbc:hsqldb:file:${gatein.db.data.dir}/data/jdbcidm_${name}
gatein.idm.datasource.username=sa
gatein.idm.datasource.password</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Reference_Guide-EMail_Service_Configuration"/>2.2. Email Service Configuration</h2></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-EMail_Service_Configuration-Overview"/>2.2.1. Overview</h3></div></div></div><p>GateIn 3.2 includes an e-mail sending service that needs to be configured
    before it can function properly. This service, for instance, is used to send emails to users who forgot
    their password or username.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="sect-Reference_Guide-EMail_Service_Configuration-Parameters"/>2.2.2. Configure the outgoing e-mail account</h3></div></div></div><p>The e-mail service can use any SMTP account configured in
    <span class="emphasis"><em>$JBOSS_HOME/server/default/conf/gatein/configuration.properties</em></span>
    (or <span class="emphasis"><em>$TOMCAT_HOME/gatein/conf/configuration.properties</em></span> if you are using Tomcat).</p><p>The relevant section looks like:</p><pre class="programlisting"># EMail
gatein.email.smtp.username=
gatein.email.smtp.password=
gatein.email.smtp.host=smtp.gmail.com
gatein.email.smtp.port=465
gatein.email.smtp.starttls.enable=true
gatein.email.smtp.auth=true
gatein.email.smtp.socketFactory.port=465
gatein.email.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory</pre><p>It is preconfigured for GMail, so that any GMail account can easily be used (simply use the full GMail address
   with username and password.</p><p>In corporate environments, if you want to use your corporate SMTP gateway over SSL,
       like in the default configuration, configure a certificate truststore containing your SMTP server's
       public certificate. Depending on the key sizes, you may then also need to install Java Cryptography Extension (JCE) 
       Unlimited Strength Jurisdiction Policy Files for your Java Runtime Environment.</p></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="chap-Reference_Guide-Introduction.html"><strong>Prev</strong>Chapter 1. Introduction</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="chap-Reference_Guide-Development.html"><strong>Next</strong>Chapter 3. Portal Development</a></li></ul></body></html>